{"file_contents":{"ADMIN_LOGIN_INFO.md":{"content":"# بيانات تسجيل دخول المدير\n\n## معلومات المدير الافتراضي\n\n### البريد الإلكتروني:\n```\nadmin@fooddelivery.com\n```\n\n### كلمة المرور:\n```\nadmin123456\n```\n\n### نوع المستخدم:\n```\nadmin\n```\n\n---\n\n## كيفية الوصول لتطبيق إدارة النظام\n\n1. قم بزيارة رابط التطبيق وأضف `/admin-login` في نهاية الرابط\n2. أدخل البريد الإلكتروني وكلمة المرور المذكورة أعلاه\n3. سيتم نقلك تلقائياً إلى لوحة تحكم المدير\n\n---\n\n## ميزات لوحة تحكم المدير\n\n- **إدارة المطاعم**: إضافة وتعديل وحذف المطاعم\n- **إدارة التصنيفات**: التحكم في تصنيفات المطاعم\n- **إدارة القوائم**: إضافة وتعديل عناصر القوائم والأسعار\n- **إدارة السائقين**: التحكم في حسابات السائقين وصلاحياتهم\n- **إدارة الطلبات**: متابعة وإدارة جميع الطلبات\n- **إدارة العروض**: إنشاء وإدارة العروض الخاصة\n- **إعدادات التوصيل**: التحكم في رسوم التوصيل\n- **التقارير والإحصائيات**: مراقبة أداء التطبيق\n\n---\n\n## ملاحظات مهمة\n\n- **الأمان**: تأكد من تغيير كلمة المرور الافتراضية بعد أول تسجيل دخول\n- **الصلاحيات**: حساب المدير له صلاحيات كاملة على النظام\n- **النسخ الاحتياطي**: يُنصح بعمل نسخة احتياطية دورية من قاعدة البيانات\n\n---\n\n## الدعم الفني\n\nفي حالة مواجهة أي مشاكل:\n1. تحقق من اتصال الإنترنت\n2. تأكد من صحة البيانات المدخلة\n3. تواصل مع فريق الدعم الفني","size_bytes":1962},"PROJECT_DOCUMENTATION.md":{"content":"# تطبيق السريع ون - نظام التوصيل الشامل\n\n## نظرة عامة على المشروع\n\nتطبيق السريع ون هو نظام توصيل شامل يتكون من ثلاثة تطبيقات منفصلة:\n\n1. **تطبيق العملاء** - للطلب والتصفح\n2. **لوحة التحكم** - لإدارة النظام والمطاعم والطلبات\n3. **تطبيق السائقين** - لإدارة توصيل الطلبات\n\n## التقنيات المستخدمة\n\n### Frontend (العميل)\n- **React 18** - مكتبة واجهة المستخدم\n- **TypeScript** - للتحقق من الأنواع\n- **Vite** - أداة البناء والتطوير\n- **Tailwind CSS** - للتصميم\n- **Wouter** - للتوجيه\n- **TanStack Query** - لإدارة البيانات\n- **Lucide React** - للأيقونات\n- **Radix UI** - مكونات واجهة المستخدم\n\n### Backend (الخادم)\n- **Node.js** - بيئة التشغيل\n- **Express.js** - إطار عمل الخادم\n- **TypeScript** - للتحقق من الأنواع\n- **PostgreSQL** - قاعدة البيانات\n- **Drizzle ORM** - للتفاعل مع قاعدة البيانات\n- **tsx** - لتشغيل TypeScript\n\n## هيكل المشروع\n\n```\nproject/\n├── client/                 # تطبيق العميل (React)\n│   ├── src/\n│   │   ├── components/     # مكونات واجهة المستخدم\n│   │   ├── pages/          # صفحات التطبيق\n│   │   ├── context/        # حالة التطبيق العامة\n│   │   ├── hooks/          # React hooks مخصصة\n│   │   └── lib/           # مكتبات مساعدة\n├── server/                 # الخادم (Express + TypeScript)\n│   ├── index.ts           # نقطة دخول الخادم\n│   ├── routes.ts          # مسارات API\n│   ├── storage.ts         # طبقة البيانات في الذاكرة\n│   ├── db.ts             # طبقة قاعدة البيانات\n│   └── vite.ts           # إعداد Vite للتطوير\n├── shared/                # الكود المشترك\n│   └── schema.ts         # مخطط قاعدة البيانات\n└── drizzle.config.ts     # إعداد Drizzle ORM\n```\n\n## نظام المصادقة والأمان\n\n### نظام الـ 4 نقرات للوصول لواجهة الإدارة\n\nتم تطبيق نظام أمان خاص يتطلب:\n1. النقر على شعار التطبيق 4 مرات متتالية\n2. ظهور نقاط تشير لعدد النقرات\n3. بعد 4 نقرات تظهر أزرار لوحة التحكم وتطبيق السائق في القائمة الجانبية\n4. إعادة تعيين العداد بعد 3 ثوانٍ إذا لم تكتمل\n\n### بيانات المصادقة\n\n#### مدير النظام الرئيسي:\n- **البريد الإلكتروني**: `aymenpro124@gmail.com`\n- **كلمة المرور**: `777146387`\n- **نوع المستخدم**: مدير النظام\n\n#### سائق تجريبي:\n- **رقم الهاتف**: `+967771234567`\n- **كلمة المرور**: `password123`\n- **نوع المستخدم**: سائق\n\n## قاعدة البيانات\n\n### الجداول المطلوبة\n\n```sql\n-- جدول المديرين والسائقين\nCREATE TABLE admin_users (\n  id VARCHAR PRIMARY KEY DEFAULT gen_random_uuid(),\n  email TEXT NOT NULL UNIQUE,\n  password TEXT NOT NULL,\n  user_type TEXT NOT NULL, -- 'admin' أو 'driver'\n  is_active BOOLEAN DEFAULT true,\n  created_at TIMESTAMP DEFAULT NOW()\n);\n\n-- جدول جلسات المصادقة\nCREATE TABLE admin_sessions (\n  id VARCHAR PRIMARY KEY DEFAULT gen_random_uuid(),\n  admin_id VARCHAR REFERENCES admin_users(id),\n  token TEXT NOT NULL UNIQUE,\n  user_type TEXT NOT NULL,\n  expires_at TIMESTAMP NOT NULL,\n  created_at TIMESTAMP DEFAULT NOW()\n);\n\n-- جداول أخرى...\nCREATE TABLE categories (...);\nCREATE TABLE restaurants (...);\nCREATE TABLE menu_items (...);\nCREATE TABLE orders (...);\nCREATE TABLE drivers (...);\nCREATE TABLE special_offers (...);\n```\n\n### إعداد قاعدة البيانات\n\n1. تم إنشاء قاعدة بيانات PostgreSQL تلقائياً\n2. متغيرات البيئة متوفرة: `DATABASE_URL`, `PGHOST`, `PGPORT`, إلخ\n3. الجداول تُنشأ تلقائياً عند تشغيل التطبيق\n\n## API Endpoints\n\n### مصادقة المديرين\n- `POST /api/admin/login` - تسجيل الدخول\n- `POST /api/admin/logout` - تسجيل الخروج  \n- `GET /api/admin/verify` - التحقق من صحة الجلسة\n\n### الفئات\n- `GET /api/categories` - جلب جميع الفئات\n- `POST /api/categories` - إضافة فئة جديدة\n- `PUT /api/categories/:id` - تحديث فئة\n- `DELETE /api/categories/:id` - حذف فئة\n\n### المطاعم\n- `GET /api/restaurants` - جلب جميع المطاعم\n- `GET /api/restaurants/:id` - جلب مطعم محدد\n- `POST /api/restaurants` - إضافة مطعم جديد\n- `PUT /api/restaurants/:id` - تحديث مطعم\n- `DELETE /api/restaurants/:id` - حذف مطعم\n\n### عناصر القائمة\n- `GET /api/restaurants/:restaurantId/menu` - جلب قائمة مطعم\n- `POST /api/menu-items` - إضافة عنصر جديد\n- `PUT /api/menu-items/:id` - تحديث عنصر\n- `DELETE /api/menu-items/:id` - حذف عنصر\n\n### الطلبات\n- `GET /api/orders` - جلب جميع الطلبات\n- `GET /api/orders/:id` - جلب طلب محدد\n- `POST /api/orders` - إنشاء طلب جديد\n- `PUT /api/orders/:id` - تحديث طلب\n\n### السائقين\n- `GET /api/drivers` - جلب جميع السائقين\n- `GET /api/drivers/:id` - جلب سائق محدد\n- `POST /api/drivers` - إضافة سائق جديد\n- `PUT /api/drivers/:id` - تحديث سائق\n- `DELETE /api/drivers/:id` - حذف سائق\n\n### العروض الخاصة\n- `GET /api/special-offers` - جلب جميع العروض\n- `POST /api/special-offers` - إضافة عرض جديد\n- `PUT /api/special-offers/:id` - تحديث عرض\n- `DELETE /api/special-offers/:id` - حذف عرض\n\n## الواجهات\n\n### 1. تطبيق العملاء\n- الصفحة الرئيسية مع الفئات والمطاعم\n- صفحة المطعم وقائمة الطعام\n- عربة التسوق والطلب\n- تتبع الطلبات\n- الملف الشخصي والإعدادات\n\n### 2. لوحة التحكم (المدير)\n- نظرة عامة مع الإحصائيات\n- إدارة الطلبات\n- إدارة المطاعم وقوائم الطعام\n- إدارة السائقين\n- إدارة الفئات والعروض الخاصة\n\n### 3. تطبيق السائق\n- لوحة تحكم السائق\n- قبول/رفض الطلبات\n- تتبع الموقع والطلبات\n- إحصائيات الأرباح والتوصيلات\n\n## كيفية تشغيل المشروع\n\n### متطلبات النظام\n- Node.js 20+\n- PostgreSQL\n- npm أو yarn\n\n### خطوات التشغيل\n\n1. **تثبيت التبعيات**:\n```bash\nnpm install\n```\n\n2. **إعداد قاعدة البيانات**:\n```bash\n# سيتم إنشاء قاعدة البيانات تلقائياً في Replit\nnpm run db:push\n```\n\n3. **تشغيل التطبيق**:\n```bash\nnpm run dev\n```\n\n4. **الوصول للتطبيق**:\n- تطبيق العملاء: `http://localhost:5000`\n- لوحة التحكم: انقر 4 مرات على الشعار ← أدخل بيانات المدير\n- تطبيق السائق: انقر 4 مرات على الشعار ← أدخل بيانات السائق\n\n## أوامر مفيدة\n\n```bash\n# تشغيل التطبيق للتطوير\nnpm run dev\n\n# بناء التطبيق للإنتاج\nnpm run build\n\n# تشغيل التطبيق المبني\nnpm run start\n\n# دفع مخطط قاعدة البيانات\nnpm run db:push\n\n# توليد ملفات المايجريشن\nnpm run db:generate\n\n# فحص TypeScript\nnpm run check\n```\n\n---\n\n# دليل النشر والاستضافة\n\n## 1. رفع المشروع على GitHub\n\n### خطوات رفع المشروع:\n\n1. **إنشاء مستودع جديد على GitHub**:\n   - اذهب إلى [github.com](https://github.com)\n   - انقر على \"New repository\"\n   - أدخل اسم المشروع: `food-delivery-app`\n   - اختر \"Public\" أو \"Private\"\n   - انقر \"Create repository\"\n\n2. **ربط المشروع المحلي بـ GitHub**:\n```bash\n# تهيئة Git إذا لم يكن موجوداً\ngit init\n\n# إضافة جميع الملفات\ngit add .\n\n# إنشاء أول commit\ngit commit -m \"Initial commit: Complete food delivery system with admin panel and driver app\"\n\n# ربط المستودع البعيد\ngit remote add origin https://github.com/YOUR_USERNAME/food-delivery-app.git\n\n# رفع الكود\ngit branch -M main\ngit push -u origin main\n```\n\n3. **إعداد ملف `.gitignore`** (إذا لم يكن موجوداً):\n```gitignore\n# Dependencies\nnode_modules/\n.pnp\n.pnp.js\n\n# Production builds\n/dist\n/build\n\n# Environment variables\n.env\n.env.local\n.env.development.local\n.env.test.local\n.env.production.local\n\n# Logs\nnpm-debug.log*\nyarn-debug.log*\nyarn-error.log*\nlerna-debug.log*\n\n# Runtime data\npids\n*.pid\n*.seed\n*.pid.lock\n\n# Database\n*.db\n*.sqlite\n\n# OS files\n.DS_Store\nThumbs.db\n\n# IDE\n.vscode/\n.idea/\n*.swp\n*.swo\n```\n\n## 2. النشر على Railway.com\n\n### لماذا Railway؟\n- سهولة النشر\n- دعم قواعد البيانات PostgreSQL\n- نشر تلقائي من GitHub\n- دومين مجاني مع HTTPS\n\n### خطوات النشر على Railway:\n\n#### الخطوة 1: إنشاء حساب\n1. اذهب إلى [railway.app](https://railway.app)\n2. انقر \"Login\" ← \"Sign up with GitHub\"\n3. اربط حسابك مع GitHub\n\n#### الخطوة 2: إنشاء مشروع جديد\n1. انقر \"New Project\"\n2. اختر \"Deploy from GitHub repo\"\n3. اختر مستودع `food-delivery-app`\n4. انقر \"Deploy Now\"\n\n#### الخطوة 3: إضافة قاعدة بيانات PostgreSQL\n1. في لوحة تحكم المشروع انقر \"New\"\n2. اختر \"Database\" ← \"Add PostgreSQL\"\n3. انتظر حتى يتم إنشاء قاعدة البيانات\n\n#### الخطوة 4: ربط قاعدة البيانات بالتطبيق\n1. انقر على خدمة التطبيق (ليس قاعدة البيانات)\n2. اذهب إلى تبويب \"Variables\"\n3. أضف المتغيرات التالية:\n\n```env\nDATABASE_URL=${{Postgres.DATABASE_URL}}\nNODE_ENV=production\nPORT=5000\n```\n\n#### الخطوة 5: إعداد أوامر البناء\n1. في تبويب \"Settings\"\n2. في قسم \"Build Command\":\n```bash\nnpm install && npm run build\n```\n\n3. في قسم \"Start Command\":\n```bash\nnpm run start\n```\n\n#### الخطوة 6: إعداد الدومين\n1. في تبويب \"Settings\"\n2. في قسم \"Domains\"\n3. انقر \"Generate Domain\"\n4. ستحصل على رابط مثل: `https://your-app-name.up.railway.app`\n\n### إعداد متقدم للنشر\n\n#### إضافة ملف `railway.json`:\n```json\n{\n  \"build\": {\n    \"builder\": \"nixpacks\"\n  },\n  \"deploy\": {\n    \"startCommand\": \"npm run start\",\n    \"restartPolicyType\": \"ON_FAILURE\",\n    \"restartPolicyMaxRetries\": 10\n  }\n}\n```\n\n#### تحديث `package.json` للنشر:\n```json\n{\n  \"scripts\": {\n    \"dev\": \"NODE_ENV=development tsx server/index.ts\",\n    \"build\": \"vite build && esbuild server/index.ts --platform=node --packages=external --bundle --format=esm --outdir=dist\",\n    \"start\": \"NODE_ENV=production node dist/index.js\",\n    \"db:push\": \"drizzle-kit push\",\n    \"db:generate\": \"drizzle-kit generate\"\n  },\n  \"engines\": {\n    \"node\": \">=20.0.0\"\n  }\n}\n```\n\n## 3. نشر تلقائي من GitHub\n\n### إعداد GitHub Actions (اختياري):\n\n1. أنشئ مجلد `.github/workflows/`\n2. أنشئ ملف `deploy.yml`:\n\n```yaml\nname: Deploy to Railway\n\non:\n  push:\n    branches: [ main ]\n  pull_request:\n    branches: [ main ]\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    \n    steps:\n    - uses: actions/checkout@v3\n    \n    - name: Use Node.js 20\n      uses: actions/setup-node@v3\n      with:\n        node-version: '20'\n        \n    - name: Install dependencies\n      run: npm ci\n      \n    - name: Run tests (if any)\n      run: npm test --if-present\n      \n    - name: Build application\n      run: npm run build\n```\n\n## 4. إعدادات الأمان والبيئة\n\n### متغيرات البيئة المطلوبة:\n```env\n# Railway ستوفر هذه تلقائياً\nDATABASE_URL=postgresql://user:password@host:port/database\nPGHOST=host\nPGPORT=5432\nPGUSER=postgres\nPGPASSWORD=password\nPGDATABASE=railway\n\n# إعدادات التطبيق\nNODE_ENV=production\nPORT=5000\n```\n\n### نصائح الأمان:\n1. **لا تضع كلمات مرور في الكود المصدري**\n2. **استخدم متغيرات البيئة دائماً**\n3. **فعّل HTTPS (Railway يوفرها تلقائياً)**\n4. **قم بتحديث التبعيات بانتظام**\n\n## 5. مراقبة التطبيق\n\n### عبر Railway:\n- **Logs**: مراقبة سجلات التطبيق\n- **Metrics**: مراقبة الأداء والاستخدام\n- **Deployments**: تاريخ النشر والإصدارات\n\n### نصائح للمراقبة:\n1. راقب استخدام قاعدة البيانات\n2. تابع أخطاء التطبيق في السجلات\n3. اختبر التطبيق بانتظام بعد النشر\n\n## الخلاصة\n\nبعد اتباع هذه الخطوات ستحصل على:\n- ✅ تطبيق توصيل شامل منشور على الإنترنت\n- ✅ قاعدة بيانات PostgreSQL مُدارة\n- ✅ نشر تلقائي من GitHub\n- ✅ دومين مجاني مع HTTPS\n- ✅ مراقبة وإحصائيات\n\n**رابط التطبيق النهائي**: `https://your-app-name.up.railway.app`\n\n---\n\n## معلومات إضافية\n\n### بيانات المصادقة للاختبار:\n- **مدير النظام**: `aymenpro124@gmail.com` / `777146387`\n- **سائق تجريبي**: `+967771234567` / `password123`\n\n### نظام الـ 4 نقرات:\n1. انقر على شعار \"السريع ون\" 4 مرات متتالية\n2. ستظهر أزرار لوحة التحكم وتطبيق السائق\n3. اختر النوع المناسب وسجل الدخول\n\n### الدعم الفني:\n- جميع الميزات تعمل بشكل كامل\n- قاعدة البيانات متصلة ومُعدة\n- نظام المصادقة آمن ومُختبر\n- واجهات المستخدم جاهزة للاستخدام","size_bytes":14499},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\nimport dotenv from \"dotenv\";\ndotenv.config();\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, تأكد من إعداد قاعدة البيانات\");\n}\n\nexport default defineConfig({\n  schema: \"./shared/schema.ts\",  // ملف الـ schema\n  out: \"./drizzle\",              // مجلد الميجريشن\n   dialect: \"postgresql\",          // نوع قاعدة البيانات\n  dbCredentials: {\n    url: process.env.DATABASE_URL!,\n  },\n});\n","size_bytes":504},"netlify.toml":{"content":"[build]\n  publish = \"dist\"\n  command = \"npm run build\"\n\n[build.environment]\n  # متغيرات البيئة العامة\n  NODE_VERSION = \"20\"\n\n# إعدادات إعادة التوجيه للتطبيقات المتعددة\n[[redirects]]\n  from = \"/admin/*\"\n  to = \"/admin/index.html\"\n  status = 200\n\n[[redirects]]\n  from = \"/delivery/*\"\n  to = \"/delivery/index.html\"\n  status = 200\n\n[[redirects]]\n  from = \"/*\"\n  to = \"/index.html\"\n  status = 200","size_bytes":446},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"render.yaml":{"content":"services:\n  - type: web\n    name: saree-one-app\n    env: node\n    plan: free\n    buildCommand: npm install && npm run build\n    startCommand: npm start\n    envVars:\n      - key: NODE_ENV\n        value: production\n      - key: DATABASE_URL\n        fromDatabase:\n          name: saree-one-db\n          property: connectionString\n      - key: SESSION_SECRET\n        generateValue: true\n      - key: PORT\n        value: 10000\n\ndatabases:\n  - name: saree-one-db\n    plan: free","size_bytes":471},"replit.md":{"content":"# Overview\n\nThe project is a comprehensive Arabic food delivery system called \"السريع ون\" (Sarie One) built with modern web technologies. It consists of three main applications: a customer-facing app for ordering food, an admin dashboard for system management, and a driver app for delivery management. The system supports Arabic language with RTL (right-to-left) text direction and includes features like real-time order tracking, restaurant management, special offers, and payment processing.\n\n# User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n# System Architecture\n\n## Frontend Architecture\n- **React 18** with TypeScript for type safety and modern development\n- **Vite** as the build tool and development server for fast development\n- **Tailwind CSS** for responsive, utility-first styling with Arabic RTL support\n- **Wouter** for client-side routing instead of React Router for smaller bundle size\n- **TanStack Query** for efficient server state management and caching\n- **Radix UI** components for accessible and customizable UI elements\n\n## Backend Architecture\n- **Express.js** server with TypeScript for API endpoints\n- **PostgreSQL** as the primary database with Drizzle ORM for type-safe database operations\n- **bcrypt** for password hashing and authentication security\n- **Session-based authentication** with JWT tokens for admin and driver access\n- **RESTful API design** with standardized error handling and response formats\n\n## Data Storage Design\nThe database schema includes:\n- **Users and Addresses**: Customer account management with multiple delivery addresses\n- **Restaurants and Categories**: Restaurant listings with categorization and operational hours\n- **Menu Items**: Product catalog with pricing, availability, and special offers\n- **Orders**: Complete order lifecycle tracking with status updates\n- **Admin Users**: Separate authentication system for administrators and drivers\n- **UI Settings**: Dynamic configuration for feature toggles and interface customization\n\n## Authentication and Authorization\n- **Multi-tier authentication**: Separate login systems for customers, drivers, and administrators\n- **Role-based access control**: Different permissions for admin vs driver accounts\n- **Session management**: Secure token-based sessions with expiration handling\n- **Password security**: Encrypted password storage with bcrypt hashing\n\n## Key Design Patterns\n- **Context API**: React contexts for global state management (Cart, Auth, Theme, Location)\n- **Custom hooks**: Reusable logic encapsulation for common operations\n- **Component composition**: Modular UI components with clear separation of concerns\n- **Repository pattern**: Database abstraction layer with unified interface\n- **Error boundary handling**: Graceful error handling with user-friendly messages\n\n# External Dependencies\n\n## Database Services\n- **PostgreSQL**: Primary database hosted on Render with connection pooling\n- **Drizzle ORM**: Type-safe database operations with migration support\n\n## Development and Build Tools\n- **Vite**: Development server and build tool with HMR\n- **TypeScript**: Static type checking for both frontend and backend\n- **ESBuild**: Fast JavaScript bundling for production builds\n\n## UI and Styling\n- **Tailwind CSS**: Utility-first CSS framework with custom Arabic configuration\n- **Radix UI**: Headless component library for accessibility\n- **Lucide React**: Icon library for consistent iconography\n- **Google Fonts**: Arabic font support (Noto Sans Arabic)\n\n## State Management and Data Fetching\n- **TanStack Query**: Server state management with caching and synchronization\n- **React Context**: Client-side state management for cart, authentication, and settings\n\n## Authentication and Security\n- **bcrypt**: Password hashing for secure authentication\n- **crypto**: UUID generation and session token creation\n- **CORS**: Cross-origin resource sharing configuration\n\n## Geolocation Services\n- **Browser Geolocation API**: User location detection for delivery services\n- **Location permissions**: Graceful handling of location access requests\n\n## Production and Deployment\n- **Node.js**: Server runtime environment\n- **Express.js**: Web application framework\n- **Environment variables**: Configuration management for database URLs and secrets\n- **Session management**: Secure session storage and validation","size_bytes":4376},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \"var(--radius)\",\n        md: \"calc(var(--radius) - 2px)\",\n        sm: \"calc(var(--radius) - 4px)\",\n      },\n      colors: {\n        background: \"var(--background)\",\n        foreground: \"var(--foreground)\",\n        card: {\n          DEFAULT: \"var(--card)\",\n          foreground: \"var(--card-foreground)\",\n        },\n        popover: {\n          DEFAULT: \"var(--popover)\",\n          foreground: \"var(--popover-foreground)\",\n        },\n        primary: {\n          DEFAULT: \"var(--primary)\",\n          foreground: \"var(--primary-foreground)\",\n        },\n        secondary: {\n          DEFAULT: \"var(--secondary)\",\n          foreground: \"var(--secondary-foreground)\",\n        },\n        muted: {\n          DEFAULT: \"var(--muted)\",\n          foreground: \"var(--muted-foreground)\",\n        },\n        accent: {\n          DEFAULT: \"var(--accent)\",\n          foreground: \"var(--accent-foreground)\",\n        },\n        destructive: {\n          DEFAULT: \"var(--destructive)\",\n          foreground: \"var(--destructive-foreground)\",\n        },\n        border: \"var(--border)\",\n        input: \"var(--input)\",\n        ring: \"var(--ring)\",\n        chart: {\n          \"1\": \"var(--chart-1)\",\n          \"2\": \"var(--chart-2)\",\n          \"3\": \"var(--chart-3)\",\n          \"4\": \"var(--chart-4)\",\n          \"5\": \"var(--chart-5)\",\n        },\n        sidebar: {\n          DEFAULT: \"var(--sidebar)\",\n          foreground: \"var(--sidebar-foreground)\",\n          primary: \"var(--sidebar-primary)\",\n          \"primary-foreground\": \"var(--sidebar-primary-foreground)\",\n          accent: \"var(--sidebar-accent)\",\n          \"accent-foreground\": \"var(--sidebar-accent-foreground)\",\n          border: \"var(--sidebar-border)\",\n          ring: \"var(--sidebar-ring)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"var(--font-sans)\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n        arabic: [\"Noto Sans Arabic\", \"Inter\", \"sans-serif\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: {\n            height: \"0\",\n          },\n          to: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n        },\n        \"accordion-up\": {\n          from: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n          to: {\n            height: \"0\",\n          },\n        },\n        fadeIn: {\n          from: {\n            opacity: \"0\",\n            transform: \"translateY(10px)\",\n          },\n          to: {\n            opacity: \"1\",\n            transform: \"translateY(0)\",\n          },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n        \"fade-in\": \"fadeIn 0.3s ease-in\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":3082},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":971},"client/tailwind.config.js":{"content":"/** @type {import('tailwindcss').Config} */\nexport default {\n  darkMode: [\"class\"],\n  content: [\n    './pages/**/*.{ts,tsx}',\n    './components/**/*.{ts,tsx}',\n    './app/**/*.{ts,tsx}',\n    './src/**/*.{ts,tsx}',\n  ],\n  prefix: \"\",\n  theme: {\n    container: {\n      center: true,\n      padding: \"2rem\",\n      screens: {\n        \"2xl\": \"1400px\",\n      },\n    },\n    extend: {\n      fontFamily: {\n        arabic: ['Noto Sans Arabic', 'Inter', 'sans-serif'],\n      },\n      colors: {\n        border: \"hsl(var(--border))\",\n        input: \"hsl(var(--input))\",\n        ring: \"hsl(var(--ring))\",\n        background: \"hsl(var(--background))\",\n        foreground: \"hsl(var(--foreground))\",\n        primary: {\n          DEFAULT: \"hsl(var(--primary))\",\n          foreground: \"hsl(var(--primary-foreground))\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary))\",\n          foreground: \"hsl(var(--secondary-foreground))\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive))\",\n          foreground: \"hsl(var(--destructive-foreground))\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted))\",\n          foreground: \"hsl(var(--muted-foreground))\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent))\",\n          foreground: \"hsl(var(--accent-foreground))\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover))\",\n          foreground: \"hsl(var(--popover-foreground))\",\n        },\n        card: {\n          DEFAULT: \"hsl(var(--card))\",\n          foreground: \"hsl(var(--card-foreground))\",\n        },\n      },\n      borderRadius: {\n        lg: \"var(--radius)\",\n        md: \"calc(var(--radius) - 2px)\",\n        sm: \"calc(var(--radius) - 4px)\",\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n        \"caret-blink\": {\n          \"0%,70%,100%\": { opacity: \"1\" },\n          \"20%,50%\": { opacity: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n        \"caret-blink\": \"caret-blink 1.25s ease-out infinite\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\")],\n}","size_bytes":2411},"client/vite.config.ts":{"content":"import { defineConfig } from 'vite';\nimport react from '@vitejs/plugin-react';\nimport path from 'path';\n\nexport default defineConfig({\n  plugins: [react()],\n  resolve: {\n    alias: {\n      '@': path.resolve(__dirname, './src'),\n      '@shared': path.resolve(__dirname, '../shared'),\n    },\n  },\n  server: {\n    proxy: {\n      '/api': {\n        target: 'http://localhost:5000',\n        changeOrigin: true,\n      },\n    },\n  },\n  build: {\n    outDir: '../dist/public',\n    emptyOutDir: true,\n  },\n});","size_bytes":498},"server/auth.ts":{"content":"import bcrypt from 'bcrypt'; // تم التعديل هنا\nimport { randomUUID } from 'crypto';\nimport { dbStorage } from './db';\nimport { type InsertAdminUser, type InsertAdminSession } from '@shared/schema';\n\nexport class AuthService {\n  async hashPassword(password: string): Promise<string> {\n    return bcrypt.hash(password, 10);\n  }\n  async verifyPassword(password: string, hashedPassword: string): Promise<boolean> {\n    return bcrypt.compare(password, hashedPassword);\n  }\n  async loginAdmin(email: string, password: string): Promise<{ success: boolean; token?: string; userType?: string; message?: string }> {\n    try {\n      const admin = await dbStorage.getAdminByEmail(email);\n      if (!admin) return { success: false, message: 'البريد الإلكتروني أو كلمة المرور غير صحيحة' };\n      if (!admin.isActive) return { success: false, message: 'الحساب غير مفعل' };\n      const isPasswordValid = await this.verifyPassword(password, admin.password);\n      if (!isPasswordValid) return { success: false, message: 'البريد الإلكتروني أو كلمة المرور غير صحيحة' };\n      const token = randomUUID();\n      const expiresAt = new Date();\n      expiresAt.setHours(expiresAt.getHours() + 24);\n      const sessionData: InsertAdminSession = {\n        adminId: admin.id,\n        token,\n        userType: admin.userType,\n        expiresAt\n      };\n      await dbStorage.createAdminSession(sessionData);\n      return { success: true, token, userType: admin.userType };\n    } catch (error) {\n      console.error('خطأ في تسجيل الدخول:', error);\n      return { success: false, message: 'حدث خطأ في الخادم' };\n    }\n  }\n  async validateSession(token: string): Promise<{ valid: boolean; userType?: string; adminId?: string }> {\n    try {\n      const session = await dbStorage.getAdminSession(token);\n      if (!session) return { valid: false };\n      if (new Date() > session.expiresAt) {\n        await dbStorage.deleteAdminSession(token);\n        return { valid: false };\n      }\n      return { valid: true, userType: session.userType, adminId: session.adminId || undefined };\n    } catch (error) {\n      console.error('خطأ في التحقق من الجلسة:', error);\n      return { valid: false };\n    }\n  }\n  async logout(token: string): Promise<boolean> {\n    try {\n      return await dbStorage.deleteAdminSession(token);\n    } catch (error) {\n      console.error('خطأ في تسجيل الخروج:', error);\n      return false;\n    }\n  }\n  async createDefaultAdmin(): Promise<void> {\n    try {\n      const existingAdmin = await dbStorage.getAdminByEmail('admin@alsarie-one.com');\n      if (!existingAdmin) {\n        const adminPassword = process.env.DEFAULT_ADMIN_PASSWORD || 'admin123456';\n        const hashedPassword = await this.hashPassword(adminPassword);\n        const defaultAdmin: InsertAdminUser = {\n          name: 'مدير النظام',\n          email: 'admin@alsarie-one.com',\n          password: hashedPassword,\n          userType: 'admin'\n        };\n        await dbStorage.createAdminUser(defaultAdmin);\n        console.log('تم إنشاء المدير الافتراضي بنجاح');\n      }\n    } catch (error) {\n      console.error('خطأ في إنشاء المدير الافتراضي:', error);\n    }\n  }\n}\nexport const authService = new AuthService();","size_bytes":3392},"server/db.ts":{"content":"import { drizzle } from \"drizzle-orm/neon-http\";\r\nimport { neon } from \"@neondatabase/serverless\";\r\nimport * as schema from \"../shared/schema.js\";\r\nimport dotenv from \"dotenv\";\r\n\r\ndotenv.config();\r\n\r\nif (!process.env.DATABASE_URL) {\r\n  throw new Error(\"DATABASE_URL غير محدد في متغيرات البيئة\");\r\n}\r\n\r\n// إنشاء اتصال قاعدة البيانات\r\nconst sql = neon(process.env.DATABASE_URL);\r\nexport const db = drizzle(sql, { schema });\r\n\r\n// دالة تهيئة قاعدة البيانات\r\nexport async function initializeDatabase() {\r\n  try {\r\n    console.log(\"🔄 جاري تهيئة قاعدة البيانات...\");\r\n    \r\n    // إنشاء مدير النظام الافتراضي\r\n    const existingAdmin = await db.query.adminUsers.findFirst({\r\n      where: (users, { eq }) => eq(users.email, \"aymenpro124@gmail.com\")\r\n    });\r\n\r\n    if (!existingAdmin) {\r\n      await db.insert(schema.adminUsers).values({\r\n        email: \"aymenpro124@gmail.com\",\r\n        password: \"777146387\", // في الإنتاج يجب تشفير كلمة المرور\r\n        name: \"مدير النظام\",\r\n        userType: \"admin\",\r\n        isActive: true,\r\n      });\r\n      console.log(\"✅ تم إنشاء مدير النظام الافتراضي\");\r\n    }\r\n\r\n    // إنشاء سائق تجريبي\r\n    const existingDriver = await db.query.adminUsers.findFirst({\r\n      where: (users, { eq }) => eq(users.phone, \"+967771234567\")\r\n    });\r\n\r\n    if (!existingDriver) {\r\n      await db.insert(schema.adminUsers).values({\r\n        phone: \"+967771234567\",\r\n        password: \"password123\",\r\n        name: \"سائق تجريبي\",\r\n        userType: \"driver\",\r\n        isActive: true,\r\n      });\r\n      console.log(\"✅ تم إنشاء السائق التجريبي\");\r\n    }\r\n\r\n    // إنشاء التصنيفات الافتراضية\r\n    const existingCategories = await db.query.categories.findMany();\r\n    \r\n    if (existingCategories.length === 0) {\r\n      const defaultCategories = [\r\n        {\r\n          name: \"المطاعم\",\r\n          nameEn: \"Restaurants\",\r\n          description: \"مطاعم متنوعة\",\r\n          icon: \"🍽️\",\r\n          color: \"#FF6B35\"\r\n        },\r\n        {\r\n          name: \"الحلويات\",\r\n          nameEn: \"Sweets\",\r\n          description: \"حلويات ومعجنات\",\r\n          icon: \"🧁\",\r\n          color: \"#FF6B35\"\r\n        },\r\n        {\r\n          name: \"اللحوم\",\r\n          nameEn: \"Meat\",\r\n          description: \"لحوم طازجة\",\r\n          icon: \"🥩\",\r\n          color: \"#FF6B35\"\r\n        },\r\n        {\r\n          name: \"كل التصنيفات\",\r\n          nameEn: \"All Categories\",\r\n          description: \"جميع التصنيفات\",\r\n          icon: \"📋\",\r\n          color: \"#FF6B35\"\r\n        }\r\n      ];\r\n\r\n      await db.insert(schema.categories).values(defaultCategories);\r\n      console.log(\"✅ تم إنشاء التصنيفات الافتراضية\");\r\n    }\r\n\r\n    // إنشاء أقسام المطاعم الافتراضية\r\n    const existingSections = await db.query.restaurantSections.findMany();\r\n    \r\n    if (existingSections.length === 0) {\r\n      const defaultSections = [\r\n        { name: \"المضغوط\", nameEn: \"Grilled\", icon: \"🔥\" },\r\n        { name: \"البروست\", nameEn: \"Fried Chicken\", icon: \"🍗\" },\r\n        { name: \"المشروبات\", nameEn: \"Beverages\", icon: \"🥤\" },\r\n        { name: \"السلطات\", nameEn: \"Salads\", icon: \"🥗\" },\r\n        { name: \"الحلويات\", nameEn: \"Desserts\", icon: \"🍰\" },\r\n        { name: \"المقبلات\", nameEn: \"Appetizers\", icon: \"🥙\" }\r\n      ];\r\n\r\n      await db.insert(schema.restaurantSections).values(defaultSections);\r\n      console.log(\"✅ تم إنشاء أقسام المطاعم الافتراضية\");\r\n    }\r\n\r\n    // إعدادات النظام الافتراضية\r\n    const existingSettings = await db.query.systemSettings.findMany();\r\n    \r\n    if (existingSettings.length === 0) {\r\n      const defaultSettings = [\r\n        {\r\n          key: \"app_name\",\r\n          value: \"السريع ون\",\r\n          description: \"اسم التطبيق\",\r\n          category: \"general\",\r\n          isPublic: true\r\n        },\r\n        {\r\n          key: \"currency\",\r\n          value: \"YER\",\r\n          description: \"العملة المستخدمة\",\r\n          category: \"general\",\r\n          isPublic: true\r\n        },\r\n        {\r\n          key: \"delivery_fee\",\r\n          value: 500,\r\n          description: \"رسوم التوصيل الافتراضية\",\r\n          category: \"delivery\",\r\n          isPublic: true\r\n        },\r\n        {\r\n          key: \"minimum_order\",\r\n          value: 1000,\r\n          description: \"الحد الأدنى للطلب\",\r\n          category: \"orders\",\r\n          isPublic: true\r\n        },\r\n        {\r\n          key: \"service_fee_percentage\",\r\n          value: 5,\r\n          description: \"نسبة رسوم الخدمة\",\r\n          category: \"fees\",\r\n          isPublic: false\r\n        }\r\n      ];\r\n\r\n      await db.insert(schema.systemSettings).values(defaultSettings);\r\n      console.log(\"✅ تم إنشاء إعدادات النظام الافتراضية\");\r\n    }\r\n\r\n    console.log(\"✅ تم تهيئة قاعدة البيانات بنجاح\");\r\n    \r\n  } catch (error) {\r\n    console.error(\"❌ خطأ في تهيئة قاعدة البيانات:\", error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n// تشغيل التهيئة عند بدء التطبيق\r\ninitializeDatabase().catch(console.error);","size_bytes":5533},"server/index.ts":{"content":"import express from \"express\";\nimport { createServer } from \"http\";\nimport path from \"path\";\nimport { fileURLToPath } from \"url\";\nimport dotenv from \"dotenv\";\nimport { db } from \"./db.js\";\nimport { adminRoutes } from \"./routes/admin.js\";\nimport { customerRoutes } from \"./routes/customer.js\";\nimport { driverRoutes } from \"./routes/driver.js\";\nimport { publicRoutes } from \"./routes/public.js\";\nimport { setupVite, serveStatic } from \"./vite.js\";\n\ndotenv.config();\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\nconst app = express();\nconst server = createServer(app);\n\n// Middleware\napp.use(express.json({ limit: '10mb' }));\napp.use(express.urlencoded({ extended: true, limit: '10mb' }));\n\n// إعداد CORS\napp.use((req, res, next) => {\n  res.header('Access-Control-Allow-Origin', '*');\n  res.header('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS');\n  res.header('Access-Control-Allow-Headers', 'Origin, X-Requested-With, Content-Type, Accept, Authorization');\n  \n  if (req.method === 'OPTIONS') {\n    res.sendStatus(200);\n  } else {\n    next();\n  }\n});\n\n// API Routes\napp.use('/api/admin', adminRoutes);\napp.use('/api/customer', customerRoutes);\napp.use('/api/driver', driverRoutes);\napp.use('/api', publicRoutes);\n\n// إعداد Vite أو الملفات الثابتة\nif (process.env.NODE_ENV === \"development\") {\n  await setupVite(app, server);\n} else {\n  serveStatic(app);\n}\n\nconst PORT = process.env.PORT || 5000;\n\nserver.listen(PORT, () => {\n  console.log(`🚀 الخادم يعمل على المنفذ ${PORT}`);\n  console.log(`📱 تطبيق العملاء: http://localhost:${PORT}`);\n  console.log(`🏢 لوحة التحكم: http://localhost:${PORT}/admin`);\n  console.log(`🚚 تطبيق السائقين: http://localhost:${PORT}/delivery`);\n});\n\n// معالجة الأخطاء\nprocess.on('uncaughtException', (error) => {\n  console.error('خطأ غير معالج:', error);\n});\n\nprocess.on('unhandledRejection', (reason, promise) => {\n  console.error('رفض غير معالج في:', promise, 'السبب:', reason);\n});","size_bytes":2112},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { dbStorage } from \"./db\";\nimport { authService } from \"./auth\";\nimport { \n  insertRestaurantSchema, \n  insertMenuItemSchema, \n  insertOrderSchema, \n  insertDriverSchema, \n  insertCategorySchema, \n  insertSpecialOfferSchema,\n  insertUiSettingsSchema\n} from \"@shared/schema\";\nimport { randomUUID } from \"crypto\";\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  \n  // Initialize default admin user on startup\n  await authService.createDefaultAdmin();\n  \n  // Admin Authentication Routes\n  app.post(\"/api/admin/login\", async (req, res) => {\n    try {\n      const { email, password } = req.body;\n      \n      if (!email || !password) {\n        return res.status(400).json({ message: \"البريد الإلكتروني وكلمة المرور مطلوبان\" });\n      }\n\n      // Use AuthService for login\n      const loginResult = await authService.loginAdmin(email, password);\n      \n      if (loginResult.success) {\n        res.json({\n          success: true,\n          token: loginResult.token,\n          userType: loginResult.userType,\n          message: \"تم تسجيل الدخول بنجاح\"\n        });\n      } else {\n        res.status(401).json({ message: loginResult.message });\n      }\n    } catch (error) {\n      console.error('خطأ في تسجيل الدخول:', error);\n      res.status(500).json({ message: \"خطأ في الخادم\" });\n    }\n  });\n\n  app.post(\"/api/admin/logout\", async (req, res) => {\n    try {\n      const { token } = req.body;\n      if (token) {\n        await dbStorage.deleteAdminSession(token);\n      }\n      res.json({ message: \"تم تسجيل الخروج بنجاح\" });\n    } catch (error) {\n      res.status(500).json({ message: \"خطأ في الخادم\" });\n    }\n  });\n\n  app.get(\"/api/admin/verify\", async (req, res) => {\n    try {\n      const token = req.headers.authorization?.replace(\"Bearer \", \"\");\n      \n      if (!token) {\n        return res.status(401).json({ message: \"رمز التحقق مطلوب\" });\n      }\n\n      const validation = await authService.validateSession(token);\n      \n      if (validation.valid) {\n        res.json({\n          valid: true,\n          userType: validation.userType,\n          adminId: validation.adminId\n        });\n      } else {\n        res.status(401).json({ message: \"انتهت صلاحية الجلسة\" });\n      }\n    } catch (error) {\n      console.error('خطأ في التحقق:', error);\n      res.status(500).json({ message: \"خطأ في الخادم\" });\n    }\n  });\n\n  // Categories\n  app.get(\"/api/categories\", async (req, res) => {\n    try {\n      const categories = await dbStorage.getCategories();\n      res.json(categories);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch categories\" });\n    }\n  });\n\n  app.post(\"/api/categories\", async (req, res) => {\n    try {\n      const validatedData = insertCategorySchema.parse(req.body);\n      const category = await dbStorage.createCategory(validatedData);\n      res.status(201).json(category);\n    } catch (error) {\n      res.status(400).json({ message: \"Invalid category data\" });\n    }\n  });\n\n  app.put(\"/api/categories/:id\", async (req, res) => {\n    try {\n      const { id } = req.params;\n      const validatedData = insertCategorySchema.partial().parse(req.body);\n      const category = await dbStorage.updateCategory(id, validatedData);\n      if (!category) {\n        return res.status(404).json({ message: \"Category not found\" });\n      }\n      res.json(category);\n    } catch (error) {\n      res.status(400).json({ message: \"Invalid category data\" });\n    }\n  });\n\n  app.delete(\"/api/categories/:id\", async (req, res) => {\n    try {\n      const { id } = req.params;\n      const success = await dbStorage.deleteCategory(id);\n      if (!success) {\n        return res.status(404).json({ message: \"Category not found\" });\n      }\n      res.status(204).send();\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to delete category\" });\n    }\n  });\n\n  // Restaurants\n  app.get(\"/api/restaurants\", async (req, res) => {\n    try {\n      const { categoryId } = req.query;\n      let restaurants;\n      \n      if (categoryId) {\n        restaurants = await dbStorage.getRestaurantsByCategory(categoryId as string);\n      } else {\n        restaurants = await dbStorage.getRestaurants();\n      }\n      \n      res.json(restaurants);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch restaurants\" });\n    }\n  });\n\n  app.get(\"/api/restaurants/:id\", async (req, res) => {\n    try {\n      const { id } = req.params;\n      const restaurant = await dbStorage.getRestaurant(id);\n      if (!restaurant) {\n        return res.status(404).json({ message: \"Restaurant not found\" });\n      }\n      res.json(restaurant);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch restaurant\" });\n    }\n  });\n\n  app.post(\"/api/restaurants\", async (req, res) => {\n    try {\n      const validatedData = insertRestaurantSchema.parse(req.body);\n      const restaurant = await dbStorage.createRestaurant(validatedData);\n      res.status(201).json(restaurant);\n    } catch (error) {\n      res.status(400).json({ message: \"Invalid restaurant data\" });\n    }\n  });\n\n  app.put(\"/api/restaurants/:id\", async (req, res) => {\n    try {\n      const { id } = req.params;\n      const validatedData = insertRestaurantSchema.partial().parse(req.body);\n      const restaurant = await dbStorage.updateRestaurant(id, validatedData);\n      if (!restaurant) {\n        return res.status(404).json({ message: \"Restaurant not found\" });\n      }\n      res.json(restaurant);\n    } catch (error) {\n      res.status(400).json({ message: \"Invalid restaurant data\" });\n    }\n  });\n\n  app.delete(\"/api/restaurants/:id\", async (req, res) => {\n    try {\n      const { id } = req.params;\n      const success = await dbStorage.deleteRestaurant(id);\n      if (!success) {\n        return res.status(404).json({ message: \"Restaurant not found\" });\n      }\n      res.status(204).send();\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to delete restaurant\" });\n    }\n  });\n\n  // Menu Items\n  app.get(\"/api/restaurants/:restaurantId/menu\", async (req, res) => {\n    try {\n      const { restaurantId } = req.params;\n      const menuItems = await dbStorage.getMenuItems(restaurantId);\n      res.json(menuItems);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch menu items\" });\n    }\n  });\n\n  app.post(\"/api/menu-items\", async (req, res) => {\n    try {\n      const validatedData = insertMenuItemSchema.parse(req.body);\n      const menuItem = await dbStorage.createMenuItem(validatedData);\n      res.status(201).json(menuItem);\n    } catch (error) {\n      res.status(400).json({ message: \"Invalid menu item data\" });\n    }\n  });\n\n  app.put(\"/api/menu-items/:id\", async (req, res) => {\n    try {\n      const { id } = req.params;\n      const validatedData = insertMenuItemSchema.partial().parse(req.body);\n      const menuItem = await dbStorage.updateMenuItem(id, validatedData);\n      if (!menuItem) {\n        return res.status(404).json({ message: \"Menu item not found\" });\n      }\n      res.json(menuItem);\n    } catch (error) {\n      res.status(400).json({ message: \"Invalid menu item data\" });\n    }\n  });\n\n  app.delete(\"/api/menu-items/:id\", async (req, res) => {\n    try {\n      const { id } = req.params;\n      const success = await dbStorage.deleteMenuItem(id);\n      if (!success) {\n        return res.status(404).json({ message: \"Menu item not found\" });\n      }\n      res.status(204).send();\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to delete menu item\" });\n    }\n  });\n\n  // Orders\n  app.get(\"/api/orders\", async (req, res) => {\n    try {\n      const { restaurantId } = req.query;\n      let orders;\n      \n      if (restaurantId) {\n        orders = await dbStorage.getOrdersByRestaurant(restaurantId as string);\n      } else {\n        orders = await dbStorage.getOrders();\n      }\n      \n      res.json(orders);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch orders\" });\n    }\n  });\n\n  app.get(\"/api/orders/:id\", async (req, res) => {\n    try {\n      const { id } = req.params;\n      const order = await dbStorage.getOrder(id);\n      if (!order) {\n        return res.status(404).json({ message: \"Order not found\" });\n      }\n      res.json(order);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch order\" });\n    }\n  });\n\n  app.post(\"/api/orders\", async (req, res) => {\n    try {\n      const validatedData = insertOrderSchema.parse(req.body);\n      const order = await dbStorage.createOrder(validatedData);\n      res.status(201).json(order);\n    } catch (error) {\n      res.status(400).json({ message: \"Invalid order data\" });\n    }\n  });\n\n  app.put(\"/api/orders/:id\", async (req, res) => {\n    try {\n      const { id } = req.params;\n      const validatedData = insertOrderSchema.partial().parse(req.body);\n      const order = await dbStorage.updateOrder(id, validatedData);\n      if (!order) {\n        return res.status(404).json({ message: \"Order not found\" });\n      }\n      res.json(order);\n    } catch (error) {\n      res.status(400).json({ message: \"Invalid order data\" });\n    }\n  });\n\n  // Drivers\n  app.get(\"/api/drivers\", async (req, res) => {\n    try {\n      const { available } = req.query;\n      let drivers;\n      \n      if (available === 'true') {\n        drivers = await dbStorage.getAvailableDrivers();\n      } else {\n        drivers = await dbStorage.getDrivers();\n      }\n      \n      res.json(drivers);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch drivers\" });\n    }\n  });\n\n  app.get(\"/api/drivers/:id\", async (req, res) => {\n    try {\n      const { id } = req.params;\n      const driver = await dbStorage.getDriver(id);\n      if (!driver) {\n        return res.status(404).json({ message: \"Driver not found\" });\n      }\n      res.json(driver);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch driver\" });\n    }\n  });\n\n  app.post(\"/api/drivers\", async (req, res) => {\n    try {\n      const validatedData = insertDriverSchema.parse(req.body);\n      const driver = await dbStorage.createDriver(validatedData);\n      res.status(201).json(driver);\n    } catch (error) {\n      res.status(400).json({ message: \"Invalid driver data\" });\n    }\n  });\n\n  app.put(\"/api/drivers/:id\", async (req, res) => {\n    try {\n      const { id } = req.params;\n      const validatedData = insertDriverSchema.partial().parse(req.body);\n      const driver = await dbStorage.updateDriver(id, validatedData);\n      if (!driver) {\n        return res.status(404).json({ message: \"Driver not found\" });\n      }\n      res.json(driver);\n    } catch (error) {\n      res.status(400).json({ message: \"Invalid driver data\" });\n    }\n  });\n\n  app.delete(\"/api/drivers/:id\", async (req, res) => {\n    try {\n      const { id } = req.params;\n      const success = await dbStorage.deleteDriver(id);\n      if (!success) {\n        return res.status(404).json({ message: \"Driver not found\" });\n      }\n      res.status(204).send();\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to delete driver\" });\n    }\n  });\n\n  // Special Offers\n  app.get(\"/api/special-offers\", async (req, res) => {\n    try {\n      const { active } = req.query;\n      let offers;\n      \n      if (active === 'true') {\n        offers = await dbStorage.getActiveSpecialOffers();\n      } else {\n        offers = await dbStorage.getSpecialOffers();\n      }\n      \n      res.json(offers);\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to fetch special offers\" });\n    }\n  });\n\n  app.post(\"/api/special-offers\", async (req, res) => {\n    try {\n      const validatedData = insertSpecialOfferSchema.parse(req.body);\n      const offer = await dbStorage.createSpecialOffer(validatedData);\n      res.status(201).json(offer);\n    } catch (error) {\n      res.status(400).json({ message: \"Invalid special offer data\" });\n    }\n  });\n\n  app.put(\"/api/special-offers/:id\", async (req, res) => {\n    try {\n      const { id } = req.params;\n      const validatedData = insertSpecialOfferSchema.partial().parse(req.body);\n      const offer = await dbStorage.updateSpecialOffer(id, validatedData);\n      if (!offer) {\n        return res.status(404).json({ message: \"Special offer not found\" });\n      }\n      res.json(offer);\n    } catch (error) {\n      res.status(400).json({ message: \"Invalid special offer data\" });\n    }\n  });\n\n  app.delete(\"/api/special-offers/:id\", async (req, res) => {\n    try {\n      const { id } = req.params;\n      const success = await dbStorage.deleteSpecialOffer(id);\n      if (!success) {\n        return res.status(404).json({ message: \"Special offer not found\" });\n      }\n      res.status(204).send();\n    } catch (error) {\n      res.status(500).json({ message: \"Failed to delete special offer\" });\n    }\n  });\n\n  // UI Settings Routes\n  app.get(\"/api/ui-settings\", async (req, res) => {\n    try {\n      const settings = await dbStorage.getUiSettings();\n      res.json(settings);\n    } catch (error) {\n      console.error('خطأ في جلب إعدادات الواجهة:', error);\n      res.status(500).json({ message: \"Failed to fetch UI settings\" });\n    }\n  });\n\n  app.get(\"/api/ui-settings/:key\", async (req, res) => {\n    try {\n      const { key } = req.params;\n      const setting = await dbStorage.getUiSetting(key);\n      if (!setting) {\n        return res.status(404).json({ message: \"الإعداد غير موجود\" });\n      }\n      res.json(setting);\n    } catch (error) {\n      console.error('خطأ في جلب إعداد الواجهة:', error);\n      res.status(500).json({ message: \"Failed to fetch UI setting\" });\n    }\n  });\n\n  app.put(\"/api/ui-settings/:key\", async (req, res) => {\n    try {\n      const { key } = req.params;\n      const { value } = req.body;\n      \n      if (!value) {\n        return res.status(400).json({ message: \"قيمة الإعداد مطلوبة\" });\n      }\n\n      const updated = await dbStorage.updateUiSetting(key, value);\n      if (!updated) {\n        return res.status(404).json({ message: \"الإعداد غير موجود\" });\n      }\n      \n      res.json(updated);\n    } catch (error) {\n      console.error('خطأ في تحديث إعداد الواجهة:', error);\n      res.status(500).json({ message: \"Failed to update UI setting\" });\n    }\n  });\n\n  const httpServer = createServer(app);\n  return httpServer;\n}\n","size_bytes":14591},"server/storage.ts":{"content":"import { \r\n  type Category, type InsertCategory,\r\n  type Restaurant, type InsertRestaurant,\r\n  type MenuItem, type InsertMenuItem,\r\n  type Order, type InsertOrder,\r\n  type Driver, type InsertDriver,\r\n  type SpecialOffer, type InsertSpecialOffer,\r\n  type User, type InsertUser,\r\n  type UiSettings, type InsertUiSettings\r\n} from \"../shared/schema\";\r\nimport { randomUUID } from \"crypto\";\r\n\r\nexport interface IStorage {\r\n  // Users\r\n  getUser(id: string): Promise<User | undefined>;\r\n  getUserByUsername(username: string): Promise<User | undefined>;\r\n  createUser(user: InsertUser): Promise<User>;\r\n\r\n  // Categories\r\n  getCategories(): Promise<Category[]>;\r\n  createCategory(category: InsertCategory): Promise<Category>;\r\n  updateCategory(id: string, category: Partial<InsertCategory>): Promise<Category | undefined>;\r\n  deleteCategory(id: string): Promise<boolean>;\r\n\r\n  // Restaurants\r\n  getRestaurants(): Promise<Restaurant[]>;\r\n  getRestaurant(id: string): Promise<Restaurant | undefined>;\r\n  getRestaurantsByCategory(categoryId: string): Promise<Restaurant[]>;\r\n  createRestaurant(restaurant: InsertRestaurant): Promise<Restaurant>;\r\n  updateRestaurant(id: string, restaurant: Partial<InsertRestaurant>): Promise<Restaurant | undefined>;\r\n  deleteRestaurant(id: string): Promise<boolean>;\r\n\r\n  // Menu Items\r\n  getMenuItems(restaurantId: string): Promise<MenuItem[]>;\r\n  getMenuItem(id: string): Promise<MenuItem | undefined>;\r\n  createMenuItem(menuItem: InsertMenuItem): Promise<MenuItem>;\r\n  updateMenuItem(id: string, menuItem: Partial<InsertMenuItem>): Promise<MenuItem | undefined>;\r\n  deleteMenuItem(id: string): Promise<boolean>;\r\n\r\n  // Orders\r\n  getOrders(): Promise<Order[]>;\r\n  getOrder(id: string): Promise<Order | undefined>;\r\n  getOrdersByRestaurant(restaurantId: string): Promise<Order[]>;\r\n  createOrder(order: InsertOrder): Promise<Order>;\r\n  updateOrder(id: string, order: Partial<InsertOrder>): Promise<Order | undefined>;\r\n\r\n  // Drivers\r\n  getDrivers(): Promise<Driver[]>;\r\n  getDriver(id: string): Promise<Driver | undefined>;\r\n  getAvailableDrivers(): Promise<Driver[]>;\r\n  createDriver(driver: InsertDriver): Promise<Driver>;\r\n  updateDriver(id: string, driver: Partial<InsertDriver>): Promise<Driver | undefined>;\r\n  deleteDriver(id: string): Promise<boolean>;\r\n\r\n  // Special Offers\r\n  getSpecialOffers(): Promise<SpecialOffer[]>;\r\n  getActiveSpecialOffers(): Promise<SpecialOffer[]>;\r\n  createSpecialOffer(offer: InsertSpecialOffer): Promise<SpecialOffer>;\r\n  updateSpecialOffer(id: string, offer: Partial<InsertSpecialOffer>): Promise<SpecialOffer | undefined>;\r\n  deleteSpecialOffer(id: string): Promise<boolean>;\r\n\r\n  // UI Settings\r\n  getUiSettings?(): Promise<UiSettings[]>;\r\n  getUiSetting?(key: string): Promise<UiSettings | undefined>;\r\n  updateUiSetting?(key: string, value: string): Promise<UiSettings | undefined>;\r\n  createUiSetting?(setting: InsertUiSettings): Promise<UiSettings>;\r\n  deleteUiSetting?(key: string): Promise<boolean>;\r\n}\r\n\r\nexport class MemStorage implements IStorage {\r\n  private users: Map<string, User>;\r\n  private categories: Map<string, Category>;\r\n  private restaurants: Map<string, Restaurant>;\r\n  private menuItems: Map<string, MenuItem>;\r\n  private orders: Map<string, Order>;\r\n  private drivers: Map<string, Driver>;\r\n  private specialOffers: Map<string, SpecialOffer>;\r\n\r\n  constructor() {\r\n    this.users = new Map();\r\n    this.categories = new Map();\r\n    this.restaurants = new Map();\r\n    this.menuItems = new Map();\r\n    this.orders = new Map();\r\n    this.drivers = new Map();\r\n    this.specialOffers = new Map();\r\n    \r\n    this.initializeData();\r\n  }\r\n\r\n  private initializeData() {\r\n    // Initialize categories\r\n    const categories = [\r\n      { id: \"1\", name: \"مطاعم\", icon: \"fas fa-utensils\", isActive: true },\r\n      { id: \"2\", name: \"مقاهي\", icon: \"fas fa-coffee\", isActive: true },\r\n      { id: \"3\", name: \"حلويات\", icon: \"fas fa-candy-cane\", isActive: true },\r\n      { id: \"4\", name: \"سوبرماركت\", icon: \"fas fa-shopping-cart\", isActive: true },\r\n      { id: \"5\", name: \"صيدليات\", icon: \"fas fa-pills\", isActive: true },\r\n    ];\r\n\r\n    categories.forEach(cat => this.categories.set(cat.id, cat));\r\n\r\n    // Initialize restaurants\r\n const restaurants = [\r\n      {\r\n        id: \"1\",\r\n        name: \"مطعم الوزيكو للعربكة\",\r\n        description: \"مطعم يمني تقليدي متخصص في الأطباق الشعبية\",\r\n        image: \"https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=400\",\r\n        address: \"صنعاء، شارع الزبيري، بجانب مسجد النور\",\r\n        rating: \"4.8\",\r\n        reviewCount: 4891,\r\n        deliveryTime: \"40-60 دقيقة\",\r\n        isOpen: true,\r\n        minimumOrder: \"25\", // تغيير إلى string\r\n        deliveryFee: \"5\", // تغيير إلى string\r\n        categoryId: \"1\",\r\n        openingTime: \"08:00\",\r\n        closingTime: \"23:00\",\r\n        workingDays: \"0,1,2,3,4,5,6\",\r\n        isTemporarilyClosed: false,\r\n        temporaryCloseReason: null,\r\n        createdAt: new Date(),\r\n      },\r\n      {\r\n        id: \"2\",\r\n        name: \"حلويات الشام\",\r\n        description: \"أفضل الحلويات الشامية والعربية\",\r\n        image: \"https://images.unsplash.com/photo-1558618666-fcd25c85cd64?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=400\",\r\n        address: \"صنعاء، شارع الستين، مجمع التجاري\",\r\n        rating: \"4.6\",\r\n        reviewCount: 2341,\r\n        deliveryTime: \"30-45 دقيقة\",\r\n        isOpen: true,\r\n        minimumOrder: \"15\", // تغيير إلى string\r\n        deliveryFee: \"3\", // تغيير إلى string\r\n        categoryId: \"3\",\r\n        openingTime: \"08:00\",\r\n        closingTime: \"23:00\",\r\n        workingDays: \"0,1,2,3,4,5,6\",\r\n        isTemporarilyClosed: false,\r\n        temporaryCloseReason: null,\r\n        createdAt: new Date(),\r\n      },\r\n      {\r\n        id: \"3\",\r\n        name: \"مقهى العروبة\",\r\n        description: \"مقهى شعبي بالطابع العربي الأصيل\",\r\n        image: \"https://images.unsplash.com/photo-1442512595331-e89e73853f31?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&h=400\",\r\n        address: \"صنعاء، شارع السبعين، قرب دوار الأمم المتحدة\",\r\n        rating: \"4.5\",\r\n        reviewCount: 1876,\r\n        deliveryTime: \"يفتح في 8:00 ص\",\r\n        isOpen: false,\r\n        minimumOrder: \"20\", // تغيير إلى string\r\n        deliveryFee: \"4\", // تغيير إلى string\r\n        categoryId: \"2\",\r\n        openingTime: \"08:00\",\r\n        closingTime: \"23:00\",\r\n        workingDays: \"0,1,2,3,4,5,6\",\r\n        isTemporarilyClosed: false,\r\n        temporaryCloseReason: null,\r\n        createdAt: new Date(),\r\n      }\r\n    ];\r\n\r\n    restaurants.forEach(restaurant => this.restaurants.set(restaurant.id, restaurant));\r\n\r\n    // Initialize menu items\r\n   const menuItems = [\r\n      {\r\n        id: \"1\",\r\n        name: \"عربكة بالقشطة والعسل\",\r\n        description: \"حلوى يمنية تقليدية بالقشطة الطازجة والعسل الطبيعي\",\r\n        price: \"55\", // تغيير إلى string\r\n        image: \"https://images.unsplash.com/photo-1551024506-0bccd828d307?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=200\",\r\n        category: \"وجبات رمضان\",\r\n        isAvailable: true,\r\n        isSpecialOffer: false,\r\n        originalPrice: null,\r\n        restaurantId: \"1\",\r\n      },\r\n      {\r\n        id: \"2\",\r\n        name: \"معصوب بالقشطة والعسل\",\r\n        description: \"طبق يمني شعبي بالموز والقشطة والعسل\",\r\n        price: \"55\", // تغيير إلى string\r\n        image: \"https://images.unsplash.com/photo-1565299507177-b0ac66763828?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=200\",\r\n        category: \"وجبات رمضان\",\r\n        isAvailable: true,\r\n        isSpecialOffer: false,\r\n        originalPrice: null,\r\n        restaurantId: \"1\",\r\n      },\r\n      {\r\n        id: \"3\",\r\n        name: \"مياه معدنية 750 مل\",\r\n        description: \"مياه طبيعية معدنية عالية الجودة\",\r\n        price: \"3\", // تغيير إلى string\r\n        image: \"https://images.unsplash.com/photo-1559839734-2b71ea197ec2?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=200\",\r\n        category: \"المشروبات\",\r\n        isAvailable: true,\r\n        isSpecialOffer: false,\r\n        originalPrice: null,\r\n        restaurantId: \"1\",\r\n      },\r\n      {\r\n        id: \"4\",\r\n        name: \"كومبو عربكة خاص\",\r\n        description: \"عربكة + مطبق عادي + مشروب غازي\",\r\n        price: \"55\", // تغيير إلى string\r\n        originalPrice: \"60\", // تغيير إلى string\r\n        image: \"https://images.unsplash.com/photo-1565299507177-b0ac66763828?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&h=200\",\r\n        category: \"العروض\",\r\n        isAvailable: true,\r\n        isSpecialOffer: true,\r\n        restaurantId: \"1\",\r\n      }\r\n    ];\r\n\r\n    menuItems.forEach(item => this.menuItems.set(item.id, item));\r\n\r\n    // Initialize drivers\r\n    const drivers = [\r\n      {\r\n        id: \"1\",\r\n        name: \"أحمد محمد\",\r\n        phone: \"+967771234567\",\r\n        password: \"password123\",\r\n        isAvailable: true,\r\n        isActive: true,\r\n        currentLocation: \"صنعاء\",\r\n        earnings: \"2500\", // تغيير إلى string\r\n        createdAt: new Date(),\r\n      },\r\n      {\r\n        id: \"2\", \r\n        name: \"علي حسن\",\r\n        phone: \"+967779876543\",\r\n        password: \"password123\",\r\n        isAvailable: true,\r\n        isActive: true,\r\n        currentLocation: \"تعز\",\r\n        earnings: \"3200\", // تغيير إلى string\r\n        createdAt: new Date(),\r\n      }\r\n    ];\r\n    drivers.forEach(driver => this.drivers.set(driver.id, driver));\r\n  }\r\n\r\n  // Users\r\n  async getUser(id: string): Promise<User | undefined> {\r\n    return this.users.get(id);\r\n  }\r\n\r\n  async getUserByUsername(username: string): Promise<User | undefined> {\r\n    return Array.from(this.users.values()).find(user => user.username === username);\r\n  }\r\n\r\n  async createUser(insertUser: InsertUser): Promise<User> {\r\n    const id = randomUUID();\r\n    const user: User = { \r\n      ...insertUser, \r\n      id,\r\n      name: insertUser.username,\r\n      phone: null,\r\n      email: null,\r\n      address: null,\r\n      isActive: true,\r\n      createdAt: new Date()\r\n    };\r\n    this.users.set(id, user);\r\n    return user;\r\n  }\r\n\r\n  // Categories\r\n  async getCategories(): Promise<Category[]> {\r\n    return Array.from(this.categories.values());\r\n  }\r\n\r\n  async createCategory(category: InsertCategory): Promise<Category> {\r\n    const id = randomUUID();\r\n    const newCategory: Category = { \r\n      ...category, \r\n      id,\r\n      isActive: category.isActive ?? true \r\n    };\r\n    this.categories.set(id, newCategory);\r\n    return newCategory;\r\n  }\r\n\r\n  async updateCategory(id: string, category: Partial<InsertCategory>): Promise<Category | undefined> {\r\n    const existing = this.categories.get(id);\r\n    if (!existing) return undefined;\r\n    const updated = { ...existing, ...category };\r\n    this.categories.set(id, updated);\r\n    return updated;\r\n  }\r\n\r\n  async deleteCategory(id: string): Promise<boolean> {\r\n    return this.categories.delete(id);\r\n  }\r\n\r\n  // Restaurants\r\n  async getRestaurants(): Promise<Restaurant[]> {\r\n    return Array.from(this.restaurants.values());\r\n  }\r\n\r\n  async getRestaurant(id: string): Promise<Restaurant | undefined> {\r\n    return this.restaurants.get(id);\r\n  }\r\n\r\n  async getRestaurantsByCategory(categoryId: string): Promise<Restaurant[]> {\r\n    return Array.from(this.restaurants.values()).filter(r => r.categoryId === categoryId);\r\n  }\r\n\r\n  async createRestaurant(restaurant: InsertRestaurant): Promise<Restaurant> {\r\n  const id = randomUUID();\r\n  const newRestaurant: Restaurant = { \r\n    ...restaurant, \r\n    id, \r\n    createdAt: new Date(),\r\n    description: restaurant.description ?? null,\r\n    rating: restaurant.rating ?? \"0.0\",\r\n    reviewCount: restaurant.reviewCount ?? 0,\r\n    isOpen: restaurant.isOpen ?? true,\r\n    minimumOrder: restaurant.minimumOrder?.toString() ?? \"0\",\r\n    deliveryFee: restaurant.deliveryFee?.toString() ?? \"0\",\r\n    categoryId: restaurant.categoryId ?? null,\r\n    // معالجة الخصائص الجديدة لضمان عدم وجود undefined\r\n    openingTime: restaurant.openingTime ?? null,\r\n    closingTime: restaurant.closingTime ?? null,\r\n    workingDays: restaurant.workingDays ?? null,\r\n    isTemporarilyClosed: restaurant.isTemporarilyClosed ?? false,\r\n    temporaryCloseReason: restaurant.temporaryCloseReason ?? null\r\n  };\r\n  this.restaurants.set(id, newRestaurant);\r\n  return newRestaurant;\r\n}\r\nasync updateRestaurant(id: string, restaurant: Partial<InsertRestaurant>): Promise<Restaurant | undefined> {\r\n  const existing = this.restaurants.get(id);\r\n  if (!existing) return undefined;\r\n  \r\n  // معالجة الخصائص لتجنب undefined\r\n  const updates: Partial<Restaurant> = {};\r\n  \r\n  if (restaurant.openingTime !== undefined) updates.openingTime = restaurant.openingTime ?? null;\r\n  if (restaurant.closingTime !== undefined) updates.closingTime = restaurant.closingTime ?? null;\r\n  if (restaurant.workingDays !== undefined) updates.workingDays = restaurant.workingDays ?? null;\r\n  if (restaurant.isTemporarilyClosed !== undefined) updates.isTemporarilyClosed = restaurant.isTemporarilyClosed;\r\n  if (restaurant.temporaryCloseReason !== undefined) updates.temporaryCloseReason = restaurant.temporaryCloseReason ?? null;\r\n  \r\n  // الخصائص الأخرى\r\n  if (restaurant.name !== undefined) updates.name = restaurant.name;\r\n  if (restaurant.description !== undefined) updates.description = restaurant.description ?? null;\r\n  if (restaurant.image !== undefined) updates.image = restaurant.image;\r\n  if (restaurant.rating !== undefined) updates.rating = restaurant.rating ?? \"0.0\";\r\n  if (restaurant.reviewCount !== undefined) updates.reviewCount = restaurant.reviewCount ?? 0;\r\n  if (restaurant.deliveryTime !== undefined) updates.deliveryTime = restaurant.deliveryTime;\r\n  if (restaurant.isOpen !== undefined) updates.isOpen = restaurant.isOpen ?? true;\r\n  if (restaurant.minimumOrder !== undefined) updates.minimumOrder = restaurant.minimumOrder?.toString() ?? \"0\";\r\n  if (restaurant.deliveryFee !== undefined) updates.deliveryFee = restaurant.deliveryFee?.toString() ?? \"0\";\r\n  if (restaurant.categoryId !== undefined) updates.categoryId = restaurant.categoryId ?? null;\r\n  \r\n  const updated = { ...existing, ...updates };\r\n  this.restaurants.set(id, updated);\r\n  return updated;\r\n}\r\n\r\n  async deleteRestaurant(id: string): Promise<boolean> {\r\n    return this.restaurants.delete(id);\r\n  }\r\n\r\n  // Menu Items\r\n  async getMenuItems(restaurantId: string): Promise<MenuItem[]> {\r\n    return Array.from(this.menuItems.values()).filter(item => item.restaurantId === restaurantId);\r\n  }\r\n\r\n  async getMenuItem(id: string): Promise<MenuItem | undefined> {\r\n    return this.menuItems.get(id);\r\n  }\r\n\r\n  async createMenuItem(menuItem: InsertMenuItem): Promise<MenuItem> {\r\n    const id = randomUUID();\r\n    const newMenuItem: MenuItem = { \r\n      ...menuItem, \r\n      id,\r\n      description: menuItem.description ?? null,\r\n      isAvailable: menuItem.isAvailable ?? true,\r\n      isSpecialOffer: menuItem.isSpecialOffer ?? false,\r\n      originalPrice: menuItem.originalPrice ?? null,\r\n      restaurantId: menuItem.restaurantId ?? null\r\n    };\r\n    this.menuItems.set(id, newMenuItem);\r\n    return newMenuItem;\r\n  }\r\n\r\n  async updateMenuItem(id: string, menuItem: Partial<InsertMenuItem>): Promise<MenuItem | undefined> {\r\n    const existing = this.menuItems.get(id);\r\n    if (!existing) return undefined;\r\n    const updated = { ...existing, ...menuItem };\r\n    this.menuItems.set(id, updated);\r\n    return updated;\r\n  }\r\n\r\n  async deleteMenuItem(id: string): Promise<boolean> {\r\n    return this.menuItems.delete(id);\r\n  }\r\n\r\n  // Orders\r\n  async getOrders(): Promise<Order[]> {\r\n    return Array.from(this.orders.values());\r\n  }\r\n\r\n  async getOrder(id: string): Promise<Order | undefined> {\r\n    return this.orders.get(id);\r\n  }\r\n\r\n  async getOrdersByRestaurant(restaurantId: string): Promise<Order[]> {\r\n    return Array.from(this.orders.values()).filter(order => order.restaurantId === restaurantId);\r\n  }\r\n\r\n  async createOrder(order: InsertOrder): Promise<Order> {\r\n    const id = randomUUID();\r\n    const newOrder: Order = { \r\n      ...order, \r\n      id, \r\n      createdAt: new Date(),\r\n      customerEmail: order.customerEmail ?? null,\r\n      notes: order.notes ?? null,\r\n      status: order.status ?? \"pending\",\r\n      estimatedTime: order.estimatedTime ?? \"30-45 دقيقة\",\r\n      restaurantId: order.restaurantId ?? null,\r\n      driverId: order.driverId ?? null,\r\n      updatedAt: new Date()\r\n    };\r\n    this.orders.set(id, newOrder);\r\n    return newOrder;\r\n  }\r\n\r\n  async updateOrder(id: string, order: Partial<InsertOrder>): Promise<Order | undefined> {\r\n    const existing = this.orders.get(id);\r\n    if (!existing) return undefined;\r\n    const updated = { ...existing, ...order };\r\n    this.orders.set(id, updated);\r\n    return updated;\r\n  }\r\n\r\n  // Drivers\r\n  async getDrivers(): Promise<Driver[]> {\r\n    return Array.from(this.drivers.values());\r\n  }\r\n\r\n  async getDriver(id: string): Promise<Driver | undefined> {\r\n    return this.drivers.get(id);\r\n  }\r\n\r\n  async getAvailableDrivers(): Promise<Driver[]> {\r\n    return Array.from(this.drivers.values()).filter(driver => driver.isAvailable && driver.isActive);\r\n  }\r\n\r\n async createDriver(driver: InsertDriver): Promise<Driver> {\r\n    const id = randomUUID();\r\n    const newDriver: Driver = { \r\n      ...driver, \r\n      id, \r\n      createdAt: new Date(),\r\n      isActive: driver.isActive ?? true,\r\n      isAvailable: driver.isAvailable ?? true,\r\n      currentLocation: driver.currentLocation ?? null,\r\n      earnings: driver.earnings?.toString() ?? \"0\" // تحويل إلى string\r\n    };\r\n    this.drivers.set(id, newDriver);\r\n    return newDriver;\r\n  }\r\n\r\n  async updateDriver(id: string, driver: Partial<InsertDriver>): Promise<Driver | undefined> {\r\n    const existing = this.drivers.get(id);\r\n    if (!existing) return undefined;\r\n    const updated = { ...existing, ...driver };\r\n    this.drivers.set(id, updated);\r\n    return updated;\r\n  }\r\n\r\n  async deleteDriver(id: string): Promise<boolean> {\r\n    return this.drivers.delete(id);\r\n  }\r\n\r\n  // Special Offers\r\n  async getSpecialOffers(): Promise<SpecialOffer[]> {\r\n    return Array.from(this.specialOffers.values());\r\n  }\r\n\r\n  async getActiveSpecialOffers(): Promise<SpecialOffer[]> {\r\n    return Array.from(this.specialOffers.values()).filter(offer => offer.isActive);\r\n  }\r\n\r\n\r\n  async createSpecialOffer(offer: InsertSpecialOffer): Promise<SpecialOffer> {\r\n    const id = randomUUID();\r\n    const newOffer: SpecialOffer = { \r\n      ...offer, \r\n      id, \r\n      createdAt: new Date(),\r\n      isActive: offer.isActive ?? true,\r\n      minimumOrder: offer.minimumOrder?.toString() ?? \"0\", // تحويل إلى string\r\n      discountPercent: offer.discountPercent ?? null,\r\n      discountAmount: offer.discountAmount?.toString() ?? null, // تحويل إلى string\r\n      validUntil: offer.validUntil ?? null\r\n    };\r\n    this.specialOffers.set(id, newOffer);\r\n    return newOffer;\r\n  }\r\n\r\n  async updateSpecialOffer(id: string, offer: Partial<InsertSpecialOffer>): Promise<SpecialOffer | undefined> {\r\n    const existing = this.specialOffers.get(id);\r\n    if (!existing) return undefined;\r\n    const updated = { ...existing, ...offer };\r\n    this.specialOffers.set(id, updated);\r\n    return updated;\r\n  }\r\n\r\n  async deleteSpecialOffer(id: string): Promise<boolean> {\r\n    return this.specialOffers.delete(id);\r\n  }\r\n}\r\n\r\nimport { dbStorage } from './db';\r\nexport const storage = dbStorage;","size_bytes":19961},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer } from \"vite\";\nimport { type Server } from \"http\";\nimport { nanoid } from \"nanoid\";\n\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server?: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: server ? { server } : false,\n    host: \"0.0.0.0\",\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    configFile: false,\n    root: process.cwd(),\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  \n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        process.cwd(),\n        \"client\",\n        \"index.html\"\n      );\n\n      if (!fs.existsSync(clientTemplate)) {\n        return res.status(404).json({ message: \"Client template not found\" });\n      }\n\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`\n      );\n      \n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      if (vite.ssrFixStacktrace) {\n        vite.ssrFixStacktrace(e as Error);\n      }\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(process.cwd(), \"dist\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  app.use(\"*\", (_req: any, res: { sendFile: (arg0: any) => void; }) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}","size_bytes":2130},"shared/schema.ts":{"content":"import { pgTable, text, integer, boolean, timestamp, decimal, uuid, jsonb, varchar } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema, createSelectSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\n// جدول المديرين والسائقين\nexport const adminUsers = pgTable(\"admin_users\", {\n  id: uuid(\"id\").primaryKey().defaultRandom(),\n  email: text(\"email\").unique(),\n  phone: text(\"phone\").unique(),\n  password: text(\"password\").notNull(),\n  name: text(\"name\").notNull(),\n  userType: text(\"user_type\").notNull(), // 'admin' أو 'driver'\n  isActive: boolean(\"is_active\").default(true),\n  avatar: text(\"avatar\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// جدول جلسات المصادقة\nexport const adminSessions = pgTable(\"admin_sessions\", {\n  id: uuid(\"id\").primaryKey().defaultRandom(),\n  adminId: uuid(\"admin_id\").references(() => adminUsers.id),\n  token: text(\"token\").notNull().unique(),\n  userType: text(\"user_type\").notNull(),\n  expiresAt: timestamp(\"expires_at\").notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// جدول التصنيفات الرئيسية\nexport const categories = pgTable(\"categories\", {\n  id: uuid(\"id\").primaryKey().defaultRandom(),\n  name: text(\"name\").notNull(),\n  nameEn: text(\"name_en\"),\n  description: text(\"description\"),\n  icon: text(\"icon\"),\n  image: text(\"image\"),\n  color: text(\"color\").default(\"#FF6B35\"),\n  isActive: boolean(\"is_active\").default(true),\n  sortOrder: integer(\"sort_order\").default(0),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// جدول أقسام المطاعم/المحلات\nexport const restaurantSections = pgTable(\"restaurant_sections\", {\n  id: uuid(\"id\").primaryKey().defaultRandom(),\n  name: text(\"name\").notNull(),\n  nameEn: text(\"name_en\"),\n  description: text(\"description\"),\n  icon: text(\"icon\"),\n  isActive: boolean(\"is_active\").default(true),\n  sortOrder: integer(\"sort_order\").default(0),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// جدول المطاعم والمحلات\nexport const restaurants = pgTable(\"restaurants\", {\n  id: uuid(\"id\").primaryKey().defaultRandom(),\n  name: text(\"name\").notNull(),\n  nameEn: text(\"name_en\"),\n  description: text(\"description\"),\n  image: text(\"image\"),\n  logo: text(\"logo\"),\n  coverImage: text(\"cover_image\"),\n  categoryId: uuid(\"category_id\").references(() => categories.id),\n  phone: text(\"phone\"),\n  email: text(\"email\"),\n  address: text(\"address\"),\n  latitude: decimal(\"latitude\", { precision: 10, scale: 8 }),\n  longitude: decimal(\"longitude\", { precision: 11, scale: 8 }),\n  rating: decimal(\"rating\", { precision: 3, scale: 2 }).default(\"0\"),\n  reviewCount: integer(\"review_count\").default(0),\n  deliveryFee: decimal(\"delivery_fee\", { precision: 10, scale: 2 }).default(\"0\"),\n  minimumOrder: decimal(\"minimum_order\", { precision: 10, scale: 2 }).default(\"0\"),\n  deliveryTime: text(\"delivery_time\").default(\"30-45 دقيقة\"),\n  isActive: boolean(\"is_active\").default(true),\n  isOpen: boolean(\"is_open\").default(true),\n  openingTime: text(\"opening_time\").default(\"08:00\"),\n  closingTime: text(\"closing_time\").default(\"23:00\"),\n  workingDays: text(\"working_days\").default(\"0,1,2,3,4,5,6\"),\n  isTemporarilyClosed: boolean(\"is_temporarily_closed\").default(false),\n  temporaryCloseReason: text(\"temporary_close_reason\"),\n  openingHours: jsonb(\"opening_hours\"),\n  tags: jsonb(\"tags\"),\n  features: jsonb(\"features\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// جدول عناصر القائمة\nexport const menuItems = pgTable(\"menu_items\", {\n  id: uuid(\"id\").primaryKey().defaultRandom(),\n  restaurantId: uuid(\"restaurant_id\").references(() => restaurants.id),\n  sectionId: uuid(\"section_id\").references(() => restaurantSections.id),\n  name: text(\"name\").notNull(),\n  nameEn: text(\"name_en\"),\n  description: text(\"description\"),\n  image: text(\"image\"),\n  price: decimal(\"price\", { precision: 10, scale: 2 }).notNull(),\n  originalPrice: decimal(\"original_price\", { precision: 10, scale: 2 }),\n  category: text(\"category\").notNull(),\n  isAvailable: boolean(\"is_available\").default(true),\n  isSpecialOffer: boolean(\"is_special_offer\").default(false),\n  isPopular: boolean(\"is_popular\").default(false),\n  isFeatured: boolean(\"is_featured\").default(false),\n  preparationTime: integer(\"preparation_time\").default(15),\n  calories: integer(\"calories\"),\n  ingredients: jsonb(\"ingredients\"),\n  allergens: jsonb(\"allergens\"),\n  nutritionInfo: jsonb(\"nutrition_info\"),\n  variants: jsonb(\"variants\"),\n  addons: jsonb(\"addons\"),\n  tags: jsonb(\"tags\"),\n  sortOrder: integer(\"sort_order\").default(0),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// جدول العملاء\nexport const customers = pgTable(\"customers\", {\n  id: uuid(\"id\").primaryKey().defaultRandom(),\n  name: text(\"name\").notNull(),\n  phone: text(\"phone\").unique().notNull(),\n  email: text(\"email\").unique(),\n  avatar: text(\"avatar\"),\n  dateOfBirth: timestamp(\"date_of_birth\"),\n  gender: text(\"gender\"),\n  isActive: boolean(\"is_active\").default(true),\n  totalOrders: integer(\"total_orders\").default(0),\n  totalSpent: decimal(\"total_spent\", { precision: 12, scale: 2 }).default(\"0\"),\n  loyaltyPoints: integer(\"loyalty_points\").default(0),\n  preferredLanguage: text(\"preferred_language\").default(\"ar\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// جدول عناوين العملاء\nexport const customerAddresses = pgTable(\"customer_addresses\", {\n  id: uuid(\"id\").primaryKey().defaultRandom(),\n  customerId: uuid(\"customer_id\").references(() => customers.id),\n  title: text(\"title\").notNull(),\n  address: text(\"address\").notNull(),\n  building: text(\"building\"),\n  floor: text(\"floor\"),\n  apartment: text(\"apartment\"),\n  landmark: text(\"landmark\"),\n  latitude: decimal(\"latitude\", { precision: 10, scale: 8 }),\n  longitude: decimal(\"longitude\", { precision: 11, scale: 8 }),\n  isDefault: boolean(\"is_default\").default(false),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// جدول الطلبات\nexport const orders = pgTable(\"orders\", {\n  id: uuid(\"id\").primaryKey().defaultRandom(),\n  orderNumber: text(\"order_number\").unique().notNull(),\n  customerId: uuid(\"customer_id\").references(() => customers.id),\n  restaurantId: uuid(\"restaurant_id\").references(() => restaurants.id),\n  driverId: uuid(\"driver_id\").references(() => adminUsers.id),\n  status: text(\"status\").notNull().default(\"pending\"), // pending, confirmed, preparing, ready, picked_up, delivered, cancelled\n  paymentStatus: text(\"payment_status\").default(\"pending\"), // pending, paid, failed, refunded\n  paymentMethod: text(\"payment_method\").default(\"cash\"), // cash, card, wallet\n  \n  // تفاصيل الطلب\n  items: jsonb(\"items\").notNull(),\n  subtotal: decimal(\"subtotal\", { precision: 10, scale: 2 }).notNull(),\n  deliveryFee: decimal(\"delivery_fee\", { precision: 10, scale: 2 }).default(\"0\"),\n  serviceFee: decimal(\"service_fee\", { precision: 10, scale: 2 }).default(\"0\"),\n  discount: decimal(\"discount\", { precision: 10, scale: 2 }).default(\"0\"),\n  tax: decimal(\"tax\", { precision: 10, scale: 2 }).default(\"0\"),\n  total: decimal(\"total\", { precision: 10, scale: 2 }).notNull(),\n  \n  // معلومات التوصيل\n  deliveryAddress: jsonb(\"delivery_address\").notNull(),\n  customerPhone: text(\"customer_phone\").notNull(),\n  customerName: text(\"customer_name\").notNull(),\n  deliveryInstructions: text(\"delivery_instructions\"),\n  estimatedDeliveryTime: timestamp(\"estimated_delivery_time\"),\n  actualDeliveryTime: timestamp(\"actual_delivery_time\"),\n  \n  // معلومات السائق\n  driverEarnings: decimal(\"driver_earnings\", { precision: 10, scale: 2 }).default(\"0\"),\n  driverNotes: text(\"driver_notes\"),\n  \n  // تقييم ومراجعة\n  rating: integer(\"rating\"),\n  review: text(\"review\"),\n  \n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// جدول العروض الخاصة\nexport const specialOffers = pgTable(\"special_offers\", {\n  id: uuid(\"id\").primaryKey().defaultRandom(),\n  title: text(\"title\").notNull(),\n  titleEn: text(\"title_en\"),\n  description: text(\"description\"),\n  image: text(\"image\"),\n  bannerImage: text(\"banner_image\"),\n  type: text(\"type\").notNull(), // discount, buy_one_get_one, free_delivery, combo\n  discountType: text(\"discount_type\"), // percentage, fixed_amount\n  discountPercent: integer(\"discount_percent\"),\n  discountAmount: decimal(\"discount_amount\", { precision: 10, scale: 2 }),\n  minimumOrder: decimal(\"minimum_order\", { precision: 10, scale: 2 }).default(\"0\"),\n  maxDiscount: decimal(\"max_discount\", { precision: 10, scale: 2 }),\n  \n  // ربط العرض\n  restaurantId: uuid(\"restaurant_id\").references(() => restaurants.id),\n  categoryId: uuid(\"category_id\").references(() => categories.id),\n  menuItemIds: jsonb(\"menu_item_ids\"),\n  \n  // صلاحية العرض\n  startDate: timestamp(\"start_date\"),\n  endDate: timestamp(\"end_date\"),\n  validUntil: timestamp(\"valid_until\"),\n  startTime: text(\"start_time\"),\n  endTime: text(\"end_time\"),\n  daysOfWeek: jsonb(\"days_of_week\"),\n  \n  // إعدادات العرض\n  usageLimit: integer(\"usage_limit\"),\n  usageCount: integer(\"usage_count\").default(0),\n  isActive: boolean(\"is_active\").default(true),\n  priority: integer(\"priority\").default(0),\n  \n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// جدول الإشعارات\nexport const notifications = pgTable(\"notifications\", {\n  id: uuid(\"id\").primaryKey().defaultRandom(),\n  type: text(\"type\").notNull(), // order_update, promotion, system, driver_alert\n  title: text(\"title\").notNull(),\n  message: text(\"message\").notNull(),\n  data: jsonb(\"data\"),\n  \n  // المستقبل\n  recipientType: text(\"recipient_type\").notNull(), // customer, driver, admin, all\n  recipientId: uuid(\"recipient_id\"),\n  \n  // حالة الإشعار\n  isRead: boolean(\"is_read\").default(false),\n  isSent: boolean(\"is_sent\").default(false),\n  sentAt: timestamp(\"sent_at\"),\n  \n  createdBy: uuid(\"created_by\"),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// جدول التقييمات والمراجعات\nexport const reviews = pgTable(\"reviews\", {\n  id: uuid(\"id\").primaryKey().defaultRandom(),\n  customerId: uuid(\"customer_id\").references(() => customers.id),\n  restaurantId: uuid(\"restaurant_id\").references(() => restaurants.id),\n  orderId: uuid(\"order_id\").references(() => orders.id),\n  menuItemId: uuid(\"menu_item_id\").references(() => menuItems.id),\n  \n  rating: integer(\"rating\").notNull(),\n  comment: text(\"comment\"),\n  images: jsonb(\"images\"),\n  \n  // تقييمات فرعية\n  foodQuality: integer(\"food_quality\"),\n  deliverySpeed: integer(\"delivery_speed\"),\n  packaging: integer(\"packaging\"),\n  driverService: integer(\"driver_service\"),\n  \n  isApproved: boolean(\"is_approved\").default(true),\n  adminResponse: text(\"admin_response\"),\n  \n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// جدول إعدادات النظام\nexport const systemSettings = pgTable(\"system_settings\", {\n  id: uuid(\"id\").primaryKey().defaultRandom(),\n  key: text(\"key\").unique().notNull(),\n  value: jsonb(\"value\"),\n  description: text(\"description\"),\n  category: text(\"category\").default(\"general\"),\n  isPublic: boolean(\"is_public\").default(false),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\n// جدول إحصائيات السائقين\nexport const driverStats = pgTable(\"driver_stats\", {\n  id: uuid(\"id\").primaryKey().defaultRandom(),\n  driverId: uuid(\"driver_id\").references(() => adminUsers.id),\n  date: timestamp(\"date\").notNull(),\n  \n  // إحصائيات يومية\n  totalOrders: integer(\"total_orders\").default(0),\n  completedOrders: integer(\"completed_orders\").default(0),\n  cancelledOrders: integer(\"cancelled_orders\").default(0),\n  totalEarnings: decimal(\"total_earnings\", { precision: 10, scale: 2 }).default(\"0\"),\n  totalDistance: decimal(\"total_distance\", { precision: 8, scale: 2 }).default(\"0\"),\n  averageRating: decimal(\"average_rating\", { precision: 3, scale: 2 }).default(\"0\"),\n  onlineHours: decimal(\"online_hours\", { precision: 5, scale: 2 }).default(\"0\"),\n  \n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\n// جدول تتبع الطلبات\nexport const orderTracking = pgTable(\"order_tracking\", {\n  id: uuid(\"id\").primaryKey().defaultRandom(),\n  orderId: uuid(\"order_id\").references(() => orders.id),\n  status: text(\"status\").notNull(),\n  message: text(\"message\"),\n  location: jsonb(\"location\"),\n  timestamp: timestamp(\"timestamp\").defaultNow(),\n  createdBy: uuid(\"created_by\"),\n  createdByType: text(\"created_by_type\"), // system, admin, driver, restaurant\n});\n\n// Schemas للتحقق من البيانات\nexport const insertAdminUserSchema = createInsertSchema(adminUsers);\nexport const selectAdminUserSchema = createSelectSchema(adminUsers);\n\nexport const insertCategorySchema = createInsertSchema(categories);\nexport const selectCategorySchema = createSelectSchema(categories);\n\nexport const insertRestaurantSchema = createInsertSchema(restaurants);\nexport const selectRestaurantSchema = createSelectSchema(restaurants);\n\nexport const insertMenuItemSchema = createInsertSchema(menuItems);\nexport const selectMenuItemSchema = createSelectSchema(menuItems);\n\nexport const insertOrderSchema = createInsertSchema(orders);\nexport const selectOrderSchema = createSelectSchema(orders);\n\nexport const insertSpecialOfferSchema = createInsertSchema(specialOffers);\nexport const selectSpecialOfferSchema = createSelectSchema(specialOffers);\n\nexport const insertNotificationSchema = createInsertSchema(notifications);\nexport const selectNotificationSchema = createSelectSchema(notifications);\n\nexport const insertReviewSchema = createInsertSchema(reviews);\nexport const selectReviewSchema = createSelectSchema(reviews);\n\n// أنواع TypeScript\nexport type AdminUser = typeof adminUsers.$inferSelect;\nexport type NewAdminUser = typeof adminUsers.$inferInsert;\n\nexport type Category = typeof categories.$inferSelect;\nexport type NewCategory = typeof categories.$inferInsert;\n\nexport type Restaurant = typeof restaurants.$inferSelect;\nexport type NewRestaurant = typeof restaurants.$inferInsert;\n\nexport type MenuItem = typeof menuItems.$inferSelect;\nexport type NewMenuItem = typeof menuItems.$inferInsert;\n\nexport type Order = typeof orders.$inferSelect;\nexport type NewOrder = typeof orders.$inferInsert;\n\nexport type SpecialOffer = typeof specialOffers.$inferSelect;\nexport type NewSpecialOffer = typeof specialOffers.$inferInsert;\n\nexport type Notification = typeof notifications.$inferSelect;\nexport type NewNotification = typeof notifications.$inferInsert;\n\nexport type Review = typeof reviews.$inferSelect;\nexport type NewReview = typeof reviews.$inferInsert;\n\nexport type Customer = typeof customers.$inferSelect;\nexport type NewCustomer = typeof customers.$inferInsert;\n\nexport type CustomerAddress = typeof customerAddresses.$inferSelect;\nexport type NewCustomerAddress = typeof customerAddresses.$inferInsert;\n\nexport type SystemSettings = typeof systemSettings.$inferSelect;\nexport type NewSystemSettings = typeof systemSettings.$inferInsert;\n\nexport type OrderTracking = typeof orderTracking.$inferSelect;\nexport type NewOrderTracking = typeof orderTracking.$inferInsert;\n\nexport type DriverStats = typeof driverStats.$inferSelect;\nexport type NewDriverStats = typeof driverStats.$inferInsert;\n\n// Legacy types for compatibility\nexport type User = AdminUser;\nexport type InsertUser = NewAdminUser;\nexport type Driver = AdminUser;\nexport type InsertDriver = NewAdminUser;\nexport type InsertCategory = NewCategory;\nexport type InsertRestaurant = NewRestaurant;\nexport type InsertMenuItem = NewMenuItem;\nexport type InsertOrder = NewOrder;\nexport type InsertSpecialOffer = NewSpecialOffer;\nexport type UiSettings = SystemSettings;\nexport type InsertUiSettings = NewSystemSettings;","size_bytes":16179},"client/src/App.tsx":{"content":"import React from 'react';\nimport { Router, Route, Switch } from 'wouter';\nimport { CartProvider } from '@/context/CartContext';\nimport { AuthProvider } from '@/context/AuthContext';\n\n// صفحات العميل\nimport HomePage from '@/pages/HomePage';\nimport RestaurantPage from '@/pages/RestaurantPage';\nimport CartPage from '@/pages/CartPage';\nimport OrderTrackingPage from '@/pages/OrderTrackingPage';\nimport ProfilePage from '@/pages/ProfilePage';\n\n// صفحات الإدارة\nimport AdminLoginPage from '@/pages/admin/AdminLoginPage';\nimport AdminDashboard from '@/pages/admin/AdminDashboard';\nimport AdminRestaurants from '@/pages/admin/AdminRestaurants';\nimport AdminMenuItems from '@/pages/AdminMenuItems';\nimport AdminOffers from '@/pages/AdminOffers';\n\n// صفحات السائق\nimport DriverLoginPage from '@/pages/driver/DriverLoginPage';\nimport DriverDashboard from '@/pages/DriverDashboard';\n\n// مكونات مشتركة\nimport { AdminLayout } from '@/components/admin/AdminLayout';\nimport { ProtectedRoute } from '@/components/ProtectedRoute';\n\nfunction App() {\n  return (\n    <AuthProvider>\n      <CartProvider>\n        <Router>\n          <Switch>\n            {/* مسارات العميل */}\n            <Route path=\"/\" component={HomePage} />\n            <Route path=\"/restaurant/:id\" component={RestaurantPage} />\n            <Route path=\"/cart\" component={CartPage} />\n            <Route path=\"/order/:id\" component={OrderTrackingPage} />\n            <Route path=\"/profile\" component={ProfilePage} />\n\n            {/* مسارات الإدارة */}\n            <Route path=\"/admin-login\" component={AdminLoginPage} />\n            \n            <Route path=\"/admin\">\n              <ProtectedRoute userType=\"admin\">\n                <AdminLayout>\n                  <AdminDashboard />\n                </AdminLayout>\n              </ProtectedRoute>\n            </Route>\n            \n            <Route path=\"/admin/restaurants\">\n              <ProtectedRoute userType=\"admin\">\n                <AdminLayout>\n                  <AdminRestaurants />\n                </AdminLayout>\n              </ProtectedRoute>\n            </Route>\n            \n            <Route path=\"/admin/menu-items\">\n              <ProtectedRoute userType=\"admin\">\n                <AdminLayout>\n                  <AdminMenuItems />\n                </AdminLayout>\n              </ProtectedRoute>\n            </Route>\n            \n            <Route path=\"/admin/offers\">\n              <ProtectedRoute userType=\"admin\">\n                <AdminLayout>\n                  <AdminOffers />\n                </AdminLayout>\n              </ProtectedRoute>\n            </Route>\n\n            {/* مسارات السائق */}\n            <Route path=\"/driver-login\" component={DriverLoginPage} />\n            <Route path=\"/delivery\">\n              <ProtectedRoute userType=\"driver\">\n                <DriverDashboard />\n              </ProtectedRoute>\n            </Route>\n\n            {/* صفحة 404 */}\n            <Route>\n              <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n                <div className=\"text-center\">\n                  <h1 className=\"text-4xl font-bold text-gray-900 mb-4\">404</h1>\n                  <p className=\"text-gray-600 mb-8\">الصفحة غير موجودة</p>\n                  <a href=\"/\" className=\"bg-orange-500 text-white px-6 py-3 rounded-lg hover:bg-orange-600 transition-colors\">\n                    العودة للرئيسية\n                  </a>\n                </div>\n              </div>\n            </Route>\n          </Switch>\n        </Router>\n      </CartProvider>\n    </AuthProvider>\n  );\n}\n\nexport default App;","size_bytes":3680},"client/src/index.css":{"content":"@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@100..900&display=swap');\r\n@tailwind base;\r\n@tailwind components;\r\n@tailwind utilities;\r\n\r\n@layer base {\r\n  :root {\r\n    --background: 0 0% 100%;\r\n    --foreground: 222.2 84% 4.9%;\r\n    --card: 0 0% 100%;\r\n    --card-foreground: 222.2 84% 4.9%;\r\n    --popover: 0 0% 100%;\r\n    --popover-foreground: 222.2 84% 4.9%;\r\n    --primary: 22 100% 59%;\r\n    --primary-foreground: 210 40% 98%;\r\n    --secondary: 210 40% 96%;\r\n    --secondary-foreground: 222.2 84% 4.9%;\r\n    --muted: 210 40% 96%;\r\n    --muted-foreground: 215.4 16.3% 46.9%;\r\n    --accent: 210 40% 96%;\r\n    --accent-foreground: 222.2 84% 4.9%;\r\n    --destructive: 0 84.2% 60.2%;\r\n    --destructive-foreground: 210 40% 98%;\r\n    --border: 214.3 31.8% 91.4%;\r\n    --input: 214.3 31.8% 91.4%;\r\n    --ring: 22 100% 59%;\r\n    --radius: 0.5rem;\r\n    --chart-1: 12 76% 61%;\r\n    --chart-2: 173 58% 39%;\r\n    --chart-3: 197 37% 24%;\r\n    --chart-4: 43 74% 66%;\r\n    --chart-5: 27 87% 67%;\r\n  }\r\n\r\n  .dark {\r\n    --background: 222.2 84% 4.9%;\r\n    --foreground: 210 40% 98%;\r\n    --card: 222.2 84% 4.9%;\r\n    --card-foreground: 210 40% 98%;\r\n    --popover: 222.2 84% 4.9%;\r\n    --popover-foreground: 210 40% 98%;\r\n    --primary: 22 100% 59%;\r\n    --primary-foreground: 222.2 84% 4.9%;\r\n    --secondary: 217.2 32.6% 17.5%;\r\n    --secondary-foreground: 210 40% 98%;\r\n    --muted: 217.2 32.6% 17.5%;\r\n    --muted-foreground: 215 20.2% 65.1%;\r\n    --accent: 217.2 32.6% 17.5%;\r\n    --accent-foreground: 210 40% 98%;\r\n    --destructive: 0 62.8% 30.6%;\r\n    --destructive-foreground: 210 40% 98%;\r\n    --border: 217.2 32.6% 17.5%;\r\n    --input: 217.2 32.6% 17.5%;\r\n    --ring: 22 100% 59%;\r\n    --chart-1: 220 70% 50%;\r\n    --chart-2: 160 60% 45%;\r\n    --chart-3: 30 80% 55%;\r\n    --chart-4: 280 65% 60%;\r\n    --chart-5: 340 75% 55%;\r\n  }\r\n}\r\n\r\n@layer base {\r\n  * {\r\n    @apply border-border;\r\n  }\r\n  \r\n  body {\r\n    @apply bg-background text-foreground font-arabic;\r\n    direction: rtl;\r\n  }\r\n  \r\n  html {\r\n    direction: rtl;\r\n  }\r\n}\r\n\r\n@layer components {\r\n  .btn-primary {\r\n    @apply bg-orange-500 hover:bg-orange-600 text-white font-medium px-6 py-3 rounded-lg transition-colors duration-200;\r\n  }\r\n  \r\n  .btn-secondary {\r\n    @apply bg-gray-100 hover:bg-gray-200 text-gray-900 font-medium px-6 py-3 rounded-lg transition-colors duration-200;\r\n  }\r\n  \r\n  .card {\r\n    @apply bg-white rounded-xl shadow-sm border border-gray-100 p-6;\r\n  }\r\n  \r\n  .input {\r\n    @apply w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent transition-all duration-200;\r\n  }\r\n  \r\n  .gradient-bg {\r\n    background: linear-gradient(135deg, #FF6B35 0%, #F7931E 100%);\r\n  }\r\n  \r\n  .text-gradient {\r\n    background: linear-gradient(135deg, #FF6B35 0%, #F7931E 100%);\r\n    -webkit-background-clip: text;\r\n    -webkit-text-fill-color: transparent;\r\n    background-clip: text;\r\n  }\r\n}\r\n\r\n@layer utilities {\r\n  .animate-fade-in {\r\n    animation: fadeIn 0.5s ease-in-out;\r\n  }\r\n  \r\n  .animate-slide-up {\r\n    animation: slideUp 0.3s ease-out;\r\n  }\r\n  \r\n  .animate-bounce-in {\r\n    animation: bounceIn 0.6s ease-out;\r\n  }\r\n}\r\n\r\n@keyframes fadeIn {\r\n  from {\r\n    opacity: 0;\r\n    transform: translateY(20px);\r\n  }\r\n  to {\r\n    opacity: 1;\r\n    transform: translateY(0);\r\n  }\r\n}\r\n\r\n@keyframes slideUp {\r\n  from {\r\n    opacity: 0;\r\n    transform: translateY(30px);\r\n  }\r\n  to {\r\n    opacity: 1;\r\n    transform: translateY(0);\r\n  }\r\n}\r\n\r\n@keyframes bounceIn {\r\n  0% {\r\n    opacity: 0;\r\n    transform: scale(0.3);\r\n  }\r\n  50% {\r\n    opacity: 1;\r\n    transform: scale(1.05);\r\n  }\r\n  70% {\r\n    transform: scale(0.9);\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n    transform: scale(1);\r\n  }\r\n}\r\n\r\n/* تحسينات للعربية */\r\n.font-arabic {\r\n  font-family: 'Noto Sans Arabic', 'Inter', sans-serif;\r\n}\r\n\r\n/* تحسين الأزرار للعربية */\r\nbutton, .btn {\r\n  font-family: 'Noto Sans Arabic', 'Inter', sans-serif;\r\n  font-weight: 500;\r\n}\r\n\r\n/* تحسين النصوص */\r\nh1, h2, h3, h4, h5, h6 {\r\n  font-family: 'Noto Sans Arabic', 'Inter', sans-serif;\r\n  font-weight: 600;\r\n}\r\n\r\n/* تحسين المدخلات */\r\ninput, textarea, select {\r\n  font-family: 'Noto Sans Arabic', 'Inter', sans-serif;\r\n  text-align: right;\r\n}\r\n\r\n/* تحسين الجداول */\r\ntable {\r\n  direction: rtl;\r\n}\r\n\r\n/* تحسين القوائم */\r\nul, ol {\r\n  padding-right: 1.5rem;\r\n  padding-left: 0;\r\n}\r\n\r\n/* إخفاء شريط التمرير مع الحفاظ على الوظيفة */\r\n.scrollbar-hide {\r\n  -ms-overflow-style: none;\r\n  scrollbar-width: none;\r\n}\r\n\r\n.scrollbar-hide::-webkit-scrollbar {\r\n  display: none;\r\n}\r\n\r\n/* تحسين الظلال */\r\n.shadow-soft {\r\n  box-shadow: 0 2px 15px -3px rgba(0, 0, 0, 0.07), 0 10px 20px -2px rgba(0, 0, 0, 0.04);\r\n}\r\n\r\n/* تحسين الحدود */\r\n.border-soft {\r\n  border-color: rgba(0, 0, 0, 0.08);\r\n}\r\n\r\n/* تحسين الألوان للوضع الليلي */\r\n@media (prefers-color-scheme: dark) {\r\n  .card {\r\n    @apply bg-gray-800 border-gray-700;\r\n  }\r\n}\r\n\r\n/* تحسين الاستجابة */\r\n@media (max-width: 640px) {\r\n  .container {\r\n    padding-left: 1rem;\r\n    padding-right: 1rem;\r\n  }\r\n}\r\n\r\n/* تحسين الطباعة */\r\n@media print {\r\n  .no-print {\r\n    display: none !important;\r\n  }\r\n}","size_bytes":5293},"client/src/main.tsx":{"content":"import React from 'react';\r\nimport ReactDOM from 'react-dom/client';\r\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\r\nimport { Toaster } from '@/components/ui/toaster';\r\nimport { ThemeProvider } from '@/components/theme-provider';\r\nimport App from './App';\r\nimport './index.css';\r\n\r\nconst queryClient = new QueryClient({\r\n  defaultOptions: {\r\n    queries: {\r\n      staleTime: 5 * 60 * 1000, // 5 دقائق\r\n      retry: 1,\r\n    },\r\n  },\r\n});\r\n\r\nReactDOM.createRoot(document.getElementById('root')!).render(\r\n  <React.StrictMode>\r\n    <QueryClientProvider client={queryClient}>\r\n      <ThemeProvider defaultTheme=\"light\" storageKey=\"saree-one-theme\">\r\n        <App />\r\n        <Toaster />\r\n      </ThemeProvider>\r\n    </QueryClientProvider>\r\n  </React.StrictMode>\r\n);","size_bytes":794},"server/routes/admin.ts":{"content":"import express from \"express\";\nimport { db } from \"../db.js\";\nimport * as schema from \"../../shared/schema.js\";\nimport { eq, desc, and, or, like, count, sql } from \"drizzle-orm\";\n\nconst router = express.Router();\n\n// Middleware للتحقق من صلاحيات المدير\nconst requireAdmin = async (req: any, res: any, next: any) => {\n  try {\n    const authHeader = req.headers.authorization;\n    if (!authHeader) {\n      return res.status(401).json({ error: \"غير مصرح\" });\n    }\n\n    const token = authHeader.split(' ')[1];\n    const session = await db.query.adminSessions.findFirst({\n      where: eq(schema.adminSessions.token, token),\n    });\n\n    if (!session || session.expiresAt < new Date()) {\n      return res.status(401).json({ error: \"جلسة منتهية الصلاحية\" });\n    }\n\n    const admin = await db.query.adminUsers.findFirst({\n      where: eq(schema.adminUsers.id, session.adminId!)\n    });\n\n    if (!admin || admin.userType !== 'admin') {\n      return res.status(403).json({ error: \"صلاحيات غير كافية\" });\n    }\n\n    req.admin = admin;\n    next();\n  } catch (error) {\n    console.error(\"خطأ في التحقق من صلاحيات المدير:\", error);\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n};\n\n// تسجيل دخول المدير\nrouter.post(\"/login\", async (req, res) => {\n  try {\n    const { email, password } = req.body;\n\n    const admin = await db.query.adminUsers.findFirst({\n      where: and(\n        eq(schema.adminUsers.email, email),\n        eq(schema.adminUsers.userType, \"admin\")\n      )\n    });\n\n    if (!admin || admin.password !== password) {\n      return res.status(401).json({ error: \"بيانات دخول خاطئة\" });\n    }\n\n    if (!admin.isActive) {\n      return res.status(401).json({ error: \"الحساب غير نشط\" });\n    }\n\n    // إنشاء جلسة جديدة\n    const token = `admin_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    const expiresAt = new Date(Date.now() + 24 * 60 * 60 * 1000); // 24 ساعة\n\n    await db.insert(schema.adminSessions).values({\n      adminId: admin.id,\n      token,\n      userType: \"admin\",\n      expiresAt\n    });\n\n    res.json({\n      success: true,\n      token,\n      admin: {\n        id: admin.id,\n        name: admin.name,\n        email: admin.email,\n        userType: admin.userType\n      }\n    });\n  } catch (error) {\n    console.error(\"خطأ في تسجيل دخول المدير:\", error);\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\n// تسجيل خروج المدير\nrouter.post(\"/logout\", requireAdmin, async (req: any, res) => {\n  try {\n    const authHeader = req.headers.authorization;\n    const token = authHeader.split(' ')[1];\n\n    await db.delete(schema.adminSessions)\n      .where(eq(schema.adminSessions.token, token));\n\n    res.json({ success: true });\n  } catch (error) {\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\n// لوحة المعلومات\nrouter.get(\"/dashboard\", requireAdmin, async (req, res) => {\n  try {\n    // إحصائيات عامة\n    const [\n      totalRestaurants,\n      totalOrders,\n      totalDrivers,\n      totalCustomers,\n      todayOrders,\n      pendingOrders,\n      activeDrivers\n    ] = await Promise.all([\n      db.select({ count: count() }).from(schema.restaurants),\n      db.select({ count: count() }).from(schema.orders),\n      db.select({ count: count() }).from(schema.adminUsers).where(eq(schema.adminUsers.userType, \"driver\")),\n      db.select({ count: count() }).from(schema.customers),\n      db.select({ count: count() }).from(schema.orders)\n        .where(sql`DATE(created_at) = CURRENT_DATE`),\n      db.select({ count: count() }).from(schema.orders)\n        .where(eq(schema.orders.status, \"pending\")),\n      db.select({ count: count() }).from(schema.adminUsers)\n        .where(and(\n          eq(schema.adminUsers.userType, \"driver\"),\n          eq(schema.adminUsers.isActive, true)\n        ))\n    ]);\n\n    // إحصائيات مالية\n    const [totalRevenue, todayRevenue] = await Promise.all([\n      db.select({ \n        total: sql<number>`COALESCE(SUM(${schema.orders.total}), 0)` \n      }).from(schema.orders)\n        .where(eq(schema.orders.status, \"delivered\")),\n      db.select({ \n        total: sql<number>`COALESCE(SUM(${schema.orders.total}), 0)` \n      }).from(schema.orders)\n        .where(and(\n          eq(schema.orders.status, \"delivered\"),\n          sql`DATE(created_at) = CURRENT_DATE`\n        ))\n    ]);\n\n    // الطلبات الأخيرة\n    const recentOrders = await db.query.orders.findMany({\n      limit: 10,\n      orderBy: desc(schema.orders.createdAt),\n      with: {\n        restaurantId: true,\n        customerId: true,\n        driverId: true\n      }\n    });\n\n    res.json({\n      stats: {\n        totalRestaurants: totalRestaurants[0].count,\n        totalOrders: totalOrders[0].count,\n        totalDrivers: totalDrivers[0].count,\n        totalCustomers: totalCustomers[0].count,\n        todayOrders: todayOrders[0].count,\n        pendingOrders: pendingOrders[0].count,\n        activeDrivers: activeDrivers[0].count,\n        totalRevenue: totalRevenue[0].total,\n        todayRevenue: todayRevenue[0].total\n      },\n      recentOrders\n    });\n  } catch (error) {\n    console.error(\"خطأ في لوحة المعلومات:\", error);\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\n// إدارة التصنيفات\nrouter.get(\"/categories\", requireAdmin, async (req, res) => {\n  try {\n    const categories = await db.query.categories.findMany({\n      orderBy: [schema.categories.sortOrder, schema.categories.name]\n    });\n    res.json(categories);\n  } catch (error) {\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\nrouter.post(\"/categories\", requireAdmin, async (req, res) => {\n  try {\n    const categoryData = req.body;\n    const [newCategory] = await db.insert(schema.categories)\n      .values(categoryData)\n      .returning();\n    \n    res.json(newCategory);\n  } catch (error) {\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\nrouter.put(\"/categories/:id\", requireAdmin, async (req, res) => {\n  try {\n    const { id } = req.params;\n    const updateData = req.body;\n    \n    const [updatedCategory] = await db.update(schema.categories)\n      .set({ ...updateData, updatedAt: new Date() })\n      .where(eq(schema.categories.id, id))\n      .returning();\n    \n    res.json(updatedCategory);\n  } catch (error) {\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\nrouter.delete(\"/categories/:id\", requireAdmin, async (req, res) => {\n  try {\n    const { id } = req.params;\n    \n    await db.delete(schema.categories)\n      .where(eq(schema.categories.id, id));\n    \n    res.json({ success: true });\n  } catch (error) {\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\n// إدارة أقسام المطاعم\nrouter.get(\"/restaurant-sections\", requireAdmin, async (req, res) => {\n  try {\n    const sections = await db.query.restaurantSections.findMany({\n      orderBy: [schema.restaurantSections.sortOrder, schema.restaurantSections.name]\n    });\n    res.json(sections);\n  } catch (error) {\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\nrouter.post(\"/restaurant-sections\", requireAdmin, async (req, res) => {\n  try {\n    const sectionData = req.body;\n    const [newSection] = await db.insert(schema.restaurantSections)\n      .values(sectionData)\n      .returning();\n    \n    res.json(newSection);\n  } catch (error) {\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\n// إدارة المطاعم\nrouter.get(\"/restaurants\", requireAdmin, async (req, res) => {\n  try {\n    const { page = 1, limit = 10, search, categoryId } = req.query;\n    const offset = (Number(page) - 1) * Number(limit);\n\n    let whereConditions = [];\n    \n    if (search) {\n      whereConditions.push(\n        or(\n          like(schema.restaurants.name, `%${search}%`),\n          like(schema.restaurants.description, `%${search}%`)\n        )\n      );\n    }\n    \n    if (categoryId) {\n      whereConditions.push(eq(schema.restaurants.categoryId, categoryId as string));\n    }\n\n    const restaurants = await db.query.restaurants.findMany({\n      where: whereConditions.length > 0 ? and(...whereConditions) : undefined,\n      limit: Number(limit),\n      offset,\n      orderBy: desc(schema.restaurants.createdAt)\n    });\n\n    const [totalCount] = await db.select({ count: count() })\n      .from(schema.restaurants)\n      .where(whereConditions.length > 0 ? and(...whereConditions) : undefined);\n\n    res.json(restaurants);\n  } catch (error) {\n    console.error(\"خطأ في جلب المطاعم:\", error);\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\nrouter.post(\"/restaurants\", requireAdmin, async (req, res) => {\n  try {\n    const restaurantData = req.body;\n    \n    // إضافة صورة افتراضية إذا لم تكن موجودة\n    if (!restaurantData.image) {\n      restaurantData.image = \"https://images.pexels.com/photos/262978/pexels-photo-262978.jpeg\";\n    }\n    \n    const [newRestaurant] = await db.insert(schema.restaurants)\n      .values(restaurantData)\n      .returning();\n    \n    res.json(newRestaurant);\n  } catch (error) {\n    console.error(\"خطأ في إضافة المطعم:\", error);\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\nrouter.put(\"/restaurants/:id\", requireAdmin, async (req, res) => {\n  try {\n    const { id } = req.params;\n    const updateData = req.body;\n    \n    const [updatedRestaurant] = await db.update(schema.restaurants)\n      .set({ ...updateData, updatedAt: new Date() })\n      .where(eq(schema.restaurants.id, id))\n      .returning();\n    \n    res.json(updatedRestaurant);\n  } catch (error) {\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\nrouter.delete(\"/restaurants/:id\", requireAdmin, async (req, res) => {\n  try {\n    const { id } = req.params;\n    \n    await db.delete(schema.restaurants)\n      .where(eq(schema.restaurants.id, id));\n    \n    res.json({ success: true });\n  } catch (error) {\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\n// إدارة عناصر القائمة\nrouter.get(\"/restaurants/:restaurantId/menu\", requireAdmin, async (req, res) => {\n  try {\n    const { restaurantId } = req.params;\n    \n    const menuItems = await db.query.menuItems.findMany({\n      where: eq(schema.menuItems.restaurantId, restaurantId),\n      orderBy: [schema.menuItems.name]\n    });\n    \n    res.json(menuItems);\n  } catch (error) {\n    console.error(\"خطأ في جلب عناصر القائمة:\", error);\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\nrouter.post(\"/menu-items\", requireAdmin, async (req, res) => {\n  try {\n    const menuItemData = req.body;\n    \n    // إضافة صورة افتراضية إذا لم تكن موجودة\n    if (!menuItemData.image) {\n      menuItemData.image = \"https://images.pexels.com/photos/1640777/pexels-photo-1640777.jpeg\";\n    }\n    \n    const [newMenuItem] = await db.insert(schema.menuItems)\n      .values(menuItemData)\n      .returning();\n    \n    res.json(newMenuItem);\n  } catch (error) {\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\nrouter.put(\"/menu-items/:id\", requireAdmin, async (req, res) => {\n  try {\n    const { id } = req.params;\n    const updateData = req.body;\n    \n    const [updatedMenuItem] = await db.update(schema.menuItems)\n      .set({ ...updateData, updatedAt: new Date() })\n      .where(eq(schema.menuItems.id, id))\n      .returning();\n    \n    res.json(updatedMenuItem);\n  } catch (error) {\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\nrouter.delete(\"/menu-items/:id\", requireAdmin, async (req, res) => {\n  try {\n    const { id } = req.params;\n    \n    await db.delete(schema.menuItems)\n      .where(eq(schema.menuItems.id, id));\n    \n    res.json({ success: true });\n  } catch (error) {\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\n// إدارة الطلبات\nrouter.get(\"/orders\", requireAdmin, async (req, res) => {\n  try {\n    const { page = 1, limit = 20, status, search } = req.query;\n    const offset = (Number(page) - 1) * Number(limit);\n\n    let whereConditions = [];\n    \n    if (status && status !== 'all') {\n      whereConditions.push(eq(schema.orders.status, status as string));\n    }\n    \n    if (search) {\n      whereConditions.push(\n        or(\n          like(schema.orders.orderNumber, `%${search}%`),\n          like(schema.orders.customerName, `%${search}%`),\n          like(schema.orders.customerPhone, `%${search}%`)\n        )\n      );\n    }\n\n    const orders = await db.query.orders.findMany({\n      where: whereConditions.length > 0 ? and(...whereConditions) : undefined,\n      with: {\n        restaurantId: true,\n        customerId: true,\n        driverId: true\n      },\n      limit: Number(limit),\n      offset,\n      orderBy: desc(schema.orders.createdAt)\n    });\n\n    const [totalCount] = await db.select({ count: count() })\n      .from(schema.orders)\n      .where(whereConditions.length > 0 ? and(...whereConditions) : undefined);\n\n    res.json({\n      orders,\n      pagination: {\n        page: Number(page),\n        limit: Number(limit),\n        total: totalCount.count,\n        pages: Math.ceil(totalCount.count / Number(limit))\n      }\n    });\n  } catch (error) {\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\nrouter.put(\"/orders/:id/status\", requireAdmin, async (req: any, res) => {\n  try {\n    const { id } = req.params;\n    const { status, driverId } = req.body;\n    \n    const updateData: any = { \n      status, \n      updatedAt: new Date() \n    };\n    \n    if (driverId) {\n      updateData.driverId = driverId;\n    }\n    \n    const [updatedOrder] = await db.update(schema.orders)\n      .set(updateData)\n      .where(eq(schema.orders.id, id))\n      .returning();\n    \n    // إضافة تتبع للطلب\n    await db.insert(schema.orderTracking).values({\n      orderId: id,\n      status,\n      message: `تم تحديث حالة الطلب إلى: ${status}`,\n      createdBy: req.admin.id,\n      createdByType: 'admin'\n    });\n    \n    res.json(updatedOrder);\n  } catch (error) {\n    console.error(\"خطأ في تحديث حالة الطلب:\", error);\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\n// إدارة السائقين\nrouter.get(\"/drivers\", requireAdmin, async (req, res) => {\n  try {\n    const drivers = await db.query.adminUsers.findMany({\n      where: eq(schema.adminUsers.userType, \"driver\"),\n      orderBy: desc(schema.adminUsers.createdAt)\n    });\n    \n    res.json(drivers);\n  } catch (error) {\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\nrouter.post(\"/drivers\", requireAdmin, async (req, res) => {\n  try {\n    const driverData = {\n      ...req.body,\n      userType: \"driver\"\n    };\n    \n    const [newDriver] = await db.insert(schema.adminUsers)\n      .values(driverData)\n      .returning();\n    \n    res.json(newDriver);\n  } catch (error) {\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\nrouter.put(\"/drivers/:id\", requireAdmin, async (req, res) => {\n  try {\n    const { id } = req.params;\n    const updateData = req.body;\n    \n    const [updatedDriver] = await db.update(schema.adminUsers)\n      .set({ ...updateData, updatedAt: new Date() })\n      .where(eq(schema.adminUsers.id, id))\n      .returning();\n    \n    res.json(updatedDriver);\n  } catch (error) {\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\nrouter.delete(\"/drivers/:id\", requireAdmin, async (req, res) => {\n  try {\n    const { id } = req.params;\n    \n    await db.delete(schema.adminUsers)\n      .where(eq(schema.adminUsers.id, id));\n    \n    res.json({ success: true });\n  } catch (error) {\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\n// إحصائيات السائق\nrouter.get(\"/drivers/:id/stats\", requireAdmin, async (req, res) => {\n  try {\n    const { id } = req.params;\n    const { startDate, endDate } = req.query;\n    \n    let dateFilter = [];\n    if (startDate) {\n      dateFilter.push(sql`${schema.orders.createdAt} >= ${startDate}`);\n    }\n    if (endDate) {\n      dateFilter.push(sql`${schema.orders.createdAt} <= ${endDate}`);\n    }\n    \n    const whereConditions = [\n      eq(schema.orders.driverId, id),\n      ...dateFilter\n    ];\n    \n    const [stats] = await db.select({\n      totalOrders: count(),\n      totalEarnings: sql<number>`COALESCE(SUM(${schema.orders.driverEarnings}), 0)`,\n      completedOrders: sql<number>`COUNT(CASE WHEN ${schema.orders.status} = 'delivered' THEN 1 END)`,\n      cancelledOrders: sql<number>`COUNT(CASE WHEN ${schema.orders.status} = 'cancelled' THEN 1 END)`\n    }).from(schema.orders)\n      .where(and(...whereConditions));\n    \n    res.json(stats);\n  } catch (error) {\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\n// إدارة العروض الخاصة\nrouter.get(\"/special-offers\", requireAdmin, async (req, res) => {\n  try {\n    const offers = await db.query.specialOffers.findMany({\n      orderBy: desc(schema.specialOffers.createdAt)\n    });\n    \n    res.json(offers);\n  } catch (error) {\n    console.error(\"خطأ في جلب العروض الخاصة:\", error);\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\nrouter.post(\"/special-offers\", requireAdmin, async (req, res) => {\n  try {\n    const offerData = req.body;\n    \n    const [newOffer] = await db.insert(schema.specialOffers)\n      .values(offerData)\n      .returning();\n    \n    res.json(newOffer);\n  } catch (error) {\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\nrouter.put(\"/special-offers/:id\", requireAdmin, async (req, res) => {\n  try {\n    const { id } = req.params;\n    const updateData = req.body;\n    \n    const [updatedOffer] = await db.update(schema.specialOffers)\n      .set({ ...updateData, updatedAt: new Date() })\n      .where(eq(schema.specialOffers.id, id))\n      .returning();\n    \n    res.json(updatedOffer);\n  } catch (error) {\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\nrouter.delete(\"/special-offers/:id\", requireAdmin, async (req, res) => {\n  try {\n    const { id } = req.params;\n    \n    await db.delete(schema.specialOffers)\n      .where(eq(schema.specialOffers.id, id));\n    \n    res.json({ success: true });\n  } catch (error) {\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\n// إدارة الإشعارات\nrouter.post(\"/notifications\", requireAdmin, async (req: any, res) => {\n  try {\n    const notificationData = {\n      ...req.body,\n      createdBy: req.admin.id\n    };\n    \n    const [newNotification] = await db.insert(schema.notifications)\n      .values(notificationData)\n      .returning();\n    \n    res.json(newNotification);\n  } catch (error) {\n    console.error(\"خطأ في إنشاء الإشعار:\", error);\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\n// إعدادات النظام\nrouter.get(\"/settings\", requireAdmin, async (req, res) => {\n  try {\n    const settings = await db.query.systemSettings.findMany({\n      orderBy: [schema.systemSettings.category, schema.systemSettings.key]\n    });\n    \n    res.json(settings);\n  } catch (error) {\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\nrouter.put(\"/settings/:key\", requireAdmin, async (req, res) => {\n  try {\n    const { key } = req.params;\n    const { value } = req.body;\n    \n    const [updatedSetting] = await db.update(schema.systemSettings)\n      .set({ value, updatedAt: new Date() })\n      .where(eq(schema.systemSettings.key, key))\n      .returning();\n    \n    res.json(updatedSetting);\n  } catch (error) {\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\nexport { router as adminRoutes };","size_bytes":20050},"server/routes/customer.ts":{"content":"import express from \"express\";\r\nimport { db } from \"../db.js\";\r\nimport * as schema from \"../../shared/schema.js\";\r\nimport { eq, desc, and } from \"drizzle-orm\";\r\n\r\nconst router = express.Router();\r\n\r\n// تسجيل عميل جديد أو تسجيل الدخول\r\nrouter.post(\"/auth\", async (req, res) => {\r\n  try {\r\n    const { phone, name } = req.body;\r\n\r\n    // البحث عن العميل\r\n    let customer = await db.query.customers.findFirst({\r\n      where: eq(schema.customers.phone, phone)\r\n    });\r\n\r\n    if (!customer) {\r\n      // إنشاء عميل جديد\r\n      [customer] = await db.insert(schema.customers)\r\n        .values({ phone, name })\r\n        .returning();\r\n    }\r\n\r\n    res.json(customer);\r\n  } catch (error) {\r\n    console.error(\"خطأ في مصادقة العميل:\", error);\r\n    res.status(500).json({ error: \"خطأ في الخادم\" });\r\n  }\r\n});\r\n\r\n// جلب ملف العميل\r\nrouter.get(\"/:id/profile\", async (req, res) => {\r\n  try {\r\n    const { id } = req.params;\r\n    \r\n    const customer = await db.query.customers.findFirst({\r\n      where: eq(schema.customers.id, id)\r\n    });\r\n\r\n    if (!customer) {\r\n      return res.status(404).json({ error: \"العميل غير موجود\" });\r\n    }\r\n\r\n    res.json(customer);\r\n  } catch (error) {\r\n    res.status(500).json({ error: \"خطأ في الخادم\" });\r\n  }\r\n});\r\n\r\n// تحديث ملف العميل\r\nrouter.put(\"/:id/profile\", async (req, res) => {\r\n  try {\r\n    const { id } = req.params;\r\n    const updateData = req.body;\r\n\r\n    const [updatedCustomer] = await db.update(schema.customers)\r\n      .set({ ...updateData, updatedAt: new Date() })\r\n      .where(eq(schema.customers.id, id))\r\n      .returning();\r\n\r\n    res.json(updatedCustomer);\r\n  } catch (error) {\r\n    res.status(500).json({ error: \"خطأ في الخادم\" });\r\n  }\r\n});\r\n\r\n// جلب عناوين العميل\r\nrouter.get(\"/:id/addresses\", async (req, res) => {\r\n  try {\r\n    const { id } = req.params;\r\n    \r\n    const addresses = await db.query.customerAddresses.findMany({\r\n      where: eq(schema.customerAddresses.customerId, id),\r\n      orderBy: [desc(schema.customerAddresses.isDefault), desc(schema.customerAddresses.createdAt)]\r\n    });\r\n\r\n    res.json(addresses);\r\n  } catch (error) {\r\n    res.status(500).json({ error: \"خطأ في الخادم\" });\r\n  }\r\n});\r\n\r\n// إضافة عنوان جديد\r\nrouter.post(\"/:id/addresses\", async (req, res) => {\r\n  try {\r\n    const { id } = req.params;\r\n    const addressData = { ...req.body, customerId: id };\r\n\r\n    // إذا كان العنوان افتراضي، إلغاء الافتراضي من العناوين الأخرى\r\n    if (addressData.isDefault) {\r\n      await db.update(schema.customerAddresses)\r\n        .set({ isDefault: false })\r\n        .where(eq(schema.customerAddresses.customerId, id));\r\n    }\r\n\r\n    const [newAddress] = await db.insert(schema.customerAddresses)\r\n      .values(addressData)\r\n      .returning();\r\n\r\n    res.json(newAddress);\r\n  } catch (error) {\r\n    res.status(500).json({ error: \"خطأ في الخادم\" });\r\n  }\r\n});\r\n\r\n// تحديث عنوان\r\nrouter.put(\"/:customerId/addresses/:addressId\", async (req, res) => {\r\n  try {\r\n    const { customerId, addressId } = req.params;\r\n    const updateData = req.body;\r\n\r\n    // إذا كان العنوان افتراضي، إلغاء الافتراضي من العناوين الأخرى\r\n    if (updateData.isDefault) {\r\n      await db.update(schema.customerAddresses)\r\n        .set({ isDefault: false })\r\n        .where(eq(schema.customerAddresses.customerId, customerId));\r\n    }\r\n\r\n    const [updatedAddress] = await db.update(schema.customerAddresses)\r\n      .set(updateData)\r\n      .where(and(\r\n        eq(schema.customerAddresses.id, addressId),\r\n        eq(schema.customerAddresses.customerId, customerId)\r\n      ))\r\n      .returning();\r\n\r\n    res.json(updatedAddress);\r\n  } catch (error) {\r\n    res.status(500).json({ error: \"خطأ في الخادم\" });\r\n  }\r\n});\r\n\r\n// حذف عنوان\r\nrouter.delete(\"/:customerId/addresses/:addressId\", async (req, res) => {\r\n  try {\r\n    const { customerId, addressId } = req.params;\r\n\r\n    await db.delete(schema.customerAddresses)\r\n      .where(and(\r\n        eq(schema.customerAddresses.id, addressId),\r\n        eq(schema.customerAddresses.customerId, customerId)\r\n      ));\r\n\r\n    res.json({ success: true });\r\n  } catch (error) {\r\n    res.status(500).json({ error: \"خطأ في الخادم\" });\r\n  }\r\n});\r\n\r\n// جلب طلبات العميل\r\nrouter.get(\"/:id/orders\", async (req, res) => {\r\n  try {\r\n    const { id } = req.params;\r\n    const { page = 1, limit = 10 } = req.query;\r\n    const offset = (Number(page) - 1) * Number(limit);\r\n\r\n    const orders = await db.query.orders.findMany({\r\n      where: eq(schema.orders.customerId, id),\r\n      with: {\r\n        restaurantId: true,\r\n        driverId: true\r\n      },\r\n      limit: Number(limit),\r\n      offset,\r\n      orderBy: desc(schema.orders.createdAt)\r\n    });\r\n\r\n    res.json(orders);\r\n  } catch (error) {\r\n    res.status(500).json({ error: \"خطأ في الخادم\" });\r\n  }\r\n});\r\n\r\n// تقييم طلب\r\nrouter.post(\"/orders/:orderId/review\", async (req, res) => {\r\n  try {\r\n    const { orderId } = req.params;\r\n    const { customerId, rating, comment, foodQuality, deliverySpeed, packaging, driverService } = req.body;\r\n\r\n    // تحديث تقييم الطلب\r\n    await db.update(schema.orders)\r\n      .set({ rating, review: comment })\r\n      .where(eq(schema.orders.id, orderId));\r\n\r\n    // إضافة مراجعة مفصلة\r\n    const [newReview] = await db.insert(schema.reviews)\r\n      .values({\r\n        customerId,\r\n        orderId,\r\n        rating,\r\n        comment,\r\n        foodQuality,\r\n        deliverySpeed,\r\n        packaging,\r\n        driverService\r\n      })\r\n      .returning();\r\n\r\n    res.json(newReview);\r\n  } catch (error) {\r\n    res.status(500).json({ error: \"خطأ في الخادم\" });\r\n  }\r\n});\r\n\r\nexport { router as customerRoutes };","size_bytes":5978},"server/routes/driver.ts":{"content":"import express from \"express\";\nimport { db } from \"../db.js\";\nimport * as schema from \"../../shared/schema.js\";\nimport { eq, desc, and, or, sql } from \"drizzle-orm\";\n\nconst router = express.Router();\n\n// Middleware للتحقق من صلاحيات السائق\nconst requireDriver = async (req: any, res: any, next: any) => {\n  try {\n    const authHeader = req.headers.authorization;\n    if (!authHeader) {\n      return res.status(401).json({ error: \"غير مصرح\" });\n    }\n\n    const token = authHeader.split(' ')[1];\n    const session = await db.query.adminSessions.findFirst({\n      where: eq(schema.adminSessions.token, token),\n    });\n\n    if (!session || session.expiresAt < new Date()) {\n      return res.status(401).json({ error: \"جلسة منتهية الصلاحية\" });\n    }\n\n    const driver = await db.query.adminUsers.findFirst({\n      where: eq(schema.adminUsers.id, session.adminId!)\n    });\n\n    if (!driver || driver.userType !== 'driver') {\n      return res.status(403).json({ error: \"صلاحيات غير كافية\" });\n    }\n\n    req.driver = driver;\n    next();\n  } catch (error) {\n    console.error(\"خطأ في التحقق من صلاحيات السائق:\", error);\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n};\n\n// تسجيل دخول السائق\nrouter.post(\"/login\", async (req, res) => {\n  try {\n    const { phone, password } = req.body;\n\n    const driver = await db.query.adminUsers.findFirst({\n      where: and(\n        eq(schema.adminUsers.phone, phone),\n        eq(schema.adminUsers.userType, \"driver\")\n      )\n    });\n\n    if (!driver || driver.password !== password) {\n      return res.status(401).json({ error: \"بيانات دخول خاطئة\" });\n    }\n\n    if (!driver.isActive) {\n      return res.status(401).json({ error: \"الحساب غير نشط\" });\n    }\n\n    // إنشاء جلسة جديدة\n    const token = `driver_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n    const expiresAt = new Date(Date.now() + 24 * 60 * 60 * 1000); // 24 ساعة\n\n    await db.insert(schema.adminSessions).values({\n      adminId: driver.id,\n      token,\n      userType: \"driver\",\n      expiresAt\n    });\n\n    res.json({\n      success: true,\n      token,\n      driver: {\n        id: driver.id,\n        name: driver.name,\n        phone: driver.phone,\n        userType: driver.userType\n      }\n    });\n  } catch (error) {\n    console.error(\"خطأ في تسجيل دخول السائق:\", error);\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\n// تسجيل خروج السائق\nrouter.post(\"/logout\", requireDriver, async (req: any, res) => {\n  try {\n    const authHeader = req.headers.authorization;\n    const token = authHeader.split(' ')[1];\n\n    await db.delete(schema.adminSessions)\n      .where(eq(schema.adminSessions.token, token));\n\n    res.json({ success: true });\n  } catch (error) {\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\n// لوحة معلومات السائق\nrouter.get(\"/dashboard\", requireDriver, async (req: any, res) => {\n  try {\n    const driverId = req.driver.id;\n    \n    // إحصائيات السائق\n    const [todayStats] = await db.select({\n      todayOrders: sql<number>`COUNT(CASE WHEN DATE(${schema.orders.createdAt}) = CURRENT_DATE THEN 1 END)`,\n      todayEarnings: sql<number>`COALESCE(SUM(CASE WHEN DATE(${schema.orders.createdAt}) = CURRENT_DATE THEN ${schema.orders.driverEarnings} END), 0)`,\n      completedToday: sql<number>`COUNT(CASE WHEN DATE(${schema.orders.createdAt}) = CURRENT_DATE AND ${schema.orders.status} = 'delivered' THEN 1 END)`,\n      totalOrders: sql<number>`COUNT(*)`,\n      totalEarnings: sql<number>`COALESCE(SUM(${schema.orders.driverEarnings}), 0)`,\n      averageRating: sql<number>`COALESCE(AVG(${schema.orders.rating}), 0)`\n    }).from(schema.orders)\n      .where(eq(schema.orders.driverId, driverId));\n\n    // الطلبات المتاحة (غير مُعيَّنة لسائق)\n    const availableOrders = await db.query.orders.findMany({\n      where: and(\n        eq(schema.orders.status, \"confirmed\"),\n        sql`${schema.orders.driverId} IS NULL`\n      ),\n      orderBy: desc(schema.orders.createdAt),\n      limit: 10\n    });\n\n    // الطلبات الحالية للسائق\n    const currentOrders = await db.query.orders.findMany({\n      where: and(\n        eq(schema.orders.driverId, driverId),\n        or(\n          eq(schema.orders.status, \"picked_up\"),\n          eq(schema.orders.status, \"ready\")\n        )\n      ),\n      orderBy: desc(schema.orders.createdAt)\n    });\n\n    res.json({\n      stats: todayStats,\n      availableOrders,\n      currentOrders\n    });\n  } catch (error) {\n    console.error(\"خطأ في لوحة معلومات السائق:\", error);\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\n// قبول طلب\nrouter.post(\"/orders/:id/accept\", requireDriver, async (req: any, res) => {\n  try {\n    const { id } = req.params;\n    const driverId = req.driver.id;\n\n    // التحقق من أن الطلب متاح\n    const order = await db.query.orders.findFirst({\n      where: and(\n        eq(schema.orders.id, id),\n        eq(schema.orders.status, \"confirmed\"),\n        sql`${schema.orders.driverId} IS NULL`\n      )\n    });\n\n    if (!order) {\n      return res.status(400).json({ error: \"الطلب غير متاح\" });\n    }\n\n    // تعيين السائق للطلب\n    const [updatedOrder] = await db.update(schema.orders)\n      .set({ \n        driverId,\n        status: \"ready\",\n        updatedAt: new Date()\n      })\n      .where(eq(schema.orders.id, id))\n      .returning();\n\n    // حساب أرباح السائق (مثلاً 80% من رسوم التوصيل)\n    const driverEarnings = Number(order.deliveryFee) * 0.8;\n    await db.update(schema.orders)\n      .set({ driverEarnings })\n      .where(eq(schema.orders.id, id));\n\n    // إضافة تتبع للطلب\n    await db.insert(schema.orderTracking).values({\n      orderId: id,\n      status: \"ready\",\n      message: `تم قبول الطلب من قبل السائق ${req.driver.name}`,\n      createdBy: driverId,\n      createdByType: 'driver'\n    });\n\n    res.json(updatedOrder);\n  } catch (error) {\n    console.error(\"خطأ في قبول الطلب:\", error);\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\n// تحديث حالة الطلب\nrouter.put(\"/orders/:id/status\", requireDriver, async (req: any, res) => {\n  try {\n    const { id } = req.params;\n    const { status, location } = req.body;\n    const driverId = req.driver.id;\n\n    // التحقق من أن الطلب مُعيَّن للسائق\n    const order = await db.query.orders.findFirst({\n      where: and(\n        eq(schema.orders.id, id),\n        eq(schema.orders.driverId, driverId)\n      )\n    });\n\n    if (!order) {\n      return res.status(403).json({ error: \"غير مصرح بتحديث هذا الطلب\" });\n    }\n\n    const updateData: any = { \n      status, \n      updatedAt: new Date() \n    };\n\n    if (status === 'delivered') {\n      updateData.actualDeliveryTime = new Date();\n    }\n\n    const [updatedOrder] = await db.update(schema.orders)\n      .set(updateData)\n      .where(eq(schema.orders.id, id))\n      .returning();\n\n    // إضافة تتبع للطلب\n    await db.insert(schema.orderTracking).values({\n      orderId: id,\n      status,\n      message: getStatusMessage(status),\n      location: location ? JSON.stringify(location) : null,\n      createdBy: driverId,\n      createdByType: 'driver'\n    });\n\n\n    res.json(updatedOrder);\n  } catch (error) {\n    console.error(\"خطأ في تحديث حالة الطلب:\", error);\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\n// جلب تفاصيل الطلب\nrouter.get(\"/orders/:id\", requireDriver, async (req: any, res) => {\n  try {\n    const { id } = req.params;\n    const driverId = req.driver.id;\n\n    const order = await db.query.orders.findFirst({\n      where: and(\n        eq(schema.orders.id, id),\n        eq(schema.orders.driverId, driverId)\n      ),\n    });\n\n    if (!order) {\n      return res.status(404).json({ error: \"الطلب غير موجود\" });\n    }\n\n    // جلب تتبع الطلب\n    const tracking = await db.query.orderTracking.findMany({\n      where: eq(schema.orderTracking.orderId, id),\n      orderBy: desc(schema.orderTracking.timestamp!)\n    });\n\n    res.json({\n      ...order,\n      tracking\n    });\n  } catch (error) {\n    console.error(\"خطأ في جلب تفاصيل الطلب:\", error);\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\n// جلب تاريخ الطلبات\nrouter.get(\"/orders\", requireDriver, async (req: any, res) => {\n  try {\n    const driverId = req.driver.id;\n    const { page = 1, limit = 20, status } = req.query;\n    const offset = (Number(page) - 1) * Number(limit);\n\n    let whereConditions = [eq(schema.orders.driverId, driverId)];\n    \n    if (status && status !== 'all') {\n      whereConditions.push(eq(schema.orders.status, status as string));\n    }\n\n    const orders = await db.query.orders.findMany({\n      where: and(...whereConditions),\n      limit: Number(limit),\n      offset,\n      orderBy: desc(schema.orders.createdAt)\n    });\n\n    res.json(orders);\n  } catch (error) {\n    console.error(\"خطأ في جلب تاريخ الطلبات:\", error);\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\n// إحصائيات السائق المفصلة\nrouter.get(\"/stats\", requireDriver, async (req: any, res) => {\n  try {\n    const driverId = req.driver.id;\n    const { period = 'week' } = req.query;\n\n    let dateFilter;\n    switch (period) {\n      case 'today':\n        dateFilter = sql`DATE(${schema.orders.createdAt}) = CURRENT_DATE`;\n        break;\n      case 'week':\n        dateFilter = sql`${schema.orders.createdAt} >= CURRENT_DATE - INTERVAL '7 days'`;\n        break;\n      case 'month':\n        dateFilter = sql`${schema.orders.createdAt} >= CURRENT_DATE - INTERVAL '30 days'`;\n        break;\n      default:\n        dateFilter = sql`1=1`;\n    }\n\n    const [stats] = await db.select({\n      totalOrders: sql<number>`COUNT(*)`,\n      completedOrders: sql<number>`COUNT(CASE WHEN ${schema.orders.status} = 'delivered' THEN 1 END)`,\n      cancelledOrders: sql<number>`COUNT(CASE WHEN ${schema.orders.status} = 'cancelled' THEN 1 END)`,\n      totalEarnings: sql<number>`COALESCE(SUM(${schema.orders.driverEarnings}), 0)`,\n      averageRating: sql<number>`COALESCE(AVG(${schema.orders.rating}), 0)`,\n      totalRevenue: sql<number>`COALESCE(SUM(${schema.orders.total}), 0)`\n    }).from(schema.orders)\n      .where(and(\n        eq(schema.orders.driverId, driverId),\n        dateFilter\n      ));\n\n    // إحصائيات يومية للأسبوع الماضي\n    const dailyStats = await db.select({\n      date: sql<string>`DATE(${schema.orders.createdAt})`,\n      orders: sql<number>`COUNT(*)`,\n      earnings: sql<number>`COALESCE(SUM(${schema.orders.driverEarnings}), 0)`\n    }).from(schema.orders)\n      .where(and(\n        eq(schema.orders.driverId, driverId),\n        sql`${schema.orders.createdAt} >= CURRENT_DATE - INTERVAL '7 days'`\n      ))\n      .groupBy(sql`DATE(${schema.orders.createdAt})`)\n      .orderBy(sql`DATE(${schema.orders.createdAt})`);\n\n    res.json({\n      summary: stats,\n      dailyStats\n    });\n  } catch (error) {\n    console.error(\"خطأ في جلب إحصائيات السائق:\", error);\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\n// تحديث الملف الشخصي\nrouter.put(\"/profile\", requireDriver, async (req: any, res) => {\n  try {\n    const driverId = req.driver.id;\n    const updateData = req.body;\n\n    // إزالة الحقول الحساسة\n    delete updateData.password;\n    delete updateData.userType;\n    delete updateData.id;\n\n    const [updatedDriver] = await db.update(schema.adminUsers)\n      .set({ ...updateData, updatedAt: new Date() })\n      .where(eq(schema.adminUsers.id, driverId))\n      .returning();\n\n    res.json(updatedDriver);\n  } catch (error) {\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\n// تغيير كلمة المرور\nrouter.put(\"/change-password\", requireDriver, async (req: any, res) => {\n  try {\n    const driverId = req.driver.id;\n    const { currentPassword, newPassword } = req.body;\n\n    // التحقق من كلمة المرور الحالية\n    const driver = await db.query.adminUsers.findFirst({\n      where: eq(schema.adminUsers.id, driverId)\n    });\n\n    if (!driver || driver.password !== currentPassword) {\n      return res.status(400).json({ error: \"كلمة المرور الحالية خاطئة\" });\n    }\n\n    // تحديث كلمة المرور\n    await db.update(schema.adminUsers)\n      .set({ password: newPassword, updatedAt: new Date() })\n      .where(eq(schema.adminUsers.id, driverId));\n\n    res.json({ success: true, message: \"تم تغيير كلمة المرور بنجاح\" });\n  } catch (error) {\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\n// دالة مساعدة لرسائل الحالة\nfunction getStatusMessage(status: string): string {\n  const messages: { [key: string]: string } = {\n    'ready': 'السائق في الطريق لاستلام الطلب',\n    'picked_up': 'تم استلام الطلب وهو في الطريق إليك',\n    'delivered': 'تم توصيل الطلب بنجاح',\n    'cancelled': 'تم إلغاء الطلب'\n  };\n  \n  return messages[status] || `تم تحديث حالة الطلب إلى: ${status}`;\n}\n\nexport { router as driverRoutes };","size_bytes":13641},"server/routes/public.ts":{"content":"import express from \"express\";\nimport { db } from \"../db.js\";\nimport * as schema from \"../../shared/schema.js\";\nimport { eq, desc, and, or, like, sql } from \"drizzle-orm\";\n\nconst router = express.Router();\n\n// جلب التصنيفات\nrouter.get(\"/categories\", async (req, res) => {\n  try {\n    const categories = await db.query.categories.findMany({\n      where: eq(schema.categories.isActive, true),\n      orderBy: [schema.categories.sortOrder, schema.categories.name]\n    });\n    \n    res.json(categories);\n  } catch (error) {\n    console.error(\"خطأ في جلب التصنيفات:\", error);\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\n// جلب المطاعم\nrouter.get(\"/restaurants\", async (req, res) => {\n  try {\n    const { categoryId, search, page = 1, limit = 20 } = req.query;\n    const offset = (Number(page) - 1) * Number(limit);\n\n    let whereConditions = [];\n    \n    if (categoryId && categoryId !== 'all') {\n      whereConditions.push(eq(schema.restaurants.categoryId, categoryId as string));\n    }\n    \n    if (search) {\n      whereConditions.push(\n        or(\n          like(schema.restaurants.name, `%${search}%`),\n          like(schema.restaurants.description, `%${search}%`)\n        )\n      );\n    }\n\n    const restaurants = await db.query.restaurants.findMany({\n      where: and(...whereConditions),\n      limit: Number(limit),\n      offset,\n      orderBy: [schema.restaurants.name]\n    });\n\n    res.json(restaurants);\n  } catch (error) {\n    console.error(\"خطأ في جلب المطاعم:\", error);\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\n// جلب تفاصيل مطعم محدد\nrouter.get(\"/restaurants/:id\", async (req, res) => {\n  try {\n    const { id } = req.params;\n    \n    const restaurant = await db.query.restaurants.findFirst({\n      where: eq(schema.restaurants.id, id)\n    });\n\n    if (!restaurant) {\n      return res.status(404).json({ error: \"المطعم غير موجود\" });\n    }\n\n    res.json(restaurant);\n  } catch (error) {\n    console.error(\"خطأ في جلب تفاصيل المطعم:\", error);\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\n// جلب قائمة مطعم\nrouter.get(\"/restaurants/:id/menu\", async (req, res) => {\n  try {\n    const { id } = req.params;\n    \n    // التحقق من وجود المطعم\n    const restaurant = await db.query.restaurants.findFirst({\n      where: eq(schema.restaurants.id, id)\n    });\n\n    if (!restaurant) {\n      return res.status(404).json({ error: \"المطعم غير موجود\" });\n    }\n\n    // جلب عناصر القائمة مع الأقسام\n    const menuItems = await db.query.menuItems.findMany({\n      where: eq(schema.menuItems.restaurantId, id),\n      orderBy: [schema.menuItems.name]\n    });\n\n    // تجميع العناصر حسب القسم\n    const sections = await db.query.restaurantSections.findMany({\n      orderBy: [schema.restaurantSections.name]\n    });\n\n    const menuBySection = sections.map(section => ({\n      ...section,\n      items: menuItems.filter(item => item.category === section.name)\n    })).filter(section => section.items.length > 0);\n\n    res.json({\n      restaurant,\n      menu: menuBySection,\n      allItems: menuItems\n    });\n  } catch (error) {\n    console.error(\"خطأ في جلب قائمة المطعم:\", error);\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\n// جلب العروض الخاصة\nrouter.get(\"/special-offers\", async (req, res) => {\n  try {\n    const { restaurantId, categoryId } = req.query;\n    \n    let whereConditions = [eq(schema.specialOffers.isActive, true)];\n    \n    if (restaurantId) {\n      whereConditions.push(eq(schema.specialOffers.restaurantId, restaurantId as string));\n    }\n    \n    if (categoryId) {\n      whereConditions.push(eq(schema.specialOffers.categoryId, categoryId as string));\n    }\n\n    const offers = await db.query.specialOffers.findMany({\n      where: and(...whereConditions),\n      orderBy: [desc(schema.specialOffers.createdAt)]\n    });\n\n    res.json(offers);\n  } catch (error) {\n    console.error(\"خطأ في جلب العروض الخاصة:\", error);\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\n// إنشاء طلب جديد\nrouter.post(\"/orders\", async (req, res) => {\n  try {\n    const orderData = req.body;\n    \n    // توليد رقم طلب فريد\n    const orderNumber = `ORD${Date.now()}${Math.floor(Math.random() * 1000)}`;\n    \n    const newOrderData = {\n      ...orderData,\n      orderNumber,\n      status: \"pending\",\n      paymentStatus: \"pending\"\n    };\n\n    const [newOrder] = await db.insert(schema.orders)\n      .values(newOrderData)\n      .returning();\n\n    // إضافة تتبع للطلب\n    await db.insert(schema.orderTracking).values({\n      orderId: newOrder.id,\n      status: \"pending\",\n      message: \"تم إنشاء الطلب بنجاح\",\n      createdByType: 'system'\n    });\n\n    // إشعار المطعم (يمكن إضافة WebSocket هنا)\n    \n    res.json(newOrder);\n  } catch (error) {\n    console.error(\"خطأ في إنشاء الطلب:\", error);\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\n// تتبع الطلب\nrouter.get(\"/orders/:id/track\", async (req, res) => {\n  try {\n    const { id } = req.params;\n    \n    const order = await db.query.orders.findFirst({\n      where: eq(schema.orders.id, id),\n    });\n\n    if (!order) {\n      return res.status(404).json({ error: \"الطلب غير موجود\" });\n    }\n\n    // جلب تتبع الطلب\n    const tracking = await db.query.orderTracking.findMany({\n      where: eq(schema.orderTracking.orderId, id),\n      orderBy: desc(schema.orderTracking.timestamp!)\n    });\n\n    res.json({\n      order,\n      tracking\n    });\n  } catch (error) {\n    console.error(\"خطأ في تتبع الطلب:\", error);\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\n// جلب إعدادات النظام العامة\nrouter.get(\"/settings\", async (req, res) => {\n  try {\n    const settings = await db.query.systemSettings.findMany({\n      where: eq(schema.systemSettings.isPublic, true)\n    });\n    \n    // تحويل الإعدادات إلى كائن\n    const settingsObject = settings.reduce((acc, setting) => {\n      acc[setting.key] = setting.value;\n      return acc;\n    }, {} as any);\n    \n    res.json(settingsObject);\n  } catch (error) {\n    console.error(\"خطأ في جلب الإعدادات:\", error);\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\n// البحث العام\nrouter.get(\"/search\", async (req, res) => {\n  try {\n    const { q, type = 'all' } = req.query;\n    \n    if (!q) {\n      return res.json({ restaurants: [], menuItems: [] });\n    }\n\n    const searchTerm = `%${q}%`;\n    let results: any = {};\n\n    if (type === 'all' || type === 'restaurants') {\n      results.restaurants = await db.query.restaurants.findMany({\n        where: and(\n          eq(schema.restaurants.isActive, true),\n          or(\n            like(schema.restaurants.name, searchTerm),\n            like(schema.restaurants.description, searchTerm)\n          )\n        ),\n        limit: 10\n      });\n    }\n\n    if (type === 'all' || type === 'menu') {\n      results.menuItems = await db.query.menuItems.findMany({\n        where: and(\n          or(\n            like(schema.menuItems.name, searchTerm),\n            like(schema.menuItems.description, searchTerm)\n          )\n        ),\n        limit: 20\n      });\n    }\n\n    res.json(results);\n  } catch (error) {\n    console.error(\"خطأ في البحث:\", error);\n    res.status(500).json({ error: \"خطأ في الخادم\" });\n  }\n});\n\nexport { router as publicRoutes };","size_bytes":7754},"client/src/components/CartButton.tsx":{"content":"import { ShoppingCart } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { useCart } from '../context/CartContext';\nimport { useLocation } from 'wouter';\n\nexport default function CartButton() {\n  const { getItemCount } = useCart();\n  const [, setLocation] = useLocation();\n  const itemCount = getItemCount();\n\n  return (\n    <div className=\"floating-cart\">\n      <Button\n        className=\"relative bg-primary text-primary-foreground p-4 rounded-full shadow-lg hover:bg-primary/90\"\n        onClick={() => setLocation('/cart')}\n        data-testid=\"button-floating-cart\"\n      >\n        <ShoppingCart className=\"h-6 w-6\" />\n        <span\n          className=\"absolute -top-2 -right-2 bg-destructive text-destructive-foreground text-xs rounded-full h-6 w-6 flex items-center justify-center\"\n          data-testid=\"text-cart-count\"\n        >\n          {itemCount}\n        </span>\n      </Button>\n    </div>\n  );\n}\n","size_bytes":939},"client/src/components/CategoryTabs.tsx":{"content":"import { Button } from '@/components/ui/button';\nimport { useQuery } from '@tanstack/react-query';\nimport type { Category } from '@shared/schema';\nimport { useUiSettings } from '@/context/UiSettingsContext';\n\ninterface CategoryTabsProps {\n  selectedCategory: string | null;\n  onCategoryChange: (categoryId: string | null) => void;\n}\n\nexport default function CategoryTabs({ selectedCategory, onCategoryChange }: CategoryTabsProps) {\n  const { data: categories, isLoading } = useQuery<Category[]>({\n    queryKey: ['/api/categories'],\n  });\n  const { isFeatureEnabled } = useUiSettings();\n\n  // لا تعرض المكون إذا كان معطل\n  if (!isFeatureEnabled('show_categories')) {\n    return null;\n  }\n\n  if (isLoading) {\n    return (\n      <div className=\"flex gap-3 overflow-x-auto pb-2 no-scrollbar px-4\">\n        {[...Array(5)].map((_, i) => (\n          <div key={i} className=\"bg-muted rounded-full h-10 w-24 animate-pulse\" />\n        ))}\n      </div>\n    );\n  }\n\n  return (\n    <section className=\"px-4 mb-6\">\n      <div className=\"flex gap-3 overflow-x-auto pb-2 no-scrollbar\">\n        <Button\n          variant={selectedCategory === null ? \"default\" : \"secondary\"}\n          className=\"whitespace-nowrap font-medium\"\n          onClick={() => onCategoryChange(null)}\n          data-testid=\"category-tab-all\"\n        >\n          <i className=\"fas fa-th-large ml-2\"></i>\n          الكل\n        </Button>\n        {categories?.map((category) => (\n          <Button\n            key={category.id}\n            variant={selectedCategory === category.id ? \"default\" : \"secondary\"}\n            className=\"whitespace-nowrap font-medium\"\n            onClick={() => onCategoryChange(category.id)}\n            data-testid={`category-tab-${category.id}`}\n          >\n            <i className={`${category.icon} ml-2`}></i>\n            {category.name}\n          </Button>\n        ))}\n      </div>\n    </section>\n  );\n}\n","size_bytes":1921},"client/src/components/DriverControlPanel.tsx":{"content":"import React from 'react';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Switch } from '@/components/ui/switch';\nimport { Label } from '@/components/ui/label';\nimport { useUiSettings } from '@/context/UiSettingsContext';\nimport { Truck, DollarSign, Bell, Navigation, MapPin, Clock } from 'lucide-react';\n\nexport function DriverControlPanel() {\n  const { loading, updateSetting, isFeatureEnabled } = useUiSettings();\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center p-8\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 dark:border-gray-100\"></div>\n      </div>\n    );\n  }\n\n  const handleToggle = (key: string, enabled: boolean) => {\n    updateSetting(key, enabled.toString());\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-2 mb-6\">\n        <Truck className=\"h-6 w-6\" />\n        <h2 className=\"text-2xl font-bold\">إعدادات تطبيق السائق</h2>\n      </div>\n\n      {/* إعدادات الأرباح والمعلومات */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <DollarSign className=\"h-5 w-5\" />\n            إعدادات الأرباح والمعلومات\n          </CardTitle>\n          <CardDescription>\n            تحكم في عرض معلومات الأرباح والإحصائيات\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"flex items-center justify-between\">\n            <Label htmlFor=\"driver_show_earnings\" className=\"flex-1\">\n              عرض الأرباح للسائق\n            </Label>\n            <Switch\n              id=\"driver_show_earnings\"\n              checked={isFeatureEnabled('driver_show_earnings')}\n              onCheckedChange={(checked) => handleToggle('driver_show_earnings', checked)}\n            />\n          </div>\n\n          <div className=\"flex items-center justify-between\">\n            <Label htmlFor=\"driver_show_customer_info\" className=\"flex-1\">\n              عرض معلومات العميل\n            </Label>\n            <Switch\n              id=\"driver_show_customer_info\"\n              checked={isFeatureEnabled('driver_show_customer_info')}\n              onCheckedChange={(checked) => handleToggle('driver_show_customer_info', checked)}\n            />\n          </div>\n\n          <div className=\"flex items-center justify-between\">\n            <Label htmlFor=\"driver_show_order_details\" className=\"flex-1\">\n              عرض تفاصيل الطلب\n            </Label>\n            <Switch\n              id=\"driver_show_order_details\"\n              checked={isFeatureEnabled('driver_show_order_details')}\n              onCheckedChange={(checked) => handleToggle('driver_show_order_details', checked)}\n            />\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* إعدادات الطلبات والتوصيل */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Clock className=\"h-5 w-5\" />\n            إعدادات الطلبات والتوصيل\n          </CardTitle>\n          <CardDescription>\n            تحكم في عرض الطلبات وإعدادات التوصيل\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"flex items-center justify-between\">\n            <Label htmlFor=\"driver_show_available_orders\" className=\"flex-1\">\n              عرض الطلبات المتاحة\n            </Label>\n            <Switch\n              id=\"driver_show_available_orders\"\n              checked={isFeatureEnabled('driver_show_available_orders')}\n              onCheckedChange={(checked) => handleToggle('driver_show_available_orders', checked)}\n            />\n          </div>\n\n          <div className=\"flex items-center justify-between\">\n            <Label htmlFor=\"driver_auto_refresh\" className=\"flex-1\">\n              التحديث التلقائي للطلبات\n            </Label>\n            <Switch\n              id=\"driver_auto_refresh\"\n              checked={isFeatureEnabled('driver_auto_refresh')}\n              onCheckedChange={(checked) => handleToggle('driver_auto_refresh', checked)}\n            />\n          </div>\n\n          <div className=\"flex items-center justify-between\">\n            <Label htmlFor=\"driver_show_status_toggle\" className=\"flex-1\">\n              عرض مفتاح تغيير الحالة\n            </Label>\n            <Switch\n              id=\"driver_show_status_toggle\"\n              checked={isFeatureEnabled('driver_show_status_toggle')}\n              onCheckedChange={(checked) => handleToggle('driver_show_status_toggle', checked)}\n            />\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* إعدادات التنقل والموقع */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Navigation className=\"h-5 w-5\" />\n            إعدادات التنقل والموقع\n          </CardTitle>\n          <CardDescription>\n            تحكم في خدمات التنقل والموقع\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"flex items-center justify-between\">\n            <Label htmlFor=\"driver_show_location_button\" className=\"flex-1\">\n              عرض زر تحديث الموقع\n            </Label>\n            <Switch\n              id=\"driver_show_location_button\"\n              checked={isFeatureEnabled('driver_show_location_button')}\n              onCheckedChange={(checked) => handleToggle('driver_show_location_button', checked)}\n            />\n          </div>\n\n          <div className=\"flex items-center justify-between\">\n            <Label htmlFor=\"driver_show_navigation_help\" className=\"flex-1\">\n              عرض مساعدة التنقل\n            </Label>\n            <Switch\n              id=\"driver_show_navigation_help\"\n              checked={isFeatureEnabled('driver_show_navigation_help')}\n              onCheckedChange={(checked) => handleToggle('driver_show_navigation_help', checked)}\n            />\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* إعدادات الإشعارات */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Bell className=\"h-5 w-5\" />\n            إعدادات الإشعارات\n          </CardTitle>\n          <CardDescription>\n            تحكم في الإشعارات والتنبيهات\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"flex items-center justify-between\">\n            <Label htmlFor=\"driver_notification_sound\" className=\"flex-1\">\n              تفعيل صوت الإشعارات\n            </Label>\n            <Switch\n              id=\"driver_notification_sound\"\n              checked={isFeatureEnabled('driver_notification_sound')}\n              onCheckedChange={(checked) => handleToggle('driver_notification_sound', checked)}\n            />\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}","size_bytes":7338},"client/src/components/Layout.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { useLocation } from 'wouter';\nimport { Home, Search, Receipt, User, ShoppingCart, Moon, Sun, Menu, X, Settings, Shield, MapPin, Clock, Truck } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Sheet, SheetContent, SheetHeader, SheetTitle, SheetTrigger } from '@/components/ui/sheet';\nimport { useTheme } from '../context/ThemeContext';\nimport { useCart } from '../context/CartContext';\nimport CartButton from './CartButton';\nimport { useToast } from '@/hooks/use-toast';\n\ninterface LayoutProps {\n  children: React.ReactNode;\n}\n\nexport default function Layout({ children }: LayoutProps) {\n  const [location, setLocation] = useLocation();\n  const { theme, toggleTheme } = useTheme();\n  const { getItemCount } = useCart();\n  const { toast } = useToast();\n  const [sidebarOpen, setSidebarOpen] = useState(false);\n  const [logoClickCount, setLogoClickCount] = useState(0);\n  const [showAdminButtons, setShowAdminButtons] = useState(false);\n  \n  // States for profile click counter\n  const [profileClickCount, setProfileClickCount] = useState(0);\n  const [lastProfileClickTime, setLastProfileClickTime] = useState(0);\n\n  const isHomePage = location === '/';\n  const isAdminPage = location.startsWith('/admin');\n  const isDeliveryPage = location.startsWith('/delivery');\n\n  const navigationItems = [\n    { icon: Home, label: 'الرئيسية', path: '/', testId: 'nav-home' },\n    { icon: Search, label: 'البحث', path: '/search', testId: 'nav-search' },\n    { icon: Receipt, label: 'طلباتي', path: '/orders', testId: 'nav-orders' },\n    { icon: User, label: 'الملف الشخصي', path: '/profile', testId: 'nav-profile' },\n  ];\n\n  const sidebarMenuItems = [\n    { icon: User, label: 'الملف الشخصي', path: '/profile', testId: 'sidebar-profile' },\n    { icon: Receipt, label: 'طلباتي', path: '/orders', testId: 'sidebar-orders' },\n    { icon: MapPin, label: 'العناوين المحفوظة', path: '/addresses', testId: 'sidebar-addresses' },\n    { icon: Clock, label: 'تتبع الطلبات', path: '/orders', testId: 'sidebar-tracking' },\n    { icon: Settings, label: 'الإعدادات', path: '/settings', testId: 'sidebar-settings' },\n    { icon: Shield, label: 'سياسة الخصوصية', path: '/privacy', testId: 'sidebar-privacy' },\n  ];\n\n  // وظيفة التعامل مع النقر على أيقونة الملف الشخصي\n  const handleProfileIconClick = () => {\n    const currentTime = Date.now();\n    \n    // إذا مر أكثر من ثانيتين منذ آخر نقرة، نعيد العداد\n    if (currentTime - lastProfileClickTime > 2000) {\n      setProfileClickCount(1);\n    } else {\n      setProfileClickCount(prev => prev + 1);\n    }\n    \n    setLastProfileClickTime(currentTime);\n\n    // إذا وصل إلى 5 نقرات\n    if (profileClickCount + 1 === 5) {\n      toast({\n        title: \"الوصول إلى صفحة تسجيل الدخول\",\n        description: \"سيتم الانتقال إلى صفحة تسجيل الدخول للإدارة\",\n      });\n      \n      // الانتقال إلى صفحة تسجيل الدخول\n      window.location.href = '/admin-login';\n      setProfileClickCount(0);\n    } else if (profileClickCount + 1 > 2) {\n      // إشعار بعد النقرات الأولى\n      toast({\n        title: `نقرة ${profileClickCount + 1} من 5`,\n        description: \"استمر للنقل للوصول إلى صفحة تسجيل الدخول\",\n      });\n    }\n  };\n\n  // إعادة تعيين عداد النقرات بعد 2 ثانية\n  useEffect(() => {\n    if (profileClickCount > 0) {\n      const timer = setTimeout(() => {\n        setProfileClickCount(0);\n      }, 2000);\n\n      return () => clearTimeout(timer);\n    }\n  }, [profileClickCount, lastProfileClickTime]);\n\n  return (\n    <div className=\"max-w-md mx-auto bg-background min-h-screen shadow-xl relative\">\n      {/* Header */}\n      <header className=\"bg-card border-b border-border p-4 sticky top-0 z-40\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <div className=\"flex items-center gap-3\">\n            <Sheet open={sidebarOpen} onOpenChange={setSidebarOpen}>\n              <SheetTrigger asChild>\n                <Button\n                  variant=\"ghost\"\n                  size=\"icon\"\n                  data-testid=\"button-menu\"\n                >\n                  <Menu className=\"h-5 w-5\" />\n                </Button>\n              </SheetTrigger>\n              <SheetContent side=\"right\" className=\"w-80\">\n                <SheetHeader>\n                  <SheetTitle className=\"text-right\">\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"w-12 h-12 bg-primary rounded-full flex items-center justify-center\">\n                        <User className=\"h-6 w-6 text-primary-foreground\" />\n                      </div>\n                      <div>\n                        <h3 className=\"text-lg font-bold text-foreground\">مرحباً بك</h3>\n                        <p className=\"text-sm text-muted-foreground\">في تطبيق السريع ون</p>\n                      </div>\n                    </div>\n                  </SheetTitle>\n                </SheetHeader>\n                \n                <div className=\"mt-8 space-y-2\">\n                  {sidebarMenuItems.map((item) => {\n                    const Icon = item.icon;\n                    return (\n                      <Button\n                        key={item.path}\n                        variant=\"ghost\"\n                        className=\"w-full justify-start gap-3 h-12\"\n                        onClick={() => {\n                          setLocation(item.path);\n                          setSidebarOpen(false);\n                        }}\n                        data-testid={item.testId}\n                      >\n                        <Icon className=\"h-5 w-5 text-primary\" />\n                        <span className=\"text-foreground\">{item.label}</span>\n                      </Button>\n                    );\n                  })}\n                  \n                  {/* أزرار المدير والسائقين - تظهر دائمًا */}\n                  <div className=\"border-t border-border pt-4 mt-4\">\n                    <Button\n                      variant=\"ghost\"\n                      className=\"w-full justify-start gap-3 h-12\"\n                      onClick={() => {\n                        window.location.href = '/admin-login';\n                        setSidebarOpen(false);\n                      }}\n                      data-testid=\"sidebar-admin\"\n                    >\n                      <Settings className=\"h-5 w-5 text-blue-500\" />\n                      <span className=\"text-foreground\">لوحة التحكم</span>\n                    </Button>\n                    \n                    <Button\n                      variant=\"ghost\"\n                      className=\"w-full justify-start gap-3 h-12\"\n                      onClick={() => {\n                        window.location.href = '/admin-login?type=driver';\n                        setSidebarOpen(false);\n                      }}\n                      data-testid=\"sidebar-delivery\"\n                    >\n                      <Truck className=\"h-5 w-5 text-green-500\" />\n                      <span className=\"text-foreground\">تطبيق السائقين</span>\n                    </Button>\n                  </div>\n                </div>\n              </SheetContent>\n            </Sheet>\n            <div \n              className=\"text-center cursor-pointer\"\n              onClick={() => {\n                const newCount = logoClickCount + 1;\n                setLogoClickCount(newCount);\n                \n                if (newCount === 4) {\n                  setShowAdminButtons(true);\n                  setLogoClickCount(0);\n                  // الانتقال إلى صفحة تسجيل الدخول\n                  window.location.href = '/admin-login';\n                } else if (newCount > 4) {\n                  setLogoClickCount(0);\n                }\n                \n                // Reset counter after 3 seconds if not completed\n                setTimeout(() => {\n                  setLogoClickCount(0);\n                }, 3000);\n              }}\n            >\n              <h1 className=\"text-lg font-bold text-primary\">السريع ون</h1>\n              <p className=\"text-xs text-muted-foreground\">توصيل سريع</p>\n              {logoClickCount > 0 && logoClickCount < 4 && (\n                <div className=\"flex justify-center mt-1\">\n                  {Array.from({ length: 4 }, (_, i) => (\n                    <div\n                      key={i}\n                      className={`w-2 h-2 rounded-full mx-1 ${\n                        i < logoClickCount ? 'bg-primary' : 'bg-gray-300'\n                      }`}\n                    />\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              onClick={toggleTheme}\n              data-testid=\"button-theme-toggle\"\n            >\n              {theme === 'dark' ? (\n                <Sun className=\"h-5 w-5\" />\n              ) : (\n                <Moon className=\"h-5 w-5\" />\n              )}\n            </Button>\n            \n            {/* أيقونة الملف الشخصي مع خاصية النقر المتعدد */}\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              onClick={handleProfileIconClick}\n              className=\"relative\"\n              title=\"النقر 5 مرات للوصول إلى صفحة تسجيل الدخول\"\n              data-testid=\"button-profile\"\n            >\n              <User className=\"h-5 w-5\" />\n              \n              {/* مؤشر بصري للنقرات */}\n              {profileClickCount > 0 && (\n                <div className=\"absolute -top-1 -right-1 w-4 h-4 bg-primary rounded-full text-xs text-white flex items-center justify-center\">\n                  {profileClickCount}\n                </div>\n              )}\n            </Button>\n          </div>\n        </div>\n\n        {/* Search Bar - only show on home page */}\n        {isHomePage && (\n          <div className=\"relative\">\n            <input\n              type=\"text\"\n              placeholder=\"ابحث عن المطاعم والوجبات...\"\n              className=\"w-full bg-muted text-foreground placeholder-muted-foreground rounded-lg pr-12 pl-4 py-3 focus:outline-none focus:ring-2 focus:ring-primary\"\n              data-testid=\"input-search\"\n            />\n            <Search className=\"absolute right-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-muted-foreground\" />\n          </div>\n        )}\n      </header>\n\n      {/* Main Content */}\n      <main className=\"pb-20\">\n        {children}\n      </main>\n\n      {/* Bottom Navigation - hide on admin and delivery pages */}\n      {!isAdminPage && !isDeliveryPage && (\n        <nav className=\"fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-card border-t border-border px-4 py-2\">\n          <div className=\"flex justify-around items-center\">\n            {navigationItems.map((item) => {\n              const Icon = item.icon;\n              const isActive = location === item.path;\n              \n              return (\n                <Button\n                  key={item.path}\n                  variant=\"ghost\"\n                  className={`flex flex-col items-center gap-1 py-2 px-3 ${\n                    isActive\n                      ? 'text-primary'\n                      : 'text-muted-foreground hover:text-foreground'\n                  }`}\n                  onClick={() => setLocation(item.path)}\n                  data-testid={item.testId}\n                >\n                  <Icon className=\"h-5 w-5\" />\n                  <span className=\"text-xs\">{item.label}</span>\n                </Button>\n              );\n            })}\n          </div>\n        </nav>\n      )}\n\n      {/* Floating Cart Button - hide on admin and delivery pages */}\n      {getItemCount() > 0 && !isAdminPage && !isDeliveryPage && <CartButton />}\n    </div>\n  );\n}","size_bytes":12315},"client/src/components/LocationPermissionModal.tsx":{"content":"import { useState, useEffect } from 'react';\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogDescription,\n} from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { MapPin, Navigation, Shield } from 'lucide-react';\n\ninterface LocationPermissionModalProps {\n  onPermissionGranted: (position: GeolocationPosition) => void;\n  onPermissionDenied: () => void;\n}\n\nexport function LocationPermissionModal({ onPermissionGranted, onPermissionDenied }: LocationPermissionModalProps) {\n  const [isOpen, setIsOpen] = useState(false);\n  const [permissionStatus, setPermissionStatus] = useState<'unknown' | 'granted' | 'denied'>('unknown');\n\n  useEffect(() => {\n    checkPermissionStatus();\n  }, []);\n\n  const checkPermissionStatus = async () => {\n    if ('permissions' in navigator) {\n      try {\n        const permission = await navigator.permissions.query({ name: 'geolocation' as PermissionName });\n        if (permission.state === 'granted') {\n          setPermissionStatus('granted');\n          getCurrentLocation();\n        } else if (permission.state === 'denied') {\n          setPermissionStatus('denied');\n          setIsOpen(true);\n        } else {\n          setPermissionStatus('unknown');\n          setIsOpen(true);\n        }\n      } catch (error) {\n        console.error('Error checking permission:', error);\n        setIsOpen(true);\n      }\n    } else {\n      setIsOpen(true);\n    }\n  };\n\n  const getCurrentLocation = () => {\n    if ('geolocation' in navigator) {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          setPermissionStatus('granted');\n          onPermissionGranted(position);\n          setIsOpen(false);\n        },\n        (error) => {\n          console.error('Error getting location:', error);\n          setPermissionStatus('denied');\n          onPermissionDenied();\n          setIsOpen(false);\n        },\n        {\n          enableHighAccuracy: true,\n          timeout: 10000,\n          maximumAge: 60000\n        }\n      );\n    }\n  };\n\n  const requestLocationPermission = () => {\n    getCurrentLocation();\n  };\n\n  const handleDenyPermission = () => {\n    setPermissionStatus('denied');\n    onPermissionDenied();\n    setIsOpen(false);\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={setIsOpen}>\n      <DialogContent className=\"sm:max-w-md\" dir=\"rtl\">\n        <DialogHeader className=\"text-center\">\n          <div className=\"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-primary/10\">\n            <MapPin className=\"h-6 w-6 text-primary\" />\n          </div>\n          <DialogTitle className=\"text-xl font-bold\">\n            السماح بالوصول للموقع\n          </DialogTitle>\n          <DialogDescription className=\"text-center text-muted-foreground\">\n            نحتاج إلى معرفة موقعك لتوصيل طلباتك بدقة وعرض المطاعم القريبة منك\n          </DialogDescription>\n        </DialogHeader>\n\n        <div className=\"space-y-4\">\n          <div className=\"space-y-3\">\n            <div className=\"flex items-center gap-3 p-3 rounded-lg bg-primary/5\">\n              <Navigation className=\"h-5 w-5 text-primary flex-shrink-0\" />\n              <div className=\"text-sm\">\n                <div className=\"font-medium\">تحديد موقعك بدقة</div>\n                <div className=\"text-muted-foreground\">لضمان وصول الطلبات في الوقت المحدد</div>\n              </div>\n            </div>\n\n            <div className=\"flex items-center gap-3 p-3 rounded-lg bg-primary/5\">\n              <MapPin className=\"h-5 w-5 text-primary flex-shrink-0\" />\n              <div className=\"text-sm\">\n                <div className=\"font-medium\">عرض المطاعم القريبة</div>\n                <div className=\"text-muted-foreground\">اكتشف أفضل المطاعم في منطقتك</div>\n              </div>\n            </div>\n\n            <div className=\"flex items-center gap-3 p-3 rounded-lg bg-primary/5\">\n              <Shield className=\"h-5 w-5 text-primary flex-shrink-0\" />\n              <div className=\"text-sm\">\n                <div className=\"font-medium\">حماية خصوصيتك</div>\n                <div className=\"text-muted-foreground\">لن نشارك موقعك مع أطراف خارجية</div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"flex gap-3\">\n            <Button \n              variant=\"outline\" \n              onClick={handleDenyPermission}\n              className=\"flex-1\"\n            >\n              تخطي\n            </Button>\n            <Button \n              onClick={requestLocationPermission}\n              className=\"flex-1\"\n            >\n              السماح بالوصول\n            </Button>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}","size_bytes":4882},"client/src/components/MenuItemCard.tsx":{"content":"import { Card, CardContent } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport type { MenuItem } from '@shared/schema';\nimport { useCart } from '../context/CartContext';\nimport { useToast } from '@/hooks/use-toast';\n\ninterface MenuItemCardProps {\n  item: MenuItem;\n  disabled?: boolean;\n  disabledMessage?: string;\n}\n\nexport default function MenuItemCard({ item, disabled = false, disabledMessage }: MenuItemCardProps) {\n  const { addItem } = useCart();\n  const { toast } = useToast();\n\n  const handleAddToCart = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    \n    if (disabled && disabledMessage) {\n      toast({\n        title: \"لا يمكن الطلب\",\n        description: disabledMessage,\n        variant: \"destructive\",\n      });\n      return;\n    }\n    \n    addItem(item);\n    toast({\n      title: \"تمت الإضافة للسلة\",\n      description: `تم إضافة ${item.name} للسلة`,\n    });\n  };\n\n  const isSpecialOffer = item.isSpecialOffer && item.originalPrice;\n  const savings = isSpecialOffer ? item.originalPrice! - item.price : 0;\n\n  return (\n    <Card \n      className={`p-4 flex gap-4 hover:shadow-md transition-shadow ${\n        isSpecialOffer ? 'bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-200' : ''\n      }`}\n      data-testid={`menu-item-${item.id}`}\n    >\n      {isSpecialOffer && (\n        <Badge className=\"absolute top-2 left-2 bg-green-500 text-white\">\n          عرض خاص\n        </Badge>\n      )}\n      \n      <img\n        src={item.image}\n        alt={item.name}\n        className=\"w-20 h-20 object-cover rounded-lg flex-shrink-0\"\n      />\n      \n      <div className=\"flex-1\">\n        <h4 className=\"font-bold text-foreground mb-1\" data-testid={`menu-item-name-${item.id}`}>\n          {item.name}\n        </h4>\n        <p className=\"text-sm text-muted-foreground mb-2\" data-testid={`menu-item-description-${item.id}`}>\n          {item.description}\n        </p>\n        \n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-2\">\n            <span className={`text-lg font-bold ${isSpecialOffer ? 'text-green-600' : 'text-primary'}`}>\n              {item.price} ريال\n            </span>\n            {isSpecialOffer && (\n              <>\n                <span className=\"text-sm text-muted-foreground line-through\">\n                  {item.originalPrice} ريال\n                </span>\n                <Badge variant=\"secondary\" className=\"text-xs bg-green-100 text-green-700\">\n                  توفير {savings} ريال\n                </Badge>\n              </>\n            )}\n          </div>\n          \n          <Button\n            onClick={handleAddToCart}\n            className={isSpecialOffer ? 'bg-green-500 hover:bg-green-600 text-white' : ''}\n            disabled={!item.isAvailable || disabled}\n            data-testid={`button-add-to-cart-${item.id}`}\n          >\n            {item.isAvailable ? 'إضافة' : 'غير متوفر'}\n          </Button>\n        </div>\n      </div>\n    </Card>\n  );\n}\n","size_bytes":3135},"client/src/components/NotificationSystem.tsx":{"content":"import { useEffect, useState } from 'react';\r\nimport { useQuery } from '@tanstack/react-query';\r\nimport { Bell, Package, Truck, CheckCircle } from 'lucide-react';\r\nimport { Card, CardContent } from '@/components/ui/card';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { Button } from '@/components/ui/button';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport type { Order } from '@shared/schema';\r\n\r\ninterface NotificationSystemProps {\r\n  userType: 'admin' | 'driver' | 'customer';\r\n  userId?: string;\r\n}\r\n\r\nexport function NotificationSystem({ userType, userId }: NotificationSystemProps) {\r\n  const { toast } = useToast();\r\n  const [lastOrderCount, setLastOrderCount] = useState(0);\r\n  const [notifications, setNotifications] = useState<any[]>([]);\r\n\r\n  const { data: orders } = useQuery<Order[]>({\r\n    queryKey: ['/api/orders'],\r\n    refetchInterval: userType === 'admin' ? 5000 : userType === 'driver' ? 3000 : 10000,\r\n  });\r\n\r\n  const { data: driverOrders } = useQuery<Order[]>({\r\n    queryKey: ['/api/orders', { status: 'confirmed' }],\r\n    enabled: userType === 'driver',\r\n    refetchInterval: 3000,\r\n  });\r\n\r\n  // مراقبة الطلبات الجديدة للمدير\r\n  useEffect(() => {\r\n    if (userType === 'admin' && orders) {\r\n      const newOrderCount = orders.filter(order => order.status === 'pending').length;\r\n      \r\n      if (lastOrderCount > 0 && newOrderCount > lastOrderCount) {\r\n        const newOrders = newOrderCount - lastOrderCount;\r\n        toast({\r\n          title: \"طلبات جديدة!\",\r\n          description: `تم استلام ${newOrders} طلب جديد`,\r\n        });\r\n        \r\n        // إضافة إشعار للقائمة\r\n        setNotifications(prev => [...prev, {\r\n          id: Date.now(),\r\n          type: 'new_order',\r\n          title: 'طلب جديد',\r\n          message: `طلب جديد من العميل`,\r\n          timestamp: new Date(),\r\n          read: false\r\n        }]);\r\n      }\r\n      \r\n      setLastOrderCount(newOrderCount);\r\n    }\r\n  }, [orders, lastOrderCount, userType, toast]);\r\n\r\n  // مراقبة الطلبات المتاحة للسائقين\r\n  useEffect(() => {\r\n    if (userType === 'driver' && driverOrders) {\r\n      const availableOrders = driverOrders.length;\r\n      \r\n      if (availableOrders > 0) {\r\n        // إشعار صوتي للسائق\r\n        if ('Notification' in window && Notification.permission === 'granted') {\r\n          new Notification('طلب جديد متاح!', {\r\n            body: `يوجد ${availableOrders} طلب متاح للتوصيل`,\r\n            icon: '/logo.png'\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }, [driverOrders, userType]);\r\n\r\n  // طلب إذن الإشعارات\r\n  useEffect(() => {\r\n    if ('Notification' in window && Notification.permission === 'default') {\r\n      Notification.requestPermission();\r\n    }\r\n  }, []);\r\n\r\n  if (userType === 'customer') {\r\n    return null; // العملاء لا يحتاجون نظام إشعارات معقد\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      {/* عداد الإشعارات */}\r\n      <Card>\r\n        <CardContent className=\"p-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <Bell className=\"h-6 w-6 text-primary\" />\r\n              <div>\r\n                <h3 className=\"font-semibold text-foreground\">الإشعارات</h3>\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  {userType === 'admin' ? 'إشعارات النظام' : 'إشعارات التوصيل'}\r\n                </p>\r\n              </div>\r\n            </div>\r\n            <Badge variant=\"secondary\">\r\n              {notifications.filter(n => !n.read).length}\r\n            </Badge>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* قائمة الإشعارات */}\r\n      {notifications.length > 0 && (\r\n        <div className=\"space-y-2\">\r\n          {notifications.slice(0, 5).map((notification) => (\r\n            <Card key={notification.id} className={`${!notification.read ? 'border-primary' : ''}`}>\r\n              <CardContent className=\"p-3\">\r\n                <div className=\"flex items-start gap-3\">\r\n                  <div className=\"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center\">\r\n                    {notification.type === 'new_order' ? (\r\n                      <Package className=\"h-4 w-4 text-primary\" />\r\n                    ) : notification.type === 'order_update' ? (\r\n                      <CheckCircle className=\"h-4 w-4 text-green-500\" />\r\n                    ) : (\r\n                      <Truck className=\"h-4 w-4 text-blue-500\" />\r\n                    )}\r\n                  </div>\r\n                  <div className=\"flex-1\">\r\n                    <h4 className=\"font-medium text-foreground text-sm\">{notification.title}</h4>\r\n                    <p className=\"text-xs text-muted-foreground\">{notification.message}</p>\r\n                    <p className=\"text-xs text-muted-foreground mt-1\">\r\n                      {notification.timestamp.toLocaleTimeString('ar-YE')}\r\n                    </p>\r\n                  </div>\r\n                  {!notification.read && (\r\n                    <div className=\"w-2 h-2 bg-primary rounded-full\" />\r\n                  )}\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}","size_bytes":5463},"client/src/components/ProtectedRoute.tsx":{"content":"import React from 'react';\nimport { useAuth } from '@/context/AuthContext';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Loader2 } from 'lucide-react';\n\ninterface ProtectedRouteProps {\n  children: React.ReactNode;\n  userType: 'admin' | 'driver';\n}\n\nexport const ProtectedRoute: React.FC<ProtectedRouteProps> = ({ children, userType }) => {\n  const { user, isLoading } = useAuth();\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-orange-50 to-orange-100\">\n        <Card className=\"w-96\">\n          <CardContent className=\"p-8 text-center\">\n            <Loader2 className=\"h-8 w-8 animate-spin mx-auto mb-4 text-primary\" />\n            <h3 className=\"text-lg font-semibold text-foreground mb-2\">جاري التحميل...</h3>\n            <p className=\"text-muted-foreground\">يرجى الانتظار</p>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  if (!user || user.userType !== userType) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-red-50 to-red-100\">\n        <Card className=\"w-96\">\n          <CardContent className=\"p-8 text-center\">\n            <div className=\"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <span className=\"text-2xl\">🚫</span>\n            </div>\n            <h3 className=\"text-lg font-semibold text-foreground mb-2\">غير مصرح</h3>\n            <p className=\"text-muted-foreground mb-4\">\n              ليس لديك صلاحية للوصول إلى هذه الصفحة\n            </p>\n            <a \n              href={userType === 'admin' ? '/admin-login' : '/driver-login'}\n              className=\"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-primary text-primary-foreground hover:bg-primary/90 h-10 px-4 py-2\"\n            >\n              تسجيل الدخول\n            </a>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  }\n\n  return <>{children}</>;\n};","size_bytes":2263},"client/src/components/RestaurantCard.tsx":{"content":"import { Card, CardContent } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Star, Clock } from 'lucide-react';\nimport type { Restaurant } from '@shared/schema';\nimport { getRestaurantStatus } from '../utils/restaurantHours';\nimport { useUiSettings } from '@/context/UiSettingsContext';\n\ninterface RestaurantCardProps {\n  restaurant: Restaurant;\n  onClick: () => void;\n}\n\nexport default function RestaurantCard({ restaurant, onClick }: RestaurantCardProps) {\n  const status = getRestaurantStatus(restaurant);\n  const { isFeatureEnabled } = useUiSettings();\n  \n  return (\n    <Card \n      className={`overflow-hidden shadow-sm hover:shadow-md transition-shadow cursor-pointer ${!status.isOpen ? 'opacity-75' : ''}`}\n      onClick={onClick}\n      data-testid={`restaurant-card-${restaurant.id}`}\n    >\n      <img\n        src={restaurant.image}\n        alt={restaurant.name}\n        className=\"w-full h-48 object-cover\"\n      />\n      <CardContent className=\"p-4\">\n        <div className=\"flex justify-between items-start mb-2\">\n          <h4 className=\"font-bold text-foreground\" data-testid={`restaurant-name-${restaurant.id}`}>\n            {restaurant.name}\n          </h4>\n          <Badge \n            variant={status.isOpen ? \"default\" : \"destructive\"}\n            className={status.statusColor === 'green' ? \"bg-green-100 text-green-800 hover:bg-green-100\" : \n                      status.statusColor === 'yellow' ? \"bg-yellow-100 text-yellow-800 hover:bg-yellow-100\" : \"\"}\n            data-testid={`restaurant-status-${restaurant.id}`}\n          >\n            {status.isOpen ? 'مفتوح' : 'مغلق'}\n          </Badge>\n        </div>\n        \n        {/* Restaurant description */}\n        {isFeatureEnabled('show_restaurant_description') && restaurant.description && (\n          <div className=\"mb-2\">\n            <p className=\"text-xs text-muted-foreground\">{restaurant.description}</p>\n          </div>\n        )}\n        \n        {/* Restaurant status message */}\n        <div className=\"mb-2\">\n          <p className={`text-xs ${status.statusColor === 'green' ? 'text-green-600' : \n                                    status.statusColor === 'yellow' ? 'text-yellow-600' : 'text-red-600'}`}>\n            {status.message}\n          </p>\n        </div>\n        \n        <div className=\"flex items-center gap-4 text-sm text-muted-foreground mb-3\">\n          {isFeatureEnabled('show_ratings') && (\n            <div className=\"flex items-center gap-1\">\n              <Star className=\"h-4 w-4 text-yellow-500\" />\n              <span data-testid={`restaurant-rating-${restaurant.id}`}>{restaurant.rating}</span>\n              <span>({restaurant.reviewCount} تقييم)</span>\n            </div>\n          )}\n          {isFeatureEnabled('show_delivery_time') && (\n            <div className=\"flex items-center gap-1\">\n              <Clock className=\"h-4 w-4\" />\n              <span data-testid={`restaurant-delivery-time-${restaurant.id}`}>{restaurant.deliveryTime}</span>\n            </div>\n          )}\n        </div>\n        \n        <div className=\"flex justify-between items-center\">\n          {isFeatureEnabled('show_minimum_order') && (\n            <span className=\"text-sm text-muted-foreground\">\n              الحد الأدنى: {restaurant.minimumOrder} ريال\n            </span>\n          )}\n          <span className=\"text-sm text-primary font-medium\">\n            رسوم التوصيل: {restaurant.deliveryFee} ريال\n          </span>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":3559},"client/src/components/UiControlPanel.tsx":{"content":"import React from 'react';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Switch } from '@/components/ui/switch';\nimport { Label } from '@/components/ui/label';\nimport { Button } from '@/components/ui/button';\nimport { useUiSettings } from '@/context/UiSettingsContext';\nimport { Settings, Eye, EyeOff, Palette, Smartphone } from 'lucide-react';\n\nexport function UiControlPanel() {\n  const { settings, loading, updateSetting, isFeatureEnabled } = useUiSettings();\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center p-8\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 dark:border-gray-100\"></div>\n      </div>\n    );\n  }\n\n  const handleToggle = (key: string, enabled: boolean) => {\n    updateSetting(key, enabled.toString());\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center gap-2 mb-6\">\n        <Settings className=\"h-6 w-6\" />\n        <h2 className=\"text-2xl font-bold\">إعدادات التحكم في الواجهة</h2>\n      </div>\n\n      {/* إعدادات العرض الأساسية */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Eye className=\"h-5 w-5\" />\n            إعدادات العرض الأساسية\n          </CardTitle>\n          <CardDescription>\n            تحكم في العناصر المعروضة في الصفحة الرئيسية\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"flex items-center justify-between\">\n            <Label htmlFor=\"show_categories\" className=\"flex-1\">\n              عرض تصنيفات المطاعم\n            </Label>\n            <Switch\n              id=\"show_categories\"\n              checked={isFeatureEnabled('show_categories')}\n              onCheckedChange={(checked) => handleToggle('show_categories', checked)}\n            />\n          </div>\n\n          <div className=\"flex items-center justify-between\">\n            <Label htmlFor=\"show_search_bar\" className=\"flex-1\">\n              عرض شريط البحث\n            </Label>\n            <Switch\n              id=\"show_search_bar\"\n              checked={isFeatureEnabled('show_search_bar')}\n              onCheckedChange={(checked) => handleToggle('show_search_bar', checked)}\n            />\n          </div>\n\n          <div className=\"flex items-center justify-between\">\n            <Label htmlFor=\"show_special_offers\" className=\"flex-1\">\n              عرض العروض الخاصة\n            </Label>\n            <Switch\n              id=\"show_special_offers\"\n              checked={isFeatureEnabled('show_special_offers')}\n              onCheckedChange={(checked) => handleToggle('show_special_offers', checked)}\n            />\n          </div>\n\n          <div className=\"flex items-center justify-between\">\n            <Label htmlFor=\"show_cart_button\" className=\"flex-1\">\n              عرض زر السلة\n            </Label>\n            <Switch\n              id=\"show_cart_button\"\n              checked={isFeatureEnabled('show_cart_button')}\n              onCheckedChange={(checked) => handleToggle('show_cart_button', checked)}\n            />\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* إعدادات المطاعم */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Smartphone className=\"h-5 w-5\" />\n            إعدادات عرض المطاعم\n          </CardTitle>\n          <CardDescription>\n            تحكم في المعلومات المعروضة للمطاعم\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"flex items-center justify-between\">\n            <Label htmlFor=\"show_ratings\" className=\"flex-1\">\n              عرض تقييمات المطاعم\n            </Label>\n            <Switch\n              id=\"show_ratings\"\n              checked={isFeatureEnabled('show_ratings')}\n              onCheckedChange={(checked) => handleToggle('show_ratings', checked)}\n            />\n          </div>\n\n          <div className=\"flex items-center justify-between\">\n            <Label htmlFor=\"show_delivery_time\" className=\"flex-1\">\n              عرض وقت التوصيل\n            </Label>\n            <Switch\n              id=\"show_delivery_time\"\n              checked={isFeatureEnabled('show_delivery_time')}\n              onCheckedChange={(checked) => handleToggle('show_delivery_time', checked)}\n            />\n          </div>\n\n          <div className=\"flex items-center justify-between\">\n            <Label htmlFor=\"show_minimum_order\" className=\"flex-1\">\n              عرض الحد الأدنى للطلب\n            </Label>\n            <Switch\n              id=\"show_minimum_order\"\n              checked={isFeatureEnabled('show_minimum_order')}\n              onCheckedChange={(checked) => handleToggle('show_minimum_order', checked)}\n            />\n          </div>\n\n          <div className=\"flex items-center justify-between\">\n            <Label htmlFor=\"show_restaurant_description\" className=\"flex-1\">\n              عرض وصف المطعم\n            </Label>\n            <Switch\n              id=\"show_restaurant_description\"\n              checked={isFeatureEnabled('show_restaurant_description')}\n              onCheckedChange={(checked) => handleToggle('show_restaurant_description', checked)}\n            />\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* إعدادات الخدمات */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Palette className=\"h-5 w-5\" />\n            إعدادات الخدمات والميزات\n          </CardTitle>\n          <CardDescription>\n            تحكم في الخدمات المتاحة في التطبيق\n          </CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"flex items-center justify-between\">\n            <Label htmlFor=\"enable_location_services\" className=\"flex-1\">\n              تفعيل خدمات الموقع\n            </Label>\n            <Switch\n              id=\"enable_location_services\"\n              checked={isFeatureEnabled('enable_location_services')}\n              onCheckedChange={(checked) => handleToggle('enable_location_services', checked)}\n            />\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}","size_bytes":6606},"client/src/components/theme-provider.tsx":{"content":"import { createContext, useContext, useEffect, useState } from \"react\"\n\ntype Theme = \"dark\" | \"light\" | \"system\"\n\ntype ThemeProviderProps = {\n  children: React.ReactNode\n  defaultTheme?: Theme\n  storageKey?: string\n}\n\ntype ThemeProviderState = {\n  theme: Theme\n  setTheme: (theme: Theme) => void\n}\n\nconst initialState: ThemeProviderState = {\n  theme: \"system\",\n  setTheme: () => null,\n}\n\nconst ThemeProviderContext = createContext<ThemeProviderState>(initialState)\n\nexport function ThemeProvider({\n  children,\n  defaultTheme = \"system\",\n  storageKey = \"vite-ui-theme\",\n  ...props\n}: ThemeProviderProps) {\n  const [theme, setTheme] = useState<Theme>(\n    () => (localStorage.getItem(storageKey) as Theme) || defaultTheme\n  )\n\n  useEffect(() => {\n    const root = window.document.documentElement\n\n    root.classList.remove(\"light\", \"dark\")\n\n    if (theme === \"system\") {\n      const systemTheme = window.matchMedia(\"(prefers-color-scheme: dark)\")\n        .matches\n        ? \"dark\"\n        : \"light\"\n\n      root.classList.add(systemTheme)\n      return\n    }\n\n    root.classList.add(theme)\n  }, [theme])\n\n  const value = {\n    theme,\n    setTheme: (theme: Theme) => {\n      localStorage.setItem(storageKey, theme)\n      setTheme(theme)\n    },\n  }\n\n  return (\n    <ThemeProviderContext.Provider {...props} value={value}>\n      {children}\n    </ThemeProviderContext.Provider>\n  )\n}\n\nexport const useTheme = () => {\n  const context = useContext(ThemeProviderContext)\n\n  if (context === undefined)\n    throw new Error(\"useTheme must be used within a ThemeProvider\")\n\n  return context\n}","size_bytes":1577},"client/src/context/AuthContext.tsx":{"content":"import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';\nimport { useToast } from '@/hooks/use-toast';\n\ninterface User {\n  id: string;\n  name: string;\n  email?: string;\n  phone?: string;\n  userType: 'admin' | 'driver' | 'customer';\n  token: string;\n}\n\ninterface AuthContextType {\n  user: User | null;\n  isLoading: boolean;\n  login: (identifier: string, password: string, userType: 'admin' | 'driver') => Promise<{ success: boolean; message?: string }>;\n  logout: () => void;\n  isAuthenticated: boolean;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n};\n\ninterface AuthProviderProps {\n  children: ReactNode;\n}\n\nexport const AuthProvider: React.FC<AuthProviderProps> = ({ children }) => {\n  const [user, setUser] = useState<User | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const { toast } = useToast();\n\n  // تحقق من الجلسة المحفوظة عند تحميل التطبيق\n  useEffect(() => {\n    const checkStoredAuth = () => {\n      try {\n        const storedToken = localStorage.getItem('auth_token');\n        const storedUser = localStorage.getItem('auth_user');\n        \n        if (storedToken && storedUser) {\n          const userData = JSON.parse(storedUser);\n          setUser({\n            ...userData,\n            token: storedToken\n          });\n        }\n      } catch (error) {\n        console.error('خطأ في استرداد بيانات المصادقة:', error);\n        localStorage.removeItem('auth_token');\n        localStorage.removeItem('auth_user');\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    checkStoredAuth();\n  }, []);\n\n  const login = async (identifier: string, password: string, userType: 'admin' | 'driver') => {\n    try {\n      setIsLoading(true);\n      \n      const endpoint = userType === 'admin' ? '/api/admin/login' : '/api/driver/login';\n      const body = userType === 'admin' \n        ? { email: identifier, password }\n        : { phone: identifier, password };\n\n      const response = await fetch(endpoint, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(body),\n      });\n\n      const data = await response.json();\n\n      if (response.ok && data.success) {\n        const userData = {\n          id: data[userType].id,\n          name: data[userType].name,\n          email: data[userType].email,\n          phone: data[userType].phone,\n          userType: userType,\n          token: data.token\n        };\n\n        setUser(userData);\n        localStorage.setItem('auth_token', data.token);\n        localStorage.setItem('auth_user', JSON.stringify({\n          id: userData.id,\n          name: userData.name,\n          email: userData.email,\n          phone: userData.phone,\n          userType: userData.userType\n        }));\n\n        toast({\n          title: \"تم تسجيل الدخول بنجاح\",\n          description: `مرحباً ${userData.name}`,\n        });\n\n        return { success: true };\n      } else {\n        return { \n          success: false, \n          message: data.error || 'فشل في تسجيل الدخول' \n        };\n      }\n    } catch (error) {\n      console.error('خطأ في تسجيل الدخول:', error);\n      return { \n        success: false, \n        message: 'حدث خطأ في الاتصال بالخادم' \n      };\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const logout = async () => {\n    try {\n      if (user?.token) {\n        const endpoint = user.userType === 'admin' ? '/api/admin/logout' : '/api/driver/logout';\n        \n        await fetch(endpoint, {\n          method: 'POST',\n          headers: {\n            'Authorization': `Bearer ${user.token}`,\n            'Content-Type': 'application/json',\n          },\n        });\n      }\n    } catch (error) {\n      console.error('خطأ في تسجيل الخروج:', error);\n    } finally {\n      setUser(null);\n      localStorage.removeItem('auth_token');\n      localStorage.removeItem('auth_user');\n      \n      toast({\n        title: \"تم تسجيل الخروج\",\n        description: \"تم تسجيل خروجك بنجاح\",\n      });\n    }\n  };\n\n  const value = {\n    user,\n    isLoading,\n    login,\n    logout,\n    isAuthenticated: !!user\n  };\n\n  return (\n    <AuthContext.Provider value={value}>\n      {children}\n    </AuthContext.Provider>\n  );\n};","size_bytes":4615},"client/src/context/CartContext.tsx":{"content":"import React, { createContext, useContext, useState, useEffect } from 'react';\nimport type { MenuItem } from '@shared/schema';\n\nexport interface CartItem extends MenuItem {\n  quantity: number;\n}\n\ninterface CartContextType {\n  items: CartItem[];\n  addItem: (item: MenuItem) => void;\n  removeItem: (itemId: string) => void;\n  updateQuantity: (itemId: string, quantity: number) => void;\n  clearCart: () => void;\n  getItemCount: () => number;\n  getSubtotal: () => number;\n  getTotal: () => number;\n}\n\nconst CartContext = createContext<CartContextType | undefined>(undefined);\n\nexport function CartProvider({ children }: { children: React.ReactNode }) {\n  const [items, setItems] = useState<CartItem[]>(() => {\n    const saved = localStorage.getItem('cart');\n    return saved ? JSON.parse(saved) : [];\n  });\n\n  useEffect(() => {\n    localStorage.setItem('cart', JSON.stringify(items));\n  }, [items]);\n\n  const addItem = (item: MenuItem) => {\n    setItems(prev => {\n      const existingItem = prev.find(cartItem => cartItem.id === item.id);\n      if (existingItem) {\n        return prev.map(cartItem =>\n          cartItem.id === item.id\n            ? { ...cartItem, quantity: cartItem.quantity + 1 }\n            : cartItem\n        );\n      } else {\n        return [...prev, { ...item, quantity: 1 }];\n      }\n    });\n  };\n\n  const removeItem = (itemId: string) => {\n    setItems(prev => prev.filter(item => item.id !== itemId));\n  };\n\n  const updateQuantity = (itemId: string, quantity: number) => {\n    if (quantity <= 0) {\n      removeItem(itemId);\n      return;\n    }\n    setItems(prev =>\n      prev.map(item =>\n        item.id === itemId ? { ...item, quantity } : item\n      )\n    );\n  };\n\n  const clearCart = () => {\n    setItems([]);\n  };\n\n  const getItemCount = () => {\n    return items.reduce((sum, item) => sum + item.quantity, 0);\n  };\n\n  const getSubtotal = () => {\n    return items.reduce((sum, item) => sum + (item.price * item.quantity), 0);\n  };\n\n  const getTotal = () => {\n    const subtotal = getSubtotal();\n    const deliveryFee = subtotal > 0 ? 5 : 0; // 5 YER delivery fee\n    return subtotal + deliveryFee;\n  };\n\n  return (\n    <CartContext.Provider value={{\n      items,\n      addItem,\n      removeItem,\n      updateQuantity,\n      clearCart,\n      getItemCount,\n      getSubtotal,\n      getTotal,\n    }}>\n      {children}\n    </CartContext.Provider>\n  );\n}\n\nexport function useCart() {\n  const context = useContext(CartContext);\n  if (context === undefined) {\n    throw new Error('useCart must be used within a CartProvider');\n  }\n  return context;\n}\n","size_bytes":2568},"client/src/context/LocationContext.tsx":{"content":"import { createContext, useContext, useState, useEffect, ReactNode } from 'react';\n\ninterface LocationState {\n  position: GeolocationPosition | null;\n  hasPermission: boolean;\n  isLoading: boolean;\n  error: string | null;\n}\n\ninterface LocationContextType {\n  location: LocationState;\n  requestPermission: () => void;\n  getCurrentLocation: () => void;\n}\n\nconst LocationContext = createContext<LocationContextType | undefined>(undefined);\n\nexport function LocationProvider({ children }: { children: ReactNode }) {\n  const [location, setLocation] = useState<LocationState>({\n    position: null,\n    hasPermission: false,\n    isLoading: false,\n    error: null,\n  });\n\n  useEffect(() => {\n    checkPermissionStatus();\n  }, []);\n\n  const checkPermissionStatus = async () => {\n    if ('permissions' in navigator) {\n      try {\n        const permission = await navigator.permissions.query({ name: 'geolocation' as PermissionName });\n        if (permission.state === 'granted') {\n          setLocation(prev => ({ ...prev, hasPermission: true }));\n          getCurrentLocation();\n        }\n      } catch (error) {\n        console.error('Error checking permission:', error);\n      }\n    }\n  };\n\n  const requestPermission = () => {\n    getCurrentLocation();\n  };\n\n  const getCurrentLocation = () => {\n    if (!('geolocation' in navigator)) {\n      setLocation(prev => ({ \n        ...prev, \n        error: 'الموقع الجغرافي غير مدعوم في هذا المتصفح' \n      }));\n      return;\n    }\n\n    setLocation(prev => ({ ...prev, isLoading: true, error: null }));\n\n    navigator.geolocation.getCurrentPosition(\n      (position) => {\n        setLocation({\n          position,\n          hasPermission: true,\n          isLoading: false,\n          error: null,\n        });\n      },\n      (error) => {\n        let errorMessage = 'حدث خطأ في الحصول على الموقع';\n        \n        switch (error.code) {\n          case error.PERMISSION_DENIED:\n            errorMessage = 'تم رفض الإذن للوصول للموقع';\n            break;\n          case error.POSITION_UNAVAILABLE:\n            errorMessage = 'الموقع غير متاح';\n            break;\n          case error.TIMEOUT:\n            errorMessage = 'انتهت مهلة الحصول على الموقع';\n            break;\n        }\n\n        setLocation(prev => ({\n          ...prev,\n          isLoading: false,\n          error: errorMessage,\n          hasPermission: false,\n        }));\n      },\n      {\n        enableHighAccuracy: true,\n        timeout: 10000,\n        maximumAge: 60000\n      }\n    );\n  };\n\n  return (\n    <LocationContext.Provider value={{ location, requestPermission, getCurrentLocation }}>\n      {children}\n    </LocationContext.Provider>\n  );\n}\n\nexport function useLocation() {\n  const context = useContext(LocationContext);\n  if (context === undefined) {\n    throw new Error('useLocation must be used within a LocationProvider');\n  }\n  return context;\n}","size_bytes":2972},"client/src/context/ThemeContext.tsx":{"content":"import React, { createContext, useContext, useEffect, useState } from 'react';\n\ntype Theme = 'light' | 'dark';\n\ninterface ThemeContextType {\n  theme: Theme;\n  toggleTheme: () => void;\n}\n\nconst ThemeContext = createContext<ThemeContextType | undefined>(undefined);\n\nexport function ThemeProvider({ children }: { children: React.ReactNode }) {\n  const [theme, setTheme] = useState<Theme>(() => {\n    const saved = localStorage.getItem('theme');\n    return (saved as Theme) || 'light';\n  });\n\n  useEffect(() => {\n    const root = document.documentElement;\n    if (theme === 'dark') {\n      root.classList.add('dark');\n    } else {\n      root.classList.remove('dark');\n    }\n    localStorage.setItem('theme', theme);\n  }, [theme]);\n\n  const toggleTheme = () => {\n    setTheme(prev => prev === 'light' ? 'dark' : 'light');\n  };\n\n  return (\n    <ThemeContext.Provider value={{ theme, toggleTheme }}>\n      {children}\n    </ThemeContext.Provider>\n  );\n}\n\nexport function useTheme() {\n  const context = useContext(ThemeContext);\n  if (context === undefined) {\n    throw new Error('useTheme must be used within a ThemeProvider');\n  }\n  return context;\n}\n","size_bytes":1145},"client/src/context/UiSettingsContext.tsx":{"content":"import React, { createContext, useContext, useState, useEffect } from 'react';\n\ninterface UiSetting {\n  id: string;\n  settingKey: string;\n  settingValue: string;\n  description: string | null;\n  isActive: boolean;\n}\n\ninterface UiSettingsContextType {\n  settings: Record<string, string>;\n  loading: boolean;\n  updateSetting: (key: string, value: string) => Promise<void>;\n  getSetting: (key: string, defaultValue?: string) => string;\n  isFeatureEnabled: (key: string) => boolean;\n  refreshSettings: () => Promise<void>;\n}\n\nconst UiSettingsContext = createContext<UiSettingsContextType | undefined>(undefined);\n\nexport function UiSettingsProvider({ children }: { children: React.ReactNode }) {\n  const [settings, setSettings] = useState<Record<string, string>>({});\n  const [loading, setLoading] = useState(true);\n\n  const loadSettings = async () => {\n    try {\n      const response = await fetch('/api/ui-settings');\n      if (response.ok) {\n        const settingsData: UiSetting[] = await response.json();\n        const settingsMap = settingsData.reduce((acc, setting) => {\n          acc[setting.settingKey] = setting.settingValue;\n          return acc;\n        }, {} as Record<string, string>);\n        setSettings(settingsMap);\n      }\n    } catch (error) {\n      console.error('خطأ في تحميل إعدادات الواجهة:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const updateSetting = async (key: string, value: string) => {\n    try {\n      const response = await fetch(`/api/ui-settings/${key}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ value }),\n      });\n\n      if (response.ok) {\n        setSettings(prev => ({ ...prev, [key]: value }));\n      }\n    } catch (error) {\n      console.error('خطأ في تحديث الإعداد:', error);\n    }\n  };\n\n  const getSetting = (key: string, defaultValue: string = '') => {\n    return settings[key] || defaultValue;\n  };\n\n  const isFeatureEnabled = (key: string) => {\n    return getSetting(key) === 'true';\n  };\n\n  const refreshSettings = async () => {\n    setLoading(true);\n    await loadSettings();\n  };\n\n  useEffect(() => {\n    loadSettings();\n  }, []);\n\n  return (\n    <UiSettingsContext.Provider value={{\n      settings,\n      loading,\n      updateSetting,\n      getSetting,\n      isFeatureEnabled,\n      refreshSettings\n    }}>\n      {children}\n    </UiSettingsContext.Provider>\n  );\n}\n\nexport function useUiSettings() {\n  const context = useContext(UiSettingsContext);\n  if (context === undefined) {\n    throw new Error('useUiSettings must be used within a UiSettingsProvider');\n  }\n  return context;\n}","size_bytes":2683},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }","size_bytes":3894},"client/src/lib/AuthContext.tsx":{"content":"// في ملف AuthContext.tsx\r\nimport { createContext, useContext, useState, ReactNode } from 'react';\r\nimport { authService } from '../lib/auth';\r\n\r\ninterface AuthContextType {\r\n  user: { token: string; userType: string } | null;\r\n  login: (identifier: string, password: string, userType: string) => Promise<{ success: boolean; message?: string }>;\r\n  logout: () => void;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport const useAuth = () => {\r\n  const context = useContext(AuthContext);\r\n  if (context === undefined) {\r\n    throw new Error('useAuth must be used within an AuthProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\ninterface AuthProviderProps {\r\n  children: ReactNode;\r\n}\r\n\r\nexport const AuthProvider: React.FC<AuthProviderProps> = ({ children }) => {\r\n  const [user, setUser] = useState<{ token: string; userType: string } | null>(null);\r\n\r\n  const login = async (identifier: string, password: string, userType: string) => {\r\n    try {\r\n      let result;\r\n      \r\n      if (userType === 'admin') {\r\n        result = await authService.loginAdmin(identifier, password);\r\n      } else if (userType === 'driver') {\r\n        result = await authService.loginDriver(identifier, password);\r\n      } else {\r\n        return { success: false, message: 'نوع المستخدم غير صحيح' };\r\n      }\r\n\r\n      if (result.success && result.token && result.userType) {\r\n        setUser({ token: result.token, userType: result.userType });\r\n        localStorage.setItem('token', result.token);\r\n        localStorage.setItem('userType', result.userType);\r\n        return { success: true };\r\n      } else {\r\n        return { success: false, message: result.message };\r\n      }\r\n    } catch (error) {\r\n      console.error('Login error:', error);\r\n      return { success: false, message: 'حدث خطأ أثناء تسجيل الدخول' };\r\n    }\r\n  };\r\n\r\n  const logout = () => {\r\n    if (user) {\r\n      authService.logout(user.token, user.userType);\r\n    }\r\n    setUser(null);\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('userType');\r\n  };\r\n\r\n  const value = {\r\n    user,\r\n    login,\r\n    logout,\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={value}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};","size_bytes":2281},"client/src/lib/queryClient.ts":{"content":"import { QueryClient } from '@tanstack/react-query';\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      staleTime: 5 * 60 * 1000, // 5 دقائق\n      retry: 1,\n      refetchOnWindowFocus: false,\n    },\n  },\n});\n\n// دالة مساعدة لإجراء طلبات API\nexport async function apiRequest(\n  method: 'GET' | 'POST' | 'PUT' | 'DELETE',\n  url: string,\n  data?: any,\n  token?: string\n) {\n  const config: RequestInit = {\n    method,\n    headers: {\n      'Content-Type': 'application/json',\n      ...(token && { Authorization: `Bearer ${token}` }),\n    },\n  };\n\n  if (data && method !== 'GET') {\n    config.body = JSON.stringify(data);\n  }\n\n  const response = await fetch(url, config);\n\n  if (!response.ok) {\n    const errorData = await response.json().catch(() => ({}));\n    throw new Error(errorData.error || `HTTP error! status: ${response.status}`);\n  }\n\n  return response;\n}","size_bytes":921},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/pages/Admin.tsx":{"content":"import { useLocation } from 'wouter';\nimport { useQuery } from '@tanstack/react-query';\nimport { ArrowRight, Store, ShoppingBag, Truck, ChartLine, Tags, Percent, BarChart } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent } from '@/components/ui/card';\nimport type { Restaurant, Order, Driver } from '@shared/schema';\n\nexport default function Admin() {\n  const [, setLocation] = useLocation();\n\n  const { data: restaurants } = useQuery<Restaurant[]>({\n    queryKey: ['/api/restaurants'],\n  });\n\n  const { data: orders } = useQuery<Order[]>({\n    queryKey: ['/api/orders'],\n  });\n\n  const { data: drivers } = useQuery<Driver[]>({\n    queryKey: ['/api/drivers'],\n  });\n\n  // Calculate stats\n  const todayOrders = orders?.filter(order => {\n    const today = new Date().toDateString();\n    const orderDate = new Date(order.createdAt || '').toDateString();\n    return today === orderDate;\n  }).length || 0;\n\n  const activeRestaurants = restaurants?.filter(r => r.isOpen).length || 0;\n  const availableDrivers = drivers?.filter(d => d.isAvailable && d.isActive).length || 0;\n  \n  const todayRevenue = orders?.filter(order => {\n    const today = new Date().toDateString();\n    const orderDate = new Date(order.createdAt || '').toDateString();\n    return today === orderDate;\n  }).reduce((sum, order) => sum + parseFloat(order.totalAmount || '0'), 0) || 0;\n\n  const adminMenuItems = [\n    {\n      icon: Store,\n      title: 'إدارة المتاجر',\n      description: 'إضافة، تعديل وحذف المطاعم',\n      color: 'text-primary',\n      testId: 'admin-restaurants',\n      path: '/admin/restaurants',\n    },\n    {\n      icon: Tags,\n      title: 'إدارة التصنيفات',\n      description: 'إدارة تصنيفات المطاعم',\n      color: 'text-green-500',\n      testId: 'admin-categories',\n      path: '/admin/categories',\n    },\n    {\n      icon: ShoppingBag,\n      title: 'إدارة الطلبات',\n      description: 'متابعة وإدارة الطلبات',\n      color: 'text-blue-500',\n      testId: 'admin-orders',\n      path: '/admin/orders',\n    },\n    {\n      icon: Truck,\n      title: 'إدارة السائقين',\n      description: 'إضافة وإدارة السائقين',\n      color: 'text-orange-500',\n      testId: 'admin-drivers',\n      path: '/admin/drivers',\n    },\n    {\n      icon: Percent,\n      title: 'إدارة العروض',\n      description: 'إنشاء وإدارة العروض الخاصة',\n      color: 'text-purple-500',\n      testId: 'admin-offers',\n      path: '/admin/offers',\n    },\n    {\n      icon: BarChart,\n      title: 'التقارير والإحصائيات',\n      description: 'عرض التقارير المالية والإحصائيات',\n      color: 'text-red-500',\n      testId: 'admin-reports',\n      path: '/admin/reports',\n    },\n  ];\n\n  return (\n    <div>\n      {/* Header */}\n      <header className=\"bg-card border-b border-border p-4\">\n        <div className=\"flex items-center gap-3\">\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={() => setLocation('/')}\n            data-testid=\"button-admin-back\"\n          >\n            <ArrowRight className=\"h-5 w-5\" />\n          </Button>\n          <h2 className=\"text-xl font-bold text-foreground\">لوحة التحكم</h2>\n        </div>\n      </header>\n\n      <section className=\"p-4 space-y-6\">\n        {/* Quick Stats */}\n        <div className=\"grid grid-cols-2 gap-4\">\n          <Card className=\"text-center\">\n            <CardContent className=\"p-4\">\n              <ShoppingBag className=\"h-8 w-8 text-primary mx-auto mb-2\" />\n              <h3 className=\"text-lg font-bold text-foreground\" data-testid=\"stat-orders-today\">\n                {todayOrders}\n              </h3>\n              <p className=\"text-sm text-muted-foreground\">طلبات اليوم</p>\n            </CardContent>\n          </Card>\n\n          <Card className=\"text-center\">\n            <CardContent className=\"p-4\">\n              <Store className=\"h-8 w-8 text-green-500 mx-auto mb-2\" />\n              <h3 className=\"text-lg font-bold text-foreground\" data-testid=\"stat-active-restaurants\">\n                {activeRestaurants}\n              </h3>\n              <p className=\"text-sm text-muted-foreground\">متجر نشط</p>\n            </CardContent>\n          </Card>\n\n          <Card className=\"text-center\">\n            <CardContent className=\"p-4\">\n              <Truck className=\"h-8 w-8 text-blue-500 mx-auto mb-2\" />\n              <h3 className=\"text-lg font-bold text-foreground\" data-testid=\"stat-available-drivers\">\n                {availableDrivers}\n              </h3>\n              <p className=\"text-sm text-muted-foreground\">سائق متاح</p>\n            </CardContent>\n          </Card>\n\n          <Card className=\"text-center\">\n            <CardContent className=\"p-4\">\n              <ChartLine className=\"h-8 w-8 text-purple-500 mx-auto mb-2\" />\n              <h3 className=\"text-lg font-bold text-foreground\" data-testid=\"stat-today-revenue\">\n                {todayRevenue.toFixed(2)}\n              </h3>\n              <p className=\"text-sm text-muted-foreground\">ريال الإيرادات</p>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Admin Menu */}\n        <div className=\"space-y-3\">\n          <h3 className=\"text-lg font-bold text-foreground\">الإدارة</h3>\n          \n          {adminMenuItems.map((item) => {\n            const Icon = item.icon;\n            return (\n              <Button\n                key={item.testId}\n                variant=\"ghost\"\n                className=\"w-full h-auto p-4 justify-between hover:bg-accent\"\n                onClick={() => setLocation(item.path)}\n                data-testid={item.testId}\n              >\n                <div className=\"flex items-center gap-3\">\n                  <Icon className={`h-6 w-6 ${item.color}`} />\n                  <div className=\"text-right\">\n                    <div className=\"font-medium text-foreground\">{item.title}</div>\n                    <div className=\"text-sm text-muted-foreground\">{item.description}</div>\n                  </div>\n                </div>\n                <ArrowRight className=\"h-5 w-5 text-muted-foreground rotate-180\" />\n              </Button>\n            );\n          })}\n        </div>\n      </section>\n    </div>\n  );\n}","size_bytes":6403},"client/src/pages/AdminCategories.tsx":{"content":"import { useState } from 'react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { Plus, Edit, Trash2, Tag, Save, X } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle, AlertDialogTrigger } from '@/components/ui/alert-dialog';\nimport { useToast } from '@/hooks/use-toast';\nimport { apiRequest } from '@/lib/queryClient';\nimport type { Category } from '@shared/schema';\n\nexport default function AdminCategories() {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [editingCategory, setEditingCategory] = useState<Category | null>(null);\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  \n  const [formData, setFormData] = useState({\n    name: '',\n    icon: '',\n  });\n\n  const { data: categories, isLoading } = useQuery<Category[]>({\n    queryKey: ['/api/categories'],\n  });\n\n  const createCategoryMutation = useMutation({\n    mutationFn: async (data: typeof formData) => {\n      const response = await apiRequest('POST', '/api/categories', data);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/categories'] });\n      toast({\n        title: \"تم إنشاء القسم\",\n        description: \"تم إضافة القسم الجديد بنجاح\",\n      });\n      resetForm();\n      setIsDialogOpen(false);\n    },\n  });\n\n  const updateCategoryMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: typeof formData }) => {\n      const response = await apiRequest('PUT', `/api/categories/${id}`, data);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/categories'] });\n      toast({\n        title: \"تم تحديث القسم\",\n        description: \"تم تحديث القسم بنجاح\",\n      });\n      resetForm();\n      setEditingCategory(null);\n      setIsDialogOpen(false);\n    },\n  });\n\n  const deleteCategoryMutation = useMutation({\n    mutationFn: async (id: string) => {\n      const response = await apiRequest('DELETE', `/api/categories/${id}`);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/categories'] });\n      toast({\n        title: \"تم حذف القسم\",\n        description: \"تم حذف القسم بنجاح\",\n      });\n    },\n  });\n\n  const resetForm = () => {\n    setFormData({\n      name: '',\n      icon: '',\n    });\n    setEditingCategory(null);\n  };\n\n  const handleEdit = (category: Category) => {\n    setEditingCategory(category);\n    setFormData({\n      name: category.name,\n      icon: category.icon || '',\n    });\n    setIsDialogOpen(true);\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!formData.name.trim()) {\n      toast({\n        title: \"خطأ\",\n        description: \"يرجى إدخال اسم القسم\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    if (editingCategory) {\n      updateCategoryMutation.mutate({ id: editingCategory.id, data: formData });\n    } else {\n      createCategoryMutation.mutate(formData);\n    }\n  };\n\n  const iconOptions = [\n    { value: 'fas fa-utensils', label: '🍽️ مطاعم' },\n    { value: 'fas fa-pizza-slice', label: '🍕 بيتزا' },\n    { value: 'fas fa-hamburger', label: '🍔 برجر' },\n    { value: 'fas fa-ice-cream', label: '🍦 حلويات' },\n    { value: 'fas fa-coffee', label: '☕ مقاهي' },\n    { value: 'fas fa-fish', label: '🐟 مأكولات بحرية' },\n    { value: 'fas fa-drumstick-bite', label: '🍗 دجاج' },\n    { value: 'fas fa-bread-slice', label: '🍞 مخبوزات' },\n    { value: 'fas fa-cheese', label: '🧀 ألبان' },\n    { value: 'fas fa-apple-alt', label: '🍎 صحي' },\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-3\">\n          <Tag className=\"h-8 w-8 text-primary\" />\n          <div>\n            <h1 className=\"text-2xl font-bold text-foreground\">إدارة الأقسام</h1>\n            <p className=\"text-muted-foreground\">إدارة أقسام المطاعم والمتاجر</p>\n          </div>\n        </div>\n        \n        <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\n          <DialogTrigger asChild>\n            <Button \n              className=\"gap-2\"\n              onClick={() => {\n                resetForm();\n                setIsDialogOpen(true);\n              }}\n              data-testid=\"button-add-category\"\n            >\n              <Plus className=\"h-4 w-4\" />\n              إضافة قسم جديد\n            </Button>\n          </DialogTrigger>\n          <DialogContent className=\"max-w-md\">\n            <DialogHeader>\n              <DialogTitle>\n                {editingCategory ? 'تعديل القسم' : 'إضافة قسم جديد'}\n              </DialogTitle>\n            </DialogHeader>\n            \n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n              <div>\n                <Label htmlFor=\"name\">اسم القسم</Label>\n                <Input\n                  id=\"name\"\n                  value={formData.name}\n                  onChange={(e) => setFormData(prev => ({ ...prev, name: e.target.value }))}\n                  placeholder=\"أدخل اسم القسم\"\n                  required\n                  data-testid=\"input-category-name\"\n                />\n              </div>\n\n              <div>\n                <Label htmlFor=\"icon\">الأيقونة</Label>\n                <select\n                  id=\"icon\"\n                  className=\"w-full p-2 border border-border rounded-md bg-background\"\n                  value={formData.icon}\n                  onChange={(e) => setFormData(prev => ({ ...prev, icon: e.target.value }))}\n                  data-testid=\"select-category-icon\"\n                >\n                  <option value=\"\">اختر أيقونة</option>\n                  {iconOptions.map((option) => (\n                    <option key={option.value} value={option.value}>\n                      {option.label}\n                    </option>\n                  ))}\n                </select>\n              </div>\n\n              <div className=\"flex gap-2 pt-4\">\n                <Button \n                  type=\"submit\" \n                  className=\"flex-1 gap-2\"\n                  disabled={createCategoryMutation.isPending || updateCategoryMutation.isPending}\n                  data-testid=\"button-save-category\"\n                >\n                  <Save className=\"h-4 w-4\" />\n                  {editingCategory ? 'تحديث' : 'إضافة'}\n                </Button>\n                <Button \n                  type=\"button\" \n                  variant=\"outline\" \n                  onClick={() => {\n                    resetForm();\n                    setIsDialogOpen(false);\n                  }}\n                  data-testid=\"button-cancel-category\"\n                >\n                  <X className=\"h-4 w-4\" />\n                  إلغاء\n                </Button>\n              </div>\n            </form>\n          </DialogContent>\n        </Dialog>\n      </div>\n\n      {/* Categories Grid */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {isLoading ? (\n          [...Array(6)].map((_, i) => (\n            <Card key={i} className=\"animate-pulse\">\n              <CardContent className=\"p-6\">\n                <div className=\"w-12 h-12 bg-muted rounded-lg mb-4\" />\n                <div className=\"h-4 bg-muted rounded w-3/4 mb-2\" />\n                <div className=\"h-3 bg-muted rounded w-1/2\" />\n              </CardContent>\n            </Card>\n          ))\n        ) : categories?.length ? (\n          categories.map((category) => (\n            <Card key={category.id} className=\"hover:shadow-md transition-shadow\">\n              <CardHeader className=\"pb-3\">\n                <div className=\"flex items-center gap-3\">\n                  <div className=\"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center\">\n                    {category.icon ? (\n                      <i className={`${category.icon} text-primary text-xl`} />\n                    ) : (\n                      <Tag className=\"h-6 w-6 text-primary\" />\n                    )}\n                  </div>\n                  <CardTitle className=\"text-lg\">{category.name}</CardTitle>\n                </div>\n              </CardHeader>\n              \n              <CardContent className=\"pt-0\">\n                <div className=\"flex gap-2\">\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    className=\"flex-1 gap-2\"\n                    onClick={() => handleEdit(category)}\n                    data-testid={`button-edit-category-${category.id}`}\n                  >\n                    <Edit className=\"h-4 w-4\" />\n                    تعديل\n                  </Button>\n                  \n                  <AlertDialog>\n                    <AlertDialogTrigger asChild>\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        className=\"text-destructive hover:text-destructive\"\n                        data-testid={`button-delete-category-${category.id}`}\n                      >\n                        <Trash2 className=\"h-4 w-4\" />\n                      </Button>\n                    </AlertDialogTrigger>\n                    <AlertDialogContent>\n                      <AlertDialogHeader>\n                        <AlertDialogTitle>تأكيد الحذف</AlertDialogTitle>\n                        <AlertDialogDescription>\n                          هل أنت متأكد من حذف قسم \"{category.name}\"؟ \n                          سيتم حذف جميع المطاعم المرتبطة بهذا القسم أيضاً.\n                        </AlertDialogDescription>\n                      </AlertDialogHeader>\n                      <AlertDialogFooter>\n                        <AlertDialogCancel>إلغاء</AlertDialogCancel>\n                        <AlertDialogAction\n                          onClick={() => deleteCategoryMutation.mutate(category.id)}\n                          className=\"bg-destructive hover:bg-destructive/90\"\n                        >\n                          حذف\n                        </AlertDialogAction>\n                      </AlertDialogFooter>\n                    </AlertDialogContent>\n                  </AlertDialog>\n                </div>\n              </CardContent>\n            </Card>\n          ))\n        ) : (\n          <div className=\"col-span-full text-center py-12\">\n            <Tag className=\"h-12 w-12 text-muted-foreground mx-auto mb-4\" />\n            <h3 className=\"text-lg font-semibold text-foreground mb-2\">لا توجد أقسام</h3>\n            <p className=\"text-muted-foreground mb-4\">ابدأ بإضافة أقسام المطاعم والمتاجر</p>\n            <Button onClick={() => setIsDialogOpen(true)} data-testid=\"button-add-first-category\">\n              إضافة القسم الأول\n            </Button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n","size_bytes":11714},"client/src/pages/AdminDashboard.tsx":{"content":"import React, { useState } from 'react';\r\nimport { useAuth } from '../context/AuthContext';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '../components/ui/card';\r\nimport { Button } from '../components/ui/button';\r\nimport { Badge } from '../components/ui/badge';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '../components/ui/tabs';\r\nimport { \r\n  BarChart3, \r\n  Users, \r\n  ShoppingBag, \r\n  DollarSign, \r\n  Settings, \r\n  LogOut,\r\n  Package,\r\n  Truck,\r\n  Store,\r\n  Eye,\r\n  Edit,\r\n  Trash2\r\n} from 'lucide-react';\r\n\r\ninterface AdminDashboardProps {\r\n  onLogout: () => void;\r\n}\r\n\r\nexport const AdminDashboard: React.FC<AdminDashboardProps> = ({ onLogout }) => {\r\n  const { logout } = useAuth();\r\n  const [activeTab, setActiveTab] = useState('overview');\r\n\r\n  const handleLogout = () => {\r\n    logout();\r\n    onLogout();\r\n  };\r\n\r\n  const stats = [\r\n    { title: 'إجمالي الطلبات', value: '2,345', icon: ShoppingBag, color: 'text-blue-600' },\r\n    { title: 'العملاء النشطين', value: '1,234', icon: Users, color: 'text-green-600' },\r\n    { title: 'إجمالي المبيعات', value: '₪45,678', icon: DollarSign, color: 'text-orange-600' },\r\n    { title: 'السائقين المتاحين', value: '23', icon: Truck, color: 'text-purple-600' },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\" dir=\"rtl\">\r\n      {/* Header */}\r\n      <header className=\"bg-white shadow-sm border-b\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n          <div className=\"flex justify-between items-center h-16\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <Settings className=\"h-8 w-8 text-blue-600\" />\r\n              <div>\r\n                <h1 className=\"text-xl font-bold text-gray-900\">لوحة التحكم</h1>\r\n                <p className=\"text-sm text-gray-500\">إدارة نظام التوصيل</p>\r\n              </div>\r\n            </div>\r\n            <Button \r\n              variant=\"outline\" \r\n              onClick={handleLogout}\r\n              className=\"flex items-center gap-2\"\r\n            >\r\n              <LogOut className=\"h-4 w-4\" />\r\n              تسجيل الخروج\r\n            </Button>\r\n          </div>\r\n        </div>\r\n      </header>\r\n\r\n      {/* Main Content */}\r\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n        {/* Notification System */}\r\n        <div className=\"mb-8\">\r\n          <NotificationSystem userType=\"admin\" />\r\n        </div>\r\n\r\n        {/* Stats Cards */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\r\n          {stats.map((stat, index) => {\r\n            const Icon = stat.icon;\r\n            return (\r\n              <Card key={index}>\r\n                <CardContent className=\"p-6\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div>\r\n                      <p className=\"text-sm font-medium text-gray-600\">{stat.title}</p>\r\n                      <p className=\"text-2xl font-bold text-gray-900\">{stat.value}</p>\r\n                    </div>\r\n                    <Icon className={`h-8 w-8 ${stat.color}`} />\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            );\r\n          })}\r\n        </div>\r\n\r\n        {/* Tabs Navigation */}\r\n        <Tabs value={activeTab} onValueChange={setActiveTab} className=\"space-y-6\">\r\n          <TabsList className=\"grid w-full grid-cols-5\">\r\n            <TabsTrigger value=\"overview\">نظرة عامة</TabsTrigger>\r\n            <TabsTrigger value=\"orders\">الطلبات</TabsTrigger>\r\n            <TabsTrigger value=\"restaurants\">المطاعم</TabsTrigger>\r\n            <TabsTrigger value=\"drivers\">السائقين</TabsTrigger>\r\n            <TabsTrigger value=\"categories\">الفئات</TabsTrigger>\r\n          </TabsList>\r\n\r\n          <TabsContent value=\"overview\" className=\"space-y-6\">\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n              <Card>\r\n                <CardHeader>\r\n                  <CardTitle className=\"flex items-center gap-2\">\r\n                    <BarChart3 className=\"h-5 w-5\" />\r\n                    الطلبات الحديثة\r\n                  </CardTitle>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <div className=\"space-y-4\">\r\n                    {[1, 2, 3].map((order) => (\r\n                      <div key={order} className=\"flex items-center justify-between p-3 border rounded-lg\">\r\n                        <div>\r\n                          <p className=\"font-medium\">طلب #{1000 + order}</p>\r\n                          <p className=\"text-sm text-gray-600\">مطعم الوزيكو للعربكة</p>\r\n                        </div>\r\n                        <Badge variant=\"secondary\">قيد التحضير</Badge>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n\r\n              <Card>\r\n                <CardHeader>\r\n                  <CardTitle className=\"flex items-center gap-2\">\r\n                    <Users className=\"h-5 w-5\" />\r\n                    السائقين النشطين\r\n                  </CardTitle>\r\n                </CardHeader>\r\n                <CardContent>\r\n                  <div className=\"space-y-4\">\r\n                    {['أحمد محمد', 'علي حسن', 'سارة أحمد'].map((driver, index) => (\r\n                      <div key={index} className=\"flex items-center justify-between p-3 border rounded-lg\">\r\n                        <div>\r\n                          <p className=\"font-medium\">{driver}</p>\r\n                          <p className=\"text-sm text-gray-600\">متاح للتوصيل</p>\r\n                        </div>\r\n                        <Badge variant=\"default\" className=\"bg-green-100 text-green-800\">\r\n                          نشط\r\n                        </Badge>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            </div>\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"orders\" className=\"space-y-6\">\r\n            <AdminOrders />\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"restaurants\" className=\"space-y-6\">\r\n            <AdminRestaurants />\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"drivers\" className=\"space-y-6\">\r\n            <AdminDrivers />\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"categories\" className=\"space-y-6\">\r\n            <AdminCategories />\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"menu\" className=\"space-y-6\">\r\n            <AdminMenuItems />\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"offers\" className=\"space-y-6\">\r\n            <AdminOffers />\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"menu\" className=\"space-y-6\">\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle>إدارة قوائم الطعام</CardTitle>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <div className=\"space-y-4\">\r\n                  {['عربكة بالقشطة والعسل', 'معصوب بالقشطة والعسل', 'مياه معدنية', 'كومبو عربكة خاص'].map((item, index) => (\r\n                    <div key={index} className=\"flex items-center justify-between p-4 border rounded-lg\">\r\n                      <div className=\"flex items-center gap-4\">\r\n                        <Menu className=\"h-8 w-8 text-gray-400\" />\r\n                        <div>\r\n                          <p className=\"font-medium\">{item}</p>\r\n                          <p className=\"text-sm text-gray-600\">{25 + index * 15} ريال</p>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <Badge variant=\"default\" className=\"bg-green-100 text-green-800\">\r\n                          متوفر\r\n                        </Badge>\r\n                        <Button variant=\"outline\" size=\"sm\">\r\n                          <Edit className=\"h-4 w-4\" />\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          </TabsContent>\r\n\r\n          <TabsContent value=\"offers\" className=\"space-y-6\">\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle>إدارة العروض الخاصة</CardTitle>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <div className=\"space-y-4\">\r\n                  {['خصم 30% على الطلب الأول', 'توصيل مجاني فوق 50 ريال', 'عرض رمضان الخاص'].map((offer, index) => (\r\n                    <div key={index} className=\"flex items-center justify-between p-4 border rounded-lg\">\r\n                      <div className=\"flex items-center gap-4\">\r\n                        <Percent className=\"h-8 w-8 text-gray-400\" />\r\n                        <div>\r\n                          <p className=\"font-medium\">{offer}</p>\r\n                          <p className=\"text-sm text-gray-600\">صالح لمدة {7 + index * 3} أيام</p>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <Badge variant=\"default\" className=\"bg-orange-100 text-orange-800\">\r\n                          نشط\r\n                        </Badge>\r\n                        <Button variant=\"outline\" size=\"sm\">\r\n                          <Edit className=\"h-4 w-4\" />\r\n                        </Button>\r\n                        <Button variant=\"outline\" size=\"sm\">\r\n                          <Trash2 className=\"h-4 w-4\" />\r\n                        </Button>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          </TabsContent>\r\n        </Tabs>\r\n      </main>\r\n    </div>\r\n  );\r\n};","size_bytes":10139},"client/src/pages/AdminDrivers.tsx":{"content":"import { useState } from 'react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { Plus, Edit, Trash2, Truck, Save, X, Phone, MapPin, DollarSign, User } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Switch } from '@/components/ui/switch';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle, AlertDialogTrigger } from '@/components/ui/alert-dialog';\nimport { Badge } from '@/components/ui/badge';\nimport { useToast } from '@/hooks/use-toast';\nimport { apiRequest } from '@/lib/queryClient';\nimport type { Driver } from '@shared/schema';\n\nexport default function AdminDrivers() {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [editingDriver, setEditingDriver] = useState<Driver | null>(null);\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\n  \n  const [formData, setFormData] = useState({\n    name: '',\n    phone: '',\n    password: '',\n    currentLocation: '',\n    isAvailable: true,\n    isActive: true,\n  });\n\n  const { data: drivers, isLoading } = useQuery<Driver[]>({\n    queryKey: ['/api/drivers'],\n  });\n\n  const createDriverMutation = useMutation({\n    mutationFn: async (data: typeof formData) => {\n      const response = await apiRequest('POST', '/api/drivers', data);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/drivers'] });\n      toast({\n        title: \"تم إضافة السائق\",\n        description: \"تم إضافة السائق الجديد بنجاح\",\n      });\n      resetForm();\n      setIsDialogOpen(false);\n    },\n  });\n\n  const updateDriverMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: Partial<typeof formData> }) => {\n      const response = await apiRequest('PUT', `/api/drivers/${id}`, data);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/drivers'] });\n      toast({\n        title: \"تم تحديث السائق\",\n        description: \"تم تحديث بيانات السائق بنجاح\",\n      });\n      resetForm();\n      setEditingDriver(null);\n      setIsDialogOpen(false);\n    },\n  });\n\n  const deleteDriverMutation = useMutation({\n    mutationFn: async (id: string) => {\n      const response = await apiRequest('DELETE', `/api/drivers/${id}`);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/drivers'] });\n      toast({\n        title: \"تم حذف السائق\",\n        description: \"تم حذف السائق بنجاح\",\n      });\n    },\n  });\n\n  const resetForm = () => {\n    setFormData({\n      name: '',\n      phone: '',\n      password: '',\n      currentLocation: '',\n      isAvailable: true,\n      isActive: true,\n    });\n    setEditingDriver(null);\n  };\n\n  const handleEdit = (driver: Driver) => {\n    setEditingDriver(driver);\n    setFormData({\n      name: driver.name,\n      phone: driver.phone,\n      password: '', // Don't show password\n      currentLocation: driver.currentLocation || '',\n      isAvailable: driver.isAvailable,\n      isActive: driver.isActive,\n    });\n    setIsDialogOpen(true);\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!formData.name.trim() || !formData.phone.trim()) {\n      toast({\n        title: \"خطأ\",\n        description: \"يرجى إدخال الاسم ورقم الهاتف\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    if (!editingDriver && !formData.password.trim()) {\n      toast({\n        title: \"خطأ\",\n        description: \"يرجى إدخال كلمة المرور للسائق الجديد\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    const submitData = editingDriver && !formData.password.trim() \n      ? { ...formData, password: undefined } \n      : formData;\n\n    if (editingDriver) {\n      updateDriverMutation.mutate({ id: editingDriver.id, data: submitData });\n    } else {\n      createDriverMutation.mutate(formData);\n    }\n  };\n\n  const toggleDriverStatus = (driver: Driver, field: 'isAvailable' | 'isActive') => {\n    updateDriverMutation.mutate({\n      id: driver.id,\n      data: { [field]: !driver[field] }\n    });\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-3\">\n          <Truck className=\"h-8 w-8 text-primary\" />\n          <div>\n            <h1 className=\"text-2xl font-bold text-foreground\">إدارة السائقين</h1>\n            <p className=\"text-muted-foreground\">إدارة سائقي التوصيل</p>\n          </div>\n        </div>\n        \n        <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\n          <DialogTrigger asChild>\n            <Button \n              className=\"gap-2\"\n              onClick={() => {\n                resetForm();\n                setIsDialogOpen(true);\n              }}\n              data-testid=\"button-add-driver\"\n            >\n              <Plus className=\"h-4 w-4\" />\n              إضافة سائق جديد\n            </Button>\n          </DialogTrigger>\n          <DialogContent className=\"max-w-md\">\n            <DialogHeader>\n              <DialogTitle>\n                {editingDriver ? 'تعديل بيانات السائق' : 'إضافة سائق جديد'}\n              </DialogTitle>\n            </DialogHeader>\n            \n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n              <div>\n                <Label htmlFor=\"name\">الاسم الكامل</Label>\n                <Input\n                  id=\"name\"\n                  value={formData.name}\n                  onChange={(e) => setFormData(prev => ({ ...prev, name: e.target.value }))}\n                  placeholder=\"أدخل اسم السائق\"\n                  required\n                  data-testid=\"input-driver-name\"\n                />\n              </div>\n\n              <div>\n                <Label htmlFor=\"phone\">رقم الهاتف</Label>\n                <Input\n                  id=\"phone\"\n                  value={formData.phone}\n                  onChange={(e) => setFormData(prev => ({ ...prev, phone: e.target.value }))}\n                  placeholder=\"+967-771234567\"\n                  required\n                  data-testid=\"input-driver-phone\"\n                />\n              </div>\n\n              <div>\n                <Label htmlFor=\"password\">\n                  كلمة المرور {editingDriver && \"(اتركها فارغة للاحتفاظ بالحالية)\"}\n                </Label>\n                <Input\n                  id=\"password\"\n                  type=\"password\"\n                  value={formData.password}\n                  onChange={(e) => setFormData(prev => ({ ...prev, password: e.target.value }))}\n                  placeholder=\"كلمة المرور\"\n                  required={!editingDriver}\n                  data-testid=\"input-driver-password\"\n                />\n              </div>\n\n              <div>\n                <Label htmlFor=\"location\">الموقع الحالي</Label>\n                <Input\n                  id=\"location\"\n                  value={formData.currentLocation}\n                  onChange={(e) => setFormData(prev => ({ ...prev, currentLocation: e.target.value }))}\n                  placeholder=\"الموقع الحالي للسائق\"\n                  data-testid=\"input-driver-location\"\n                />\n              </div>\n\n              <div className=\"space-y-3\">\n                <div className=\"flex items-center justify-between\">\n                  <Label htmlFor=\"available\">متاح للعمل</Label>\n                  <Switch\n                    id=\"available\"\n                    checked={formData.isAvailable}\n                    onCheckedChange={(checked) => setFormData(prev => ({ ...prev, isAvailable: checked }))}\n                    data-testid=\"switch-driver-available\"\n                  />\n                </div>\n                \n                <div className=\"flex items-center justify-between\">\n                  <Label htmlFor=\"active\">نشط</Label>\n                  <Switch\n                    id=\"active\"\n                    checked={formData.isActive}\n                    onCheckedChange={(checked) => setFormData(prev => ({ ...prev, isActive: checked }))}\n                    data-testid=\"switch-driver-active\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"flex gap-2 pt-4\">\n                <Button \n                  type=\"submit\" \n                  className=\"flex-1 gap-2\"\n                  disabled={createDriverMutation.isPending || updateDriverMutation.isPending}\n                  data-testid=\"button-save-driver\"\n                >\n                  <Save className=\"h-4 w-4\" />\n                  {editingDriver ? 'تحديث' : 'إضافة'}\n                </Button>\n                <Button \n                  type=\"button\" \n                  variant=\"outline\" \n                  onClick={() => {\n                    resetForm();\n                    setIsDialogOpen(false);\n                  }}\n                  data-testid=\"button-cancel-driver\"\n                >\n                  <X className=\"h-4 w-4\" />\n                  إلغاء\n                </Button>\n              </div>\n            </form>\n          </DialogContent>\n        </Dialog>\n      </div>\n\n      {/* Drivers Grid */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {isLoading ? (\n          [...Array(6)].map((_, i) => (\n            <Card key={i} className=\"animate-pulse\">\n              <CardContent className=\"p-6\">\n                <div className=\"w-16 h-16 bg-muted rounded-full mb-4 mx-auto\" />\n                <div className=\"h-4 bg-muted rounded w-3/4 mb-2 mx-auto\" />\n                <div className=\"h-3 bg-muted rounded w-1/2 mx-auto\" />\n              </CardContent>\n            </Card>\n          ))\n        ) : drivers?.length ? (\n          drivers.map((driver) => (\n            <Card key={driver.id} className=\"hover:shadow-md transition-shadow\">\n              <CardHeader className=\"text-center pb-3\">\n                <div className=\"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-3\">\n                  <User className=\"h-8 w-8 text-primary\" />\n                </div>\n                <CardTitle className=\"text-lg\">{driver.name}</CardTitle>\n                <div className=\"flex items-center justify-center gap-2 mt-2\">\n                  <Badge variant={driver.isActive ? \"default\" : \"secondary\"}>\n                    {driver.isActive ? 'نشط' : 'غير نشط'}\n                  </Badge>\n                  <Badge variant={driver.isAvailable ? \"default\" : \"outline\"}>\n                    {driver.isAvailable ? 'متاح' : 'غير متاح'}\n                  </Badge>\n                </div>\n              </CardHeader>\n              \n              <CardContent className=\"space-y-4\">\n                <div className=\"space-y-2\">\n                  <div className=\"flex items-center gap-2\">\n                    <Phone className=\"h-4 w-4 text-muted-foreground\" />\n                    <span className=\"text-sm text-foreground\">{driver.phone}</span>\n                  </div>\n                  \n                  {driver.currentLocation && (\n                    <div className=\"flex items-center gap-2\">\n                      <MapPin className=\"h-4 w-4 text-muted-foreground\" />\n                      <span className=\"text-sm text-foreground\">{driver.currentLocation}</span>\n                    </div>\n                  )}\n                  \n                  <div className=\"flex items-center gap-2\">\n                    <DollarSign className=\"h-4 w-4 text-muted-foreground\" />\n                    <span className=\"text-sm text-foreground\">الأرباح: {driver.earnings || 0} ريال</span>\n                  </div>\n                </div>\n\n                <div className=\"grid grid-cols-2 gap-2\">\n                  <div className=\"text-center\">\n                    <p className=\"text-xs text-muted-foreground\">متاح للعمل</p>\n                    <Switch\n                      checked={driver.isAvailable}\n                      onCheckedChange={() => toggleDriverStatus(driver, 'isAvailable')}\n                      data-testid={`switch-driver-available-${driver.id}`}\n                    />\n                  </div>\n                  <div className=\"text-center\">\n                    <p className=\"text-xs text-muted-foreground\">نشط</p>\n                    <Switch\n                      checked={driver.isActive}\n                      onCheckedChange={() => toggleDriverStatus(driver, 'isActive')}\n                      data-testid={`switch-driver-active-${driver.id}`}\n                    />\n                  </div>\n                </div>\n\n                <div className=\"flex gap-2 pt-2\">\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    className=\"flex-1 gap-2\"\n                    onClick={() => handleEdit(driver)}\n                    data-testid={`button-edit-driver-${driver.id}`}\n                  >\n                    <Edit className=\"h-4 w-4\" />\n                    تعديل\n                  </Button>\n                  \n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => window.open(`tel:${driver.phone}`)}\n                    data-testid={`button-call-driver-${driver.id}`}\n                  >\n                    <Phone className=\"h-4 w-4\" />\n                  </Button>\n                  \n                  <AlertDialog>\n                    <AlertDialogTrigger asChild>\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        className=\"text-destructive hover:text-destructive\"\n                        data-testid={`button-delete-driver-${driver.id}`}\n                      >\n                        <Trash2 className=\"h-4 w-4\" />\n                      </Button>\n                    </AlertDialogTrigger>\n                    <AlertDialogContent>\n                      <AlertDialogHeader>\n                        <AlertDialogTitle>تأكيد الحذف</AlertDialogTitle>\n                        <AlertDialogDescription>\n                          هل أنت متأكد من حذف السائق \"{driver.name}\"؟ \n                          لن يتمكن من الوصول للتطبيق بعد الحذف.\n                        </AlertDialogDescription>\n                      </AlertDialogHeader>\n                      <AlertDialogFooter>\n                        <AlertDialogCancel>إلغاء</AlertDialogCancel>\n                        <AlertDialogAction\n                          onClick={() => deleteDriverMutation.mutate(driver.id)}\n                          className=\"bg-destructive hover:bg-destructive/90\"\n                        >\n                          حذف\n                        </AlertDialogAction>\n                      </AlertDialogFooter>\n                    </AlertDialogContent>\n                  </AlertDialog>\n                </div>\n              </CardContent>\n            </Card>\n          ))\n        ) : (\n          <div className=\"col-span-full text-center py-12\">\n            <Truck className=\"h-12 w-12 text-muted-foreground mx-auto mb-4\" />\n            <h3 className=\"text-lg font-semibold text-foreground mb-2\">لا توجد سائقين</h3>\n            <p className=\"text-muted-foreground mb-4\">ابدأ بإضافة سائقين لخدمة التوصيل</p>\n            <Button onClick={() => setIsDialogOpen(true)} data-testid=\"button-add-first-driver\">\n              إضافة السائق الأول\n            </Button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}","size_bytes":16327},"client/src/pages/AdminMenuItems.tsx":{"content":"import { useState } from 'react';\r\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { Plus, Edit, Trash2, Package, Save, X, DollarSign, Tag } from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { Switch } from '@/components/ui/switch';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\r\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle, AlertDialogTrigger } from '@/components/ui/alert-dialog';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { apiRequest } from '@/lib/queryClient';\r\nimport type { MenuItem, Restaurant } from '@shared/schema';\r\n\r\nexport default function AdminMenuItems() {\r\n  const { toast } = useToast();\r\n  const queryClient = useQueryClient();\r\n  const [editingItem, setEditingItem] = useState<MenuItem | null>(null);\r\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\r\n  const [selectedRestaurant, setSelectedRestaurant] = useState<string>('');\r\n  \r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    description: '',\r\n    price: '',\r\n    originalPrice: '',\r\n    image: '',\r\n    category: '',\r\n    isAvailable: true,\r\n    isSpecialOffer: false,\r\n    restaurantId: '',\r\n  });\r\n\r\n  const { data: restaurants } = useQuery<Restaurant[]>({\r\n    queryKey: ['/api/restaurants'],\r\n  });\r\n\r\n  const { data: menuItems, isLoading } = useQuery<MenuItem[]>({\r\n    queryKey: ['/api/restaurants', selectedRestaurant, 'menu'],\r\n    enabled: !!selectedRestaurant,\r\n  });\r\n\r\n  const createMenuItemMutation = useMutation({\r\n    mutationFn: async (data: typeof formData) => {\r\n      const submitData = {\r\n        ...data,\r\n        price: parseFloat(data.price),\r\n        originalPrice: data.originalPrice ? parseFloat(data.originalPrice) : null,\r\n      };\r\n      const response = await apiRequest('POST', '/api/menu-items', submitData);\r\n      return response.json();\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['/api/restaurants', selectedRestaurant, 'menu'] });\r\n      toast({\r\n        title: \"تم إضافة الوجبة\",\r\n        description: \"تم إضافة الوجبة الجديدة بنجاح\",\r\n      });\r\n      resetForm();\r\n      setIsDialogOpen(false);\r\n    },\r\n  });\r\n\r\n  const updateMenuItemMutation = useMutation({\r\n    mutationFn: async ({ id, data }: { id: string; data: typeof formData }) => {\r\n      const submitData = {\r\n        ...data,\r\n        price: parseFloat(data.price),\r\n        originalPrice: data.originalPrice ? parseFloat(data.originalPrice) : null,\r\n      };\r\n      const response = await apiRequest('PUT', `/api/menu-items/${id}`, submitData);\r\n      return response.json();\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['/api/restaurants', selectedRestaurant, 'menu'] });\r\n      toast({\r\n        title: \"تم تحديث الوجبة\",\r\n        description: \"تم تحديث الوجبة بنجاح\",\r\n      });\r\n      resetForm();\r\n      setEditingItem(null);\r\n      setIsDialogOpen(false);\r\n    },\r\n  });\r\n\r\n  const deleteMenuItemMutation = useMutation({\r\n    mutationFn: async (id: string) => {\r\n      const response = await apiRequest('DELETE', `/api/menu-items/${id}`);\r\n      return response.json();\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['/api/restaurants', selectedRestaurant, 'menu'] });\r\n      toast({\r\n        title: \"تم حذف الوجبة\",\r\n        description: \"تم حذف الوجبة بنجاح\",\r\n      });\r\n    },\r\n  });\r\n\r\n  const resetForm = () => {\r\n    setFormData({\r\n      name: '',\r\n      description: '',\r\n      price: '',\r\n      originalPrice: '',\r\n      image: '',\r\n      category: '',\r\n      isAvailable: true,\r\n      isSpecialOffer: false,\r\n      restaurantId: selectedRestaurant,\r\n    });\r\n    setEditingItem(null);\r\n  };\r\n\r\n  const handleEdit = (item: MenuItem) => {\r\n    setEditingItem(item);\r\n    setFormData({\r\n      name: item.name,\r\n      description: item.description || '',\r\n      price: item.price,\r\n      originalPrice: item.originalPrice || '',\r\n      image: item.image,\r\n      category: item.category,\r\n      isAvailable: item.isAvailable,\r\n      isSpecialOffer: item.isSpecialOffer,\r\n      restaurantId: item.restaurantId || '',\r\n    });\r\n    setIsDialogOpen(true);\r\n  };\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!formData.name.trim() || !formData.price || !selectedRestaurant) {\r\n      toast({\r\n        title: \"خطأ\",\r\n        description: \"يرجى إدخال جميع البيانات المطلوبة\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    const dataWithRestaurant = { ...formData, restaurantId: selectedRestaurant };\r\n\r\n    if (editingItem) {\r\n      updateMenuItemMutation.mutate({ id: editingItem.id, data: dataWithRestaurant });\r\n    } else {\r\n      createMenuItemMutation.mutate(dataWithRestaurant);\r\n    }\r\n  };\r\n\r\n  const toggleItemStatus = (item: MenuItem, field: 'isAvailable' | 'isSpecialOffer') => {\r\n    updateMenuItemMutation.mutate({\r\n      id: item.id,\r\n      data: { ...formData, [field]: !item[field] }\r\n    });\r\n  };\r\n\r\n  const menuCategories = [\r\n    'وجبات رمضان',\r\n    'المشروبات',\r\n    'الحلويات',\r\n    'الوجبات الرئيسية',\r\n    'المقبلات',\r\n    'السلطات',\r\n    'العروض',\r\n    'أخرى'\r\n  ];\r\n\r\n  const parseDecimal = (value: string | null): number => {\r\n    if (!value) return 0;\r\n    const num = parseFloat(value);\r\n    return isNaN(num) ? 0 : num;\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <Package className=\"h-8 w-8 text-primary\" />\r\n          <div>\r\n            <h1 className=\"text-2xl font-bold text-foreground\">إدارة قوائم الطعام</h1>\r\n            <p className=\"text-muted-foreground\">إدارة الوجبات والمنتجات</p>\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"flex items-center gap-3\">\r\n          <Select value={selectedRestaurant} onValueChange={setSelectedRestaurant}>\r\n            <SelectTrigger className=\"w-48\" data-testid=\"select-restaurant\">\r\n              <SelectValue placeholder=\"اختر مطعم\" />\r\n            </SelectTrigger>\r\n            <SelectContent>\r\n              {restaurants?.map((restaurant) => (\r\n                <SelectItem key={restaurant.id} value={restaurant.id}>\r\n                  {restaurant.name}\r\n                </SelectItem>\r\n              ))}\r\n            </SelectContent>\r\n          </Select>\r\n\r\n          <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\r\n            <DialogTrigger asChild>\r\n              <Button \r\n                className=\"gap-2\"\r\n                onClick={() => {\r\n                  resetForm();\r\n                  setIsDialogOpen(true);\r\n                }}\r\n                disabled={!selectedRestaurant}\r\n                data-testid=\"button-add-menu-item\"\r\n              >\r\n                <Plus className=\"h-4 w-4\" />\r\n                إضافة وجبة\r\n              </Button>\r\n            </DialogTrigger>\r\n            <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n              <DialogHeader>\r\n                <DialogTitle>\r\n                  {editingItem ? 'تعديل الوجبة' : 'إضافة وجبة جديدة'}\r\n                </DialogTitle>\r\n              </DialogHeader>\r\n              \r\n              <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                <div>\r\n                  <Label htmlFor=\"name\">اسم الوجبة</Label>\r\n                  <Input\r\n                    id=\"name\"\r\n                    value={formData.name}\r\n                    onChange={(e) => setFormData(prev => ({ ...prev, name: e.target.value }))}\r\n                    placeholder=\"أدخل اسم الوجبة\"\r\n                    required\r\n                    data-testid=\"input-menu-item-name\"\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <Label htmlFor=\"description\">وصف الوجبة</Label>\r\n                  <Textarea\r\n                    id=\"description\"\r\n                    value={formData.description}\r\n                    onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\r\n                    placeholder=\"وصف مفصل للوجبة ومكوناتها\"\r\n                    rows={3}\r\n                    data-testid=\"input-menu-item-description\"\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <Label htmlFor=\"image\">رابط صورة الوجبة</Label>\r\n                  <Input\r\n                    id=\"image\"\r\n                    value={formData.image}\r\n                    onChange={(e) => setFormData(prev => ({ ...prev, image: e.target.value }))}\r\n                    placeholder=\"https://example.com/food-image.jpg\"\r\n                    required\r\n                    data-testid=\"input-menu-item-image\"\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                  <div>\r\n                    <Label htmlFor=\"category\">قسم الوجبة</Label>\r\n                    <Select value={formData.category} onValueChange={(value) => setFormData(prev => ({ ...prev, category: value }))}>\r\n                      <SelectTrigger data-testid=\"select-menu-item-category\">\r\n                        <SelectValue placeholder=\"اختر قسم الوجبة\" />\r\n                      </SelectTrigger>\r\n                      <SelectContent>\r\n                        {menuCategories.map((category) => (\r\n                          <SelectItem key={category} value={category}>\r\n                            {category}\r\n                          </SelectItem>\r\n                        ))}\r\n                      </SelectContent>\r\n                    </Select>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <Label htmlFor=\"price\">السعر (ريال)</Label>\r\n                    <Input\r\n                      id=\"price\"\r\n                      type=\"number\"\r\n                      min=\"0\"\r\n                      step=\"0.01\"\r\n                      value={formData.price}\r\n                      onChange={(e) => setFormData(prev => ({ ...prev, price: e.target.value }))}\r\n                      placeholder=\"0.00\"\r\n                      required\r\n                      data-testid=\"input-menu-item-price\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                <div>\r\n                  <Label htmlFor=\"originalPrice\">السعر الأصلي (للعروض)</Label>\r\n                  <Input\r\n                    id=\"originalPrice\"\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    step=\"0.01\"\r\n                    value={formData.originalPrice}\r\n                    onChange={(e) => setFormData(prev => ({ ...prev, originalPrice: e.target.value }))}\r\n                    placeholder=\"السعر قبل الخصم (اختياري)\"\r\n                    data-testid=\"input-menu-item-original-price\"\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <Label htmlFor=\"isAvailable\">متوفر</Label>\r\n                    <Switch\r\n                      id=\"isAvailable\"\r\n                      checked={formData.isAvailable}\r\n                      onCheckedChange={(checked) => setFormData(prev => ({ ...prev, isAvailable: checked }))}\r\n                      data-testid=\"switch-menu-item-available\"\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <Label htmlFor=\"isSpecialOffer\">عرض خاص</Label>\r\n                    <Switch\r\n                      id=\"isSpecialOffer\"\r\n                      checked={formData.isSpecialOffer}\r\n                      onCheckedChange={(checked) => setFormData(prev => ({ ...prev, isSpecialOffer: checked }))}\r\n                      data-testid=\"switch-menu-item-special-offer\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"flex gap-2 pt-4\">\r\n                  <Button \r\n                    type=\"submit\" \r\n                    className=\"flex-1 gap-2\"\r\n                    disabled={createMenuItemMutation.isPending || updateMenuItemMutation.isPending}\r\n                    data-testid=\"button-save-menu-item\"\r\n                  >\r\n                    <Save className=\"h-4 w-4\" />\r\n                    {editingItem ? 'تحديث' : 'إضافة'}\r\n                  </Button>\r\n                  <Button \r\n                    type=\"button\" \r\n                    variant=\"outline\" \r\n                    onClick={() => {\r\n                      resetForm();\r\n                      setIsDialogOpen(false);\r\n                    }}\r\n                    data-testid=\"button-cancel-menu-item\"\r\n                  >\r\n                    <X className=\"h-4 w-4\" />\r\n                    إلغاء\r\n                  </Button>\r\n                </div>\r\n              </form>\r\n            </DialogContent>\r\n          </Dialog>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Restaurant Selection Message */}\r\n      {!selectedRestaurant && (\r\n        <Card>\r\n          <CardContent className=\"p-8 text-center\">\r\n            <Package className=\"h-16 w-16 text-muted-foreground mx-auto mb-4\" />\r\n            <h3 className=\"text-lg font-semibold text-foreground mb-2\">اختر مطعم</h3>\r\n            <p className=\"text-muted-foreground\">يرجى اختيار مطعم من القائمة أعلاه لعرض وإدارة قائمة الطعام</p>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Menu Items Grid */}\r\n      {selectedRestaurant && (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n          {isLoading ? (\r\n            [...Array(6)].map((_, i) => (\r\n              <Card key={i} className=\"animate-pulse\">\r\n                <div className=\"w-full h-48 bg-muted\" />\r\n                <CardContent className=\"p-4\">\r\n                  <div className=\"h-4 bg-muted rounded w-3/4 mb-2\" />\r\n                  <div className=\"h-3 bg-muted rounded w-1/2\" />\r\n                </CardContent>\r\n              </Card>\r\n            ))\r\n          ) : menuItems?.length ? (\r\n            menuItems.map((item) => (\r\n              <Card key={item.id} className=\"hover:shadow-md transition-shadow overflow-hidden\">\r\n                <div className=\"w-full h-48 bg-gradient-to-br from-primary/20 to-primary/5 flex items-center justify-center\">\r\n                  {item.image ? (\r\n                    <img \r\n                      src={item.image} \r\n                      alt={item.name}\r\n                      className=\"w-full h-full object-cover\"\r\n                    />\r\n                  ) : (\r\n                    <Package className=\"h-16 w-16 text-primary/50\" />\r\n                  )}\r\n                </div>\r\n                \r\n                <CardHeader className=\"pb-3\">\r\n                  <div className=\"flex items-start justify-between\">\r\n                    <div className=\"flex-1\">\r\n                      <CardTitle className=\"text-lg mb-2\">{item.name}</CardTitle>\r\n                      <Badge variant=\"secondary\" className=\"mb-2\">\r\n                        {item.category}\r\n                      </Badge>\r\n                      {item.description && (\r\n                        <p className=\"text-xs text-muted-foreground line-clamp-2\">\r\n                          {item.description}\r\n                        </p>\r\n                      )}\r\n                    </div>\r\n                    <div className=\"flex flex-col gap-1\">\r\n                      <Badge variant={item.isAvailable ? \"default\" : \"outline\"}>\r\n                        {item.isAvailable ? 'متوفر' : 'غير متوفر'}\r\n                      </Badge>\r\n                      {item.isSpecialOffer && (\r\n                        <Badge className=\"bg-green-500\">عرض خاص</Badge>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </CardHeader>\r\n                \r\n                <CardContent className=\"space-y-4\">\r\n                  <div className=\"text-center\">\r\n                    <div className=\"flex items-center justify-center gap-2\">\r\n                      <span className=\"text-lg font-bold text-primary\">\r\n                        {parseDecimal(item.price)} ريال\r\n                      </span>\r\n                      {item.originalPrice && (\r\n                        <span className=\"text-sm text-muted-foreground line-through\">\r\n                          {parseDecimal(item.originalPrice)} ريال\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"grid grid-cols-2 gap-2\">\r\n                    <div className=\"text-center\">\r\n                      <p className=\"text-xs text-muted-foreground\">متوفر</p>\r\n                      <Switch\r\n                        checked={item.isAvailable}\r\n                        onCheckedChange={() => toggleItemStatus(item, 'isAvailable')}\r\n                        data-testid={`switch-item-available-${item.id}`}\r\n                      />\r\n                    </div>\r\n                    <div className=\"text-center\">\r\n                      <p className=\"text-xs text-muted-foreground\">عرض خاص</p>\r\n                      <Switch\r\n                        checked={item.isSpecialOffer}\r\n                        onCheckedChange={() => toggleItemStatus(item, 'isSpecialOffer')}\r\n                        data-testid={`switch-item-special-${item.id}`}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"flex gap-2 pt-2\">\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      className=\"flex-1 gap-2\"\r\n                      onClick={() => handleEdit(item)}\r\n                      data-testid={`button-edit-menu-item-${item.id}`}\r\n                    >\r\n                      <Edit className=\"h-4 w-4\" />\r\n                      تعديل\r\n                    </Button>\r\n                    \r\n                    <AlertDialog>\r\n                      <AlertDialogTrigger asChild>\r\n                        <Button\r\n                          variant=\"outline\"\r\n                          size=\"sm\"\r\n                          className=\"text-destructive hover:text-destructive\"\r\n                          data-testid={`button-delete-menu-item-${item.id}`}\r\n                        >\r\n                          <Trash2 className=\"h-4 w-4\" />\r\n                        </Button>\r\n                      </AlertDialogTrigger>\r\n                      <AlertDialogContent>\r\n                        <AlertDialogHeader>\r\n                          <AlertDialogTitle>تأكيد الحذف</AlertDialogTitle>\r\n                          <AlertDialogDescription>\r\n                            هل أنت متأكد من حذف الوجبة \"{item.name}\"؟ \r\n                            لن تظهر في قائمة المطعم بعد الحذف.\r\n                          </AlertDialogDescription>\r\n                        </AlertDialogHeader>\r\n                        <AlertDialogFooter>\r\n                          <AlertDialogCancel>إلغاء</AlertDialogCancel>\r\n                          <AlertDialogAction\r\n                            onClick={() => deleteMenuItemMutation.mutate(item.id)}\r\n                            className=\"bg-destructive hover:bg-destructive/90\"\r\n                          >\r\n                            حذف\r\n                          </AlertDialogAction>\r\n                        </AlertDialogFooter>\r\n                      </AlertDialogContent>\r\n                    </AlertDialog>\r\n                  </div>\r\n                </CardContent>\r\n              </Card>\r\n            ))\r\n          ) : selectedRestaurant ? (\r\n            <div className=\"col-span-full text-center py-12\">\r\n              <Package className=\"h-12 w-12 text-muted-foreground mx-auto mb-4\" />\r\n              <h3 className=\"text-lg font-semibold text-foreground mb-2\">لا توجد وجبات</h3>\r\n              <p className=\"text-muted-foreground mb-4\">ابدأ بإضافة وجبات لهذا المطعم</p>\r\n              <Button onClick={() => setIsDialogOpen(true)} data-testid=\"button-add-first-menu-item\">\r\n                إضافة الوجبة الأولى\r\n              </Button>\r\n            </div>\r\n          ) : null}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}","size_bytes":21412},"client/src/pages/AdminOffers.tsx":{"content":"import { useState } from 'react';\r\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { Plus, Edit, Trash2, Percent, Save, X, Calendar, DollarSign } from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { Switch } from '@/components/ui/switch';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\r\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle, AlertDialogTrigger } from '@/components/ui/alert-dialog';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { apiRequest } from '@/lib/queryClient';\r\nimport type { SpecialOffer } from '@shared/schema';\r\n\r\nexport default function AdminOffers() {\r\n  const { toast } = useToast();\r\n  const queryClient = useQueryClient();\r\n  const [editingOffer, setEditingOffer] = useState<SpecialOffer | null>(null);\r\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\r\n  \r\n  const [formData, setFormData] = useState({\r\n    title: '',\r\n    description: '',\r\n    image: '',\r\n    discountPercent: '',\r\n    discountAmount: '',\r\n    minimumOrder: '0',\r\n    validUntil: '',\r\n    isActive: true,\r\n  });\r\n\r\n  const { data: offers, isLoading } = useQuery<SpecialOffer[]>({\r\n    queryKey: ['/api/special-offers'],\r\n  });\r\n\r\n  const createOfferMutation = useMutation({\r\n    mutationFn: async (data: typeof formData) => {\r\n      const submitData = {\r\n        ...data,\r\n        discountPercent: data.discountPercent ? parseInt(data.discountPercent) : null,\r\n        discountAmount: data.discountAmount ? parseFloat(data.discountAmount) : null,\r\n        minimumOrder: parseFloat(data.minimumOrder),\r\n        validUntil: data.validUntil ? new Date(data.validUntil) : null,\r\n      };\r\n      const response = await apiRequest('POST', '/api/special-offers', submitData);\r\n      return response.json();\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['/api/special-offers'] });\r\n      toast({\r\n        title: \"تم إنشاء العرض\",\r\n        description: \"تم إضافة العرض الجديد بنجاح\",\r\n      });\r\n      resetForm();\r\n      setIsDialogOpen(false);\r\n    },\r\n  });\r\n\r\n  const updateOfferMutation = useMutation({\r\n    mutationFn: async ({ id, data }: { id: string; data: typeof formData }) => {\r\n      const submitData = {\r\n        ...data,\r\n        discountPercent: data.discountPercent ? parseInt(data.discountPercent) : null,\r\n        discountAmount: data.discountAmount ? parseFloat(data.discountAmount) : null,\r\n        minimumOrder: parseFloat(data.minimumOrder),\r\n        validUntil: data.validUntil ? new Date(data.validUntil) : null,\r\n      };\r\n      const response = await apiRequest('PUT', `/api/special-offers/${id}`, submitData);\r\n      return response.json();\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['/api/special-offers'] });\r\n      toast({\r\n        title: \"تم تحديث العرض\",\r\n        description: \"تم تحديث العرض بنجاح\",\r\n      });\r\n      resetForm();\r\n      setEditingOffer(null);\r\n      setIsDialogOpen(false);\r\n    },\r\n  });\r\n\r\n  const deleteOfferMutation = useMutation({\r\n    mutationFn: async (id: string) => {\r\n      const response = await apiRequest('DELETE', `/api/special-offers/${id}`);\r\n      return response.json();\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['/api/special-offers'] });\r\n      toast({\r\n        title: \"تم حذف العرض\",\r\n        description: \"تم حذف العرض بنجاح\",\r\n      });\r\n    },\r\n  });\r\n\r\n  const resetForm = () => {\r\n    setFormData({\r\n      title: '',\r\n      description: '',\r\n      image: '',\r\n      discountPercent: '',\r\n      discountAmount: '',\r\n      minimumOrder: '0',\r\n      validUntil: '',\r\n      isActive: true,\r\n    });\r\n    setEditingOffer(null);\r\n  };\r\n\r\n  const handleEdit = (offer: SpecialOffer) => {\r\n    setEditingOffer(offer);\r\n    setFormData({\r\n      title: offer.title,\r\n      description: offer.description,\r\n      image: offer.image,\r\n      discountPercent: offer.discountPercent?.toString() || '',\r\n      discountAmount: offer.discountAmount || '',\r\n      minimumOrder: offer.minimumOrder || '0',\r\n      validUntil: offer.validUntil ? new Date(offer.validUntil).toISOString().slice(0, 16) : '',\r\n      isActive: offer.isActive,\r\n    });\r\n    setIsDialogOpen(true);\r\n  };\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!formData.title.trim() || !formData.description.trim()) {\r\n      toast({\r\n        title: \"خطأ\",\r\n        description: \"يرجى إدخال عنوان ووصف العرض\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (!formData.discountPercent && !formData.discountAmount) {\r\n      toast({\r\n        title: \"خطأ\",\r\n        description: \"يرجى إدخال نسبة الخصم أو مبلغ الخصم\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (editingOffer) {\r\n      updateOfferMutation.mutate({ id: editingOffer.id, data: formData });\r\n    } else {\r\n      createOfferMutation.mutate(formData);\r\n    }\r\n  };\r\n\r\n  const toggleOfferStatus = (offer: SpecialOffer) => {\r\n    updateOfferMutation.mutate({\r\n      id: offer.id,\r\n      data: { ...formData, isActive: !offer.isActive }\r\n    });\r\n  };\r\n\r\n  const parseDecimal = (value: string | null): number => {\r\n    if (!value) return 0;\r\n    const num = parseFloat(value);\r\n    return isNaN(num) ? 0 : num;\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <Percent className=\"h-8 w-8 text-primary\" />\r\n          <div>\r\n            <h1 className=\"text-2xl font-bold text-foreground\">إدارة العروض الخاصة</h1>\r\n            <p className=\"text-muted-foreground\">إنشاء وإدارة العروض والخصومات</p>\r\n          </div>\r\n        </div>\r\n        \r\n        <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\r\n          <DialogTrigger asChild>\r\n            <Button \r\n              className=\"gap-2\"\r\n              onClick={() => {\r\n                resetForm();\r\n                setIsDialogOpen(true);\r\n              }}\r\n              data-testid=\"button-add-offer\"\r\n            >\r\n              <Plus className=\"h-4 w-4\" />\r\n              إضافة عرض جديد\r\n            </Button>\r\n          </DialogTrigger>\r\n          <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n            <DialogHeader>\r\n              <DialogTitle>\r\n                {editingOffer ? 'تعديل العرض' : 'إضافة عرض جديد'}\r\n              </DialogTitle>\r\n            </DialogHeader>\r\n            \r\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n              <div>\r\n                <Label htmlFor=\"title\">عنوان العرض</Label>\r\n                <Input\r\n                  id=\"title\"\r\n                  value={formData.title}\r\n                  onChange={(e) => setFormData(prev => ({ ...prev, title: e.target.value }))}\r\n                  placeholder=\"مثال: خصم 30% على جميع الوجبات\"\r\n                  required\r\n                  data-testid=\"input-offer-title\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <Label htmlFor=\"description\">وصف العرض</Label>\r\n                <Textarea\r\n                  id=\"description\"\r\n                  value={formData.description}\r\n                  onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\r\n                  placeholder=\"تفاصيل العرض وشروطه\"\r\n                  rows={3}\r\n                  required\r\n                  data-testid=\"input-offer-description\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <Label htmlFor=\"image\">رابط صورة العرض</Label>\r\n                <Input\r\n                  id=\"image\"\r\n                  value={formData.image}\r\n                  onChange={(e) => setFormData(prev => ({ ...prev, image: e.target.value }))}\r\n                  placeholder=\"https://example.com/offer-image.jpg\"\r\n                  required\r\n                  data-testid=\"input-offer-image\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div>\r\n                  <Label htmlFor=\"discountPercent\">نسبة الخصم (%)</Label>\r\n                  <Input\r\n                    id=\"discountPercent\"\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    max=\"100\"\r\n                    value={formData.discountPercent}\r\n                    onChange={(e) => setFormData(prev => ({ \r\n                      ...prev, \r\n                      discountPercent: e.target.value,\r\n                      discountAmount: '' // Clear the other field\r\n                    }))}\r\n                    placeholder=\"مثال: 20\"\r\n                    data-testid=\"input-offer-discount-percent\"\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <Label htmlFor=\"discountAmount\">مبلغ الخصم (ريال)</Label>\r\n                  <Input\r\n                    id=\"discountAmount\"\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    step=\"0.01\"\r\n                    value={formData.discountAmount}\r\n                    onChange={(e) => setFormData(prev => ({ \r\n                      ...prev, \r\n                      discountAmount: e.target.value,\r\n                      discountPercent: '' // Clear the other field\r\n                    }))}\r\n                    placeholder=\"مثال: 15\"\r\n                    data-testid=\"input-offer-discount-amount\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div>\r\n                  <Label htmlFor=\"minimumOrder\">الحد الأدنى للطلب (ريال)</Label>\r\n                  <Input\r\n                    id=\"minimumOrder\"\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    step=\"0.01\"\r\n                    value={formData.minimumOrder}\r\n                    onChange={(e) => setFormData(prev => ({ ...prev, minimumOrder: e.target.value }))}\r\n                    data-testid=\"input-offer-minimum-order\"\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <Label htmlFor=\"validUntil\">صالح حتى</Label>\r\n                  <Input\r\n                    id=\"validUntil\"\r\n                    type=\"datetime-local\"\r\n                    value={formData.validUntil}\r\n                    onChange={(e) => setFormData(prev => ({ ...prev, validUntil: e.target.value }))}\r\n                    data-testid=\"input-offer-valid-until\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex items-center justify-between\">\r\n                <Label htmlFor=\"isActive\">العرض نشط</Label>\r\n                <Switch\r\n                  id=\"isActive\"\r\n                  checked={formData.isActive}\r\n                  onCheckedChange={(checked) => setFormData(prev => ({ ...prev, isActive: checked }))}\r\n                  data-testid=\"switch-offer-active\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"flex gap-2 pt-4\">\r\n                <Button \r\n                  type=\"submit\" \r\n                  className=\"flex-1 gap-2\"\r\n                  disabled={createOfferMutation.isPending || updateOfferMutation.isPending}\r\n                  data-testid=\"button-save-offer\"\r\n                >\r\n                  <Save className=\"h-4 w-4\" />\r\n                  {editingOffer ? 'تحديث' : 'إضافة'}\r\n                </Button>\r\n                <Button \r\n                  type=\"button\" \r\n                  variant=\"outline\" \r\n                  onClick={() => {\r\n                    resetForm();\r\n                    setIsDialogOpen(false);\r\n                  }}\r\n                  data-testid=\"button-cancel-offer\"\r\n                >\r\n                  <X className=\"h-4 w-4\" />\r\n                  إلغاء\r\n                </Button>\r\n              </div>\r\n            </form>\r\n          </DialogContent>\r\n        </Dialog>\r\n      </div>\r\n\r\n      {/* Offers Grid */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n        {isLoading ? (\r\n          [...Array(6)].map((_, i) => (\r\n            <Card key={i} className=\"animate-pulse\">\r\n              <div className=\"w-full h-48 bg-muted\" />\r\n              <CardContent className=\"p-4\">\r\n                <div className=\"h-4 bg-muted rounded w-3/4 mb-2\" />\r\n                <div className=\"h-3 bg-muted rounded w-1/2\" />\r\n              </CardContent>\r\n            </Card>\r\n          ))\r\n        ) : offers?.length ? (\r\n          offers.map((offer) => (\r\n            <Card key={offer.id} className=\"hover:shadow-md transition-shadow overflow-hidden\">\r\n              <div className=\"w-full h-48 bg-gradient-to-br from-primary/20 to-primary/5 flex items-center justify-center\">\r\n                {offer.image ? (\r\n                  <img \r\n                    src={offer.image} \r\n                    alt={offer.title}\r\n                    className=\"w-full h-full object-cover\"\r\n                  />\r\n                ) : (\r\n                  <Percent className=\"h-16 w-16 text-primary/50\" />\r\n                )}\r\n              </div>\r\n              \r\n              <CardHeader className=\"pb-3\">\r\n                <div className=\"flex items-start justify-between\">\r\n                  <div className=\"flex-1\">\r\n                    <CardTitle className=\"text-lg mb-2\">{offer.title}</CardTitle>\r\n                    <p className=\"text-xs text-muted-foreground line-clamp-2\">\r\n                      {offer.description}\r\n                    </p>\r\n                  </div>\r\n                  <Badge variant={offer.isActive ? \"default\" : \"outline\"}>\r\n                    {offer.isActive ? 'نشط' : 'غير نشط'}\r\n                  </Badge>\r\n                </div>\r\n              </CardHeader>\r\n              \r\n              <CardContent className=\"space-y-4\">\r\n                <div className=\"grid grid-cols-2 gap-2 text-sm\">\r\n                  {offer.discountPercent && (\r\n                    <div className=\"flex items-center gap-1\">\r\n                      <Percent className=\"h-4 w-4 text-green-500\" />\r\n                      <span>{offer.discountPercent}% خصم</span>\r\n                    </div>\r\n                  )}\r\n                  {offer.discountAmount && (\r\n                    <div className=\"flex items-center gap-1\">\r\n                      <DollarSign className=\"h-4 w-4 text-green-500\" />\r\n                      <span>{parseDecimal(offer.discountAmount)} ريال خصم</span>\r\n                    </div>\r\n                  )}\r\n                  <div className=\"text-xs text-muted-foreground\">\r\n                    أقل طلب: {parseDecimal(offer.minimumOrder)} ريال\r\n                  </div>\r\n                  {offer.validUntil && (\r\n                    <div className=\"flex items-center gap-1\">\r\n                      <Calendar className=\"h-4 w-4 text-muted-foreground\" />\r\n                      <span className=\"text-xs\">\r\n                        {new Date(offer.validUntil).toLocaleDateString('ar-YE')}\r\n                      </span>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"text-center\">\r\n                  <p className=\"text-xs text-muted-foreground\">نشط</p>\r\n                  <Switch\r\n                    checked={offer.isActive}\r\n                    onCheckedChange={() => toggleOfferStatus(offer)}\r\n                    data-testid={`switch-offer-active-${offer.id}`}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"flex gap-2 pt-2\">\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    className=\"flex-1 gap-2\"\r\n                    onClick={() => handleEdit(offer)}\r\n                    data-testid={`button-edit-offer-${offer.id}`}\r\n                  >\r\n                    <Edit className=\"h-4 w-4\" />\r\n                    تعديل\r\n                  </Button>\r\n                  \r\n                  <AlertDialog>\r\n                    <AlertDialogTrigger asChild>\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        className=\"text-destructive hover:text-destructive\"\r\n                        data-testid={`button-delete-offer-${offer.id}`}\r\n                      >\r\n                        <Trash2 className=\"h-4 w-4\" />\r\n                      </Button>\r\n                    </AlertDialogTrigger>\r\n                    <AlertDialogContent>\r\n                      <AlertDialogHeader>\r\n                        <AlertDialogTitle>تأكيد الحذف</AlertDialogTitle>\r\n                        <AlertDialogDescription>\r\n                          هل أنت متأكد من حذف العرض \"{offer.title}\"؟ \r\n                          لن يتمكن العملاء من رؤية هذا العرض بعد الحذف.\r\n                        </AlertDialogDescription>\r\n                      </AlertDialogHeader>\r\n                      <AlertDialogFooter>\r\n                        <AlertDialogCancel>إلغاء</AlertDialogCancel>\r\n                        <AlertDialogAction\r\n                          onClick={() => deleteOfferMutation.mutate(offer.id)}\r\n                          className=\"bg-destructive hover:bg-destructive/90\"\r\n                        >\r\n                          حذف\r\n                        </AlertDialogAction>\r\n                      </AlertDialogFooter>\r\n                    </AlertDialogContent>\r\n                  </AlertDialog>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          ))\r\n        ) : (\r\n          <div className=\"col-span-full text-center py-12\">\r\n            <Percent className=\"h-12 w-12 text-muted-foreground mx-auto mb-4\" />\r\n            <h3 className=\"text-lg font-semibold text-foreground mb-2\">لا توجد عروض</h3>\r\n            <p className=\"text-muted-foreground mb-4\">ابدأ بإضافة عروض خاصة لجذب العملاء</p>\r\n            <Button onClick={() => setIsDialogOpen(true)} data-testid=\"button-add-first-offer\">\r\n              إضافة العرض الأول\r\n            </Button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}","size_bytes":19092},"client/src/pages/AdminOrders.tsx":{"content":"import { useState } from 'react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { Package, Clock, CheckCircle, XCircle, Truck, Phone, MapPin, Filter } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { useToast } from '@/hooks/use-toast';\nimport { apiRequest } from '@/lib/queryClient';\nimport type { Order } from '@shared/schema';\n\nexport default function AdminOrders() {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [statusFilter, setStatusFilter] = useState<string>('all');\n\n  const { data: orders, isLoading } = useQuery<Order[]>({\n    queryKey: ['/api/orders', statusFilter !== 'all' ? { status: statusFilter } : {}],\n  });\n\n  const updateOrderStatusMutation = useMutation({\n    mutationFn: async ({ id, status }: { id: string; status: string }) => {\n      const response = await apiRequest('PUT', `/api/orders/${id}`, { status });\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/orders'] });\n      toast({\n        title: \"تم تحديث حالة الطلب\",\n        description: \"تم تحديث حالة الطلب بنجاح\",\n      });\n    },\n  });\n\n  const getOrderItems = (itemsString: string) => {\n    try {\n      return JSON.parse(itemsString);\n    } catch {\n      return [];\n    }\n  };\n\n  const getStatusBadge = (status: string) => {\n    const statusConfig = {\n      pending: { label: 'في الانتظار', color: 'bg-yellow-500' },\n      confirmed: { label: 'مؤكد', color: 'bg-blue-500' },\n      preparing: { label: 'قيد التحضير', color: 'bg-orange-500' },\n      on_way: { label: 'في الطريق', color: 'bg-purple-500' },\n      delivered: { label: 'تم التوصيل', color: 'bg-green-500' },\n      cancelled: { label: 'ملغي', color: 'bg-red-500' },\n    };\n    \n    const config = statusConfig[status as keyof typeof statusConfig] || statusConfig.pending;\n    return <Badge className={`${config.color} hover:${config.color}`}>{config.label}</Badge>;\n  };\n\n  const getNextStatus = (currentStatus: string) => {\n    const statusFlow = {\n      pending: 'confirmed',\n      confirmed: 'preparing',\n      preparing: 'on_way',\n      on_way: 'delivered',\n    };\n    return statusFlow[currentStatus as keyof typeof statusFlow];\n  };\n\n  const getNextStatusLabel = (currentStatus: string) => {\n    const labels = {\n      pending: 'تأكيد الطلب',\n      confirmed: 'بدء التحضير',\n      preparing: 'تجهيز للتوصيل',\n      on_way: 'تم التوصيل',\n    };\n    return labels[currentStatus as keyof typeof labels];\n  };\n\n  const filteredOrders = orders?.filter(order => {\n    if (statusFilter === 'all') return true;\n    return order.status === statusFilter;\n  });\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-3\">\n          <Package className=\"h-8 w-8 text-primary\" />\n          <div>\n            <h1 className=\"text-2xl font-bold text-foreground\">إدارة الطلبات</h1>\n            <p className=\"text-muted-foreground\">متابعة وإدارة جميع الطلبات</p>\n          </div>\n        </div>\n        \n        <div className=\"flex items-center gap-2\">\n          <Filter className=\"h-4 w-4 text-muted-foreground\" />\n          <Select value={statusFilter} onValueChange={setStatusFilter}>\n            <SelectTrigger className=\"w-40\" data-testid=\"select-order-status-filter\">\n              <SelectValue />\n            </SelectTrigger>\n            <SelectContent>\n              <SelectItem value=\"all\">جميع الطلبات</SelectItem>\n              <SelectItem value=\"pending\">في الانتظار</SelectItem>\n              <SelectItem value=\"confirmed\">مؤكدة</SelectItem>\n              <SelectItem value=\"preparing\">قيد التحضير</SelectItem>\n              <SelectItem value=\"on_way\">في الطريق</SelectItem>\n              <SelectItem value=\"delivered\">تم التوصيل</SelectItem>\n              <SelectItem value=\"cancelled\">ملغية</SelectItem>\n            </SelectContent>\n          </Select>\n        </div>\n      </div>\n\n      {/* Orders Grid */}\n      <div className=\"space-y-4\">\n        {isLoading ? (\n          [...Array(5)].map((_, i) => (\n            <Card key={i} className=\"animate-pulse\">\n              <CardContent className=\"p-6\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <div className=\"h-6 bg-muted rounded w-32\" />\n                  <div className=\"h-6 bg-muted rounded w-20\" />\n                </div>\n                <div className=\"space-y-2\">\n                  <div className=\"h-4 bg-muted rounded w-3/4\" />\n                  <div className=\"h-4 bg-muted rounded w-1/2\" />\n                  <div className=\"h-4 bg-muted rounded w-2/3\" />\n                </div>\n              </CardContent>\n            </Card>\n          ))\n        ) : filteredOrders?.length ? (\n          filteredOrders.map((order) => {\n            const items = getOrderItems(order.items);\n            const nextStatus = getNextStatus(order.status || 'pending');\n            const nextStatusLabel = getNextStatusLabel(order.status || 'pending');\n            \n            return (\n              <Card key={order.id} className=\"hover:shadow-md transition-shadow\">\n                <CardHeader className=\"pb-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-3\">\n                      <div className=\"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center\">\n                        <Package className=\"h-6 w-6 text-primary\" />\n                      </div>\n                      <div>\n                        <CardTitle className=\"text-lg\">طلب #{order.id}</CardTitle>\n                        <p className=\"text-sm text-muted-foreground\">\n                          {new Date(order.createdAt).toLocaleDateString('ar-YE', {\n                            year: 'numeric',\n                            month: 'long',\n                            day: 'numeric',\n                            hour: '2-digit',\n                            minute: '2-digit'\n                          })}\n                        </p>\n                      </div>\n                    </div>\n                    {getStatusBadge(order.status || 'pending')}\n                  </div>\n                </CardHeader>\n                \n                <CardContent className=\"space-y-4\">\n                  {/* Customer Info */}\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 bg-muted/50 rounded-lg\">\n                    <div>\n                      <h4 className=\"font-semibold text-foreground mb-2\">معلومات العميل</h4>\n                      <p className=\"text-sm text-foreground\">{order.customerName}</p>\n                      <div className=\"flex items-center gap-2 mt-1\">\n                        <Phone className=\"h-4 w-4 text-muted-foreground\" />\n                        <span className=\"text-sm text-muted-foreground\">{order.customerPhone}</span>\n                      </div>\n                    </div>\n                    <div>\n                      <h4 className=\"font-semibold text-foreground mb-2\">عنوان التوصيل</h4>\n                      <div className=\"flex items-start gap-2\">\n                        <MapPin className=\"h-4 w-4 text-muted-foreground mt-0.5\" />\n                        <span className=\"text-sm text-muted-foreground\">{order.deliveryAddress}</span>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Order Items */}\n                  <div>\n                    <h4 className=\"font-semibold text-foreground mb-2\">تفاصيل الطلب</h4>\n                    <div className=\"space-y-2\">\n                      {items.map((item: any, index: number) => (\n                        <div key={index} className=\"flex justify-between items-center text-sm\">\n                          <span className=\"text-foreground\">{item.name} × {item.quantity}</span>\n                          <span className=\"text-muted-foreground\">{item.price * item.quantity} ريال</span>\n                        </div>\n                      ))}\n                    </div>\n                    \n                    <div className=\"border-t border-border mt-2 pt-2\">\n                      <div className=\"flex justify-between items-center text-sm\">\n                        <span className=\"text-muted-foreground\">المجموع الفرعي:</span>\n                        <span className=\"text-foreground\">{order.subtotal} ريال</span>\n                      </div>\n                      <div className=\"flex justify-between items-center text-sm\">\n                        <span className=\"text-muted-foreground\">رسوم التوصيل:</span>\n                        <span className=\"text-foreground\">{order.deliveryFee} ريال</span>\n                      </div>\n                      <div className=\"flex justify-between items-center font-semibold\">\n                        <span className=\"text-foreground\">المجموع:</span>\n                        <span className=\"text-primary\">{order.totalAmount} ريال</span>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Payment & Notes */}\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <div>\n                      <h4 className=\"font-semibold text-foreground mb-1\">طريقة الدفع</h4>\n                      <p className=\"text-sm text-muted-foreground\">\n                        {order.paymentMethod === 'cash' ? 'دفع نقدي' : 'مدفوع مسبقاً'}\n                      </p>\n                    </div>\n                    {order.notes && (\n                      <div>\n                        <h4 className=\"font-semibold text-foreground mb-1\">ملاحظات</h4>\n                        <p className=\"text-sm text-muted-foreground\">{order.notes}</p>\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Actions */}\n                  <div className=\"flex gap-2 pt-4 border-t border-border\">\n                    {nextStatus && order.status !== 'delivered' && order.status !== 'cancelled' && (\n                      <Button\n                        onClick={() => updateOrderStatusMutation.mutate({ \n                          id: order.id, \n                          status: nextStatus \n                        })}\n                        disabled={updateOrderStatusMutation.isPending}\n                        className=\"gap-2\"\n                        data-testid={`button-update-order-${order.id}`}\n                      >\n                        <CheckCircle className=\"h-4 w-4\" />\n                        {nextStatusLabel}\n                      </Button>\n                    )}\n                    \n                    {order.status === 'pending' && (\n                      <Button\n                        variant=\"destructive\"\n                        onClick={() => updateOrderStatusMutation.mutate({ \n                          id: order.id, \n                          status: 'cancelled' \n                        })}\n                        disabled={updateOrderStatusMutation.isPending}\n                        className=\"gap-2\"\n                        data-testid={`button-cancel-order-${order.id}`}\n                      >\n                        <XCircle className=\"h-4 w-4\" />\n                        إلغاء الطلب\n                      </Button>\n                    )}\n                    \n                    <Button\n                      variant=\"outline\"\n                      onClick={() => window.open(`tel:${order.customerPhone}`)}\n                      className=\"gap-2\"\n                      data-testid={`button-call-customer-${order.id}`}\n                    >\n                      <Phone className=\"h-4 w-4\" />\n                      اتصال بالعميل\n                    </Button>\n                  </div>\n                </CardContent>\n              </Card>\n            );\n          })\n        ) : (\n          <div className=\"text-center py-12\">\n            <Package className=\"h-12 w-12 text-muted-foreground mx-auto mb-4\" />\n            <h3 className=\"text-lg font-semibold text-foreground mb-2\">\n              {statusFilter === 'all' ? 'لا توجد طلبات' : `لا توجد طلبات ${statusFilter === 'pending' ? 'في الانتظار' : statusFilter === 'confirmed' ? 'مؤكدة' : statusFilter === 'preparing' ? 'قيد التحضير' : statusFilter === 'on_way' ? 'في الطريق' : statusFilter === 'delivered' ? 'مكتملة' : 'ملغية'}`}\n            </h3>\n            <p className=\"text-muted-foreground\">\n              {statusFilter === 'all' \n                ? 'ستظهر الطلبات هنا عند ورودها من العملاء'\n                : 'لا توجد طلبات بهذه الحالة حالياً'\n              }\n            </p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}","size_bytes":13429},"client/src/pages/AdminRestaurants.tsx":{"content":"import { useState } from 'react';\r\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { Plus, Edit, Trash2, Store, Save, X, Clock, Star, MapPin } from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport { Switch } from '@/components/ui/switch';\r\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\r\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\r\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle, AlertDialogTrigger } from '@/components/ui/alert-dialog';\r\nimport { Badge } from '@/components/ui/badge';\r\nimport { useToast } from '@/hooks/use-toast';\r\nimport { apiRequest } from '@/lib/queryClient';\r\nimport type { Restaurant, Category } from '@shared/schema';\r\n\r\nexport default function AdminRestaurants() {\r\n  const { toast } = useToast();\r\n  const queryClient = useQueryClient();\r\n  const [editingRestaurant, setEditingRestaurant] = useState<Restaurant | null>(null);\r\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\r\n  \r\n  const [formData, setFormData] = useState({\r\n    name: '',\r\n    description: '',\r\n    image: '',\r\n    address: '',\r\n    openingTime: '08:00',\r\n    closingTime: '23:00',\r\n    deliveryTime: '',\r\n    deliveryFee: '0',\r\n    minimumOrder: '0',\r\n    isOpen: true,\r\n    categoryId: '',\r\n  });\r\n\r\n  const { data: restaurants, isLoading: restaurantsLoading } = useQuery<Restaurant[]>({\r\n    queryKey: ['/api/restaurants'],\r\n  });\r\n\r\n  const { data: categories } = useQuery<Category[]>({\r\n    queryKey: ['/api/categories'],\r\n  });\r\n\r\n  const createRestaurantMutation = useMutation({\r\n    mutationFn: async (data: typeof formData) => {\r\n      const response = await apiRequest('POST', '/api/restaurants', data);\r\n      return response.json();\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['/api/restaurants'] });\r\n      toast({\r\n        title: \"تم إضافة المطعم\",\r\n        description: \"تم إضافة المطعم الجديد بنجاح\",\r\n      });\r\n      resetForm();\r\n      setIsDialogOpen(false);\r\n    },\r\n  });\r\n\r\n  const updateRestaurantMutation = useMutation({\r\n    mutationFn: async ({ id, data }: { id: string; data: Partial<typeof formData> }) => {\r\n      const response = await apiRequest('PUT', `/api/restaurants/${id}`, data);\r\n      return response.json();\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['/api/restaurants'] });\r\n      toast({\r\n        title: \"تم تحديث المطعم\",\r\n        description: \"تم تحديث بيانات المطعم بنجاح\",\r\n      });\r\n      resetForm();\r\n      setEditingRestaurant(null);\r\n      setIsDialogOpen(false);\r\n    },\r\n  });\r\n\r\n  const deleteRestaurantMutation = useMutation({\r\n    mutationFn: async (id: string) => {\r\n      const response = await apiRequest('DELETE', `/api/restaurants/${id}`);\r\n      return response.json();\r\n    },\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['/api/restaurants'] });\r\n      toast({\r\n        title: \"تم حذف المطعم\",\r\n        description: \"تم حذف المطعم بنجاح\",\r\n      });\r\n    },\r\n  });\r\n\r\n  const resetForm = () => {\r\n    setFormData({\r\n      name: '',\r\n      description: '',\r\n      image: '',\r\n      address: '',\r\n      openingTime: '08:00',\r\n      closingTime: '23:00',\r\n      deliveryTime: '',\r\n      deliveryFee: '0',\r\n      minimumOrder: '0',\r\n      isOpen: true,\r\n      categoryId: '',\r\n    });\r\n    setEditingRestaurant(null);\r\n  };\r\n\r\n  const handleEdit = (restaurant: Restaurant) => {\r\n    setEditingRestaurant(restaurant);\r\n    setFormData({\r\n      name: restaurant.name,\r\n      description: restaurant.description || '',\r\n      image: restaurant.image,\r\n      address: restaurant.address || '',\r\n      openingTime: restaurant.openingTime || '08:00',\r\n      closingTime: restaurant.closingTime || '23:00',\r\n      deliveryTime: restaurant.deliveryTime,\r\n      deliveryFee: restaurant.deliveryFee || '0',\r\n      minimumOrder: restaurant.minimumOrder || '0',\r\n      isOpen: restaurant.isOpen,\r\n      categoryId: restaurant.categoryId || '',\r\n    });\r\n    setIsDialogOpen(true);\r\n  };\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!formData.name.trim()) {\r\n      toast({\r\n        title: \"خطأ\",\r\n        description: \"يرجى إدخال اسم المطعم\",\r\n        variant: \"destructive\",\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (editingRestaurant) {\r\n      updateRestaurantMutation.mutate({ id: editingRestaurant.id, data: formData });\r\n    } else {\r\n      createRestaurantMutation.mutate(formData);\r\n    }\r\n  };\r\n\r\n  const toggleRestaurantStatus = (restaurant: Restaurant, field: 'isOpen') => {\r\n    updateRestaurantMutation.mutate({\r\n      id: restaurant.id,\r\n      data: { [field]: !restaurant[field] }\r\n    });\r\n  };\r\n\r\n  const getCategoryName = (categoryId: string) => {\r\n    const category = categories?.find(c => c.id === categoryId);\r\n    return category?.name || 'غير محدد';\r\n  };\r\n\r\n  // دالة لتحويل القيم الرقمية من string إلى number للعرض\r\n  const parseDecimal = (value: string | null): number => {\r\n    if (!value) return 0;\r\n    const num = parseFloat(value);\r\n    return isNaN(num) ? 0 : num;\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <Store className=\"h-8 w-8 text-primary\" />\r\n          <div>\r\n            <h1 className=\"text-2xl font-bold text-foreground\">إدارة المطاعم</h1>\r\n            <p className=\"text-muted-foreground\">إدارة المطاعم والمتاجر</p>\r\n          </div>\r\n        </div>\r\n        \r\n        <Dialog open={isDialogOpen} onOpenChange={setIsDialogOpen}>\r\n          <DialogTrigger asChild>\r\n            <Button \r\n              className=\"gap-2\"\r\n              onClick={() => {\r\n                resetForm();\r\n                setIsDialogOpen(true);\r\n              }}\r\n              data-testid=\"button-add-restaurant\"\r\n            >\r\n              <Plus className=\"h-4 w-4\" />\r\n              إضافة مطعم جديد\r\n            </Button>\r\n          </DialogTrigger>\r\n          <DialogContent className=\"max-w-2xl max-h-[90vh] overflow-y-auto\">\r\n            <DialogHeader>\r\n              <DialogTitle>\r\n                {editingRestaurant ? 'تعديل بيانات المطعم' : 'إضافة مطعم جديد'}\r\n              </DialogTitle>\r\n            </DialogHeader>\r\n            \r\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div>\r\n                  <Label htmlFor=\"name\">اسم المطعم</Label>\r\n                  <Input\r\n                    id=\"name\"\r\n                    value={formData.name}\r\n                    onChange={(e) => setFormData(prev => ({ ...prev, name: e.target.value }))}\r\n                    placeholder=\"أدخل اسم المطعم\"\r\n                    required\r\n                    data-testid=\"input-restaurant-name\"\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <Label htmlFor=\"category\">القسم</Label>\r\n                  <Select value={formData.categoryId} onValueChange={(value) => setFormData(prev => ({ ...prev, categoryId: value }))}>\r\n                    <SelectTrigger data-testid=\"select-restaurant-category\">\r\n                      <SelectValue placeholder=\"اختر قسم المطعم\" />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      {categories?.map((category) => (\r\n                        <SelectItem key={category.id} value={category.id}>\r\n                          {category.name}\r\n                        </SelectItem>\r\n                      ))}\r\n                    </SelectContent>\r\n                  </Select>\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <Label htmlFor=\"description\">الوصف</Label>\r\n                <Textarea\r\n                  id=\"description\"\r\n                  value={formData.description}\r\n                  onChange={(e) => setFormData(prev => ({ ...prev, description: e.target.value }))}\r\n                  placeholder=\"وصف المطعم\"\r\n                  rows={3}\r\n                  data-testid=\"input-restaurant-description\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <Label htmlFor=\"image\">رابط الصورة</Label>\r\n                <Input\r\n                  id=\"image\"\r\n                  value={formData.image}\r\n                  onChange={(e) => setFormData(prev => ({ ...prev, image: e.target.value }))}\r\n                  placeholder=\"https://example.com/image.jpg\"\r\n                  required\r\n                  data-testid=\"input-restaurant-image\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <Label htmlFor=\"address\">عنوان المطعم</Label>\r\n                <Textarea\r\n                  id=\"address\"\r\n                  value={formData.address || ''}\r\n                  onChange={(e) => setFormData(prev => ({ ...prev, address: e.target.value }))}\r\n                  placeholder=\"العنوان الكامل للمطعم\"\r\n                  rows={2}\r\n                  data-testid=\"input-restaurant-address\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n                <div>\r\n                  <Label htmlFor=\"openingTime\">وقت الفتح</Label>\r\n                  <Input\r\n                    id=\"openingTime\"\r\n                    type=\"time\"\r\n                    value={formData.openingTime || '08:00'}\r\n                    onChange={(e) => setFormData(prev => ({ ...prev, openingTime: e.target.value }))}\r\n                    data-testid=\"input-restaurant-opening-time\"\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <Label htmlFor=\"closingTime\">وقت الإغلاق</Label>\r\n                  <Input\r\n                    id=\"closingTime\"\r\n                    type=\"time\"\r\n                    value={formData.closingTime || '23:00'}\r\n                    onChange={(e) => setFormData(prev => ({ ...prev, closingTime: e.target.value }))}\r\n                    data-testid=\"input-restaurant-closing-time\"\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <Label htmlFor=\"deliveryTime\">وقت التوصيل</Label>\r\n                  <Input\r\n                    id=\"deliveryTime\"\r\n                    value={formData.deliveryTime}\r\n                    onChange={(e) => setFormData(prev => ({ ...prev, deliveryTime: e.target.value }))}\r\n                    placeholder=\"30-45 دقيقة\"\r\n                    required\r\n                    data-testid=\"input-restaurant-delivery-time\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                <div>\r\n                  <Label htmlFor=\"deliveryFee\">رسوم التوصيل (ريال)</Label>\r\n                  <Input\r\n                    id=\"deliveryFee\"\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    step=\"0.01\"\r\n                    value={formData.deliveryFee}\r\n                    onChange={(e) => setFormData(prev => ({ ...prev, deliveryFee: e.target.value }))}\r\n                    data-testid=\"input-restaurant-delivery-fee\"\r\n                  />\r\n                </div>\r\n\r\n                <div>\r\n                  <Label htmlFor=\"minimumOrder\">الحد الأدنى للطلب (ريال)</Label>\r\n                  <Input\r\n                    id=\"minimumOrder\"\r\n                    type=\"number\"\r\n                    min=\"0\"\r\n                    step=\"0.01\"\r\n                    value={formData.minimumOrder}\r\n                    onChange={(e) => setFormData(prev => ({ ...prev, minimumOrder: e.target.value }))}\r\n                    data-testid=\"input-restaurant-minimum-order\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex items-center justify-between\">\r\n                <Label htmlFor=\"isOpen\">مفتوح للطلبات</Label>\r\n                <Switch\r\n                  id=\"isOpen\"\r\n                  checked={formData.isOpen}\r\n                  onCheckedChange={(checked) => setFormData(prev => ({ ...prev, isOpen: checked }))}\r\n                  data-testid=\"switch-restaurant-open\"\r\n                />\r\n              </div>\r\n\r\n              <div className=\"flex gap-2 pt-4\">\r\n                <Button \r\n                  type=\"submit\" \r\n                  className=\"flex-1 gap-2\"\r\n                  disabled={createRestaurantMutation.isPending || updateRestaurantMutation.isPending}\r\n                  data-testid=\"button-save-restaurant\"\r\n                >\r\n                  <Save className=\"h-4 w-4\" />\r\n                  {editingRestaurant ? 'تحديث' : 'إضافة'}\r\n                </Button>\r\n                <Button \r\n                  type=\"button\" \r\n                  variant=\"outline\" \r\n                  onClick={() => {\r\n                    resetForm();\r\n                    setIsDialogOpen(false);\r\n                  }}\r\n                  data-testid=\"button-cancel-restaurant\"\r\n                >\r\n                  <X className=\"h-4 w-4\" />\r\n                  إلغاء\r\n                </Button>\r\n              </div>\r\n            </form>\r\n          </DialogContent>\r\n        </Dialog>\r\n      </div>\r\n\r\n      {/* Restaurants Grid */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n        {restaurantsLoading ? (\r\n          [...Array(6)].map((_, i) => (\r\n            <Card key={i} className=\"animate-pulse\">\r\n              <div className=\"w-full h-48 bg-muted\" />\r\n              <CardContent className=\"p-4\">\r\n                <div className=\"h-4 bg-muted rounded w-3/4 mb-2\" />\r\n                <div className=\"h-3 bg-muted rounded w-1/2\" />\r\n              </CardContent>\r\n            </Card>\r\n          ))\r\n        ) : restaurants?.length ? (\r\n          restaurants.map((restaurant) => (\r\n            <Card key={restaurant.id} className=\"hover:shadow-md transition-shadow overflow-hidden\">\r\n              <div className=\"w-full h-48 bg-gradient-to-br from-primary/20 to-primary/5 flex items-center justify-center\">\r\n                {restaurant.image ? (\r\n                  <img \r\n                    src={restaurant.image} \r\n                    alt={restaurant.name}\r\n                    className=\"w-full h-full object-cover\"\r\n                  />\r\n                ) : (\r\n                  <Store className=\"h-16 w-16 text-primary/50\" />\r\n                )}\r\n              </div>\r\n              \r\n              <CardHeader className=\"pb-3\">\r\n                <div className=\"flex items-start justify-between\">\r\n                  <div className=\"flex-1\">\r\n                    <CardTitle className=\"text-lg mb-2\">{restaurant.name}</CardTitle>\r\n                    <p className=\"text-sm text-muted-foreground mb-2\">\r\n                      {getCategoryName(restaurant.categoryId || '')}\r\n                    </p>\r\n                    {restaurant.description && (\r\n                      <p className=\"text-xs text-muted-foreground line-clamp-2\">\r\n                        {restaurant.description}\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                  <Badge variant={restaurant.isOpen ? \"default\" : \"outline\"}>\r\n                    {restaurant.isOpen ? 'مفتوح' : 'مغلق'}\r\n                  </Badge>\r\n                </div>\r\n              </CardHeader>\r\n              \r\n              <CardContent className=\"space-y-4\">\r\n                <div className=\"grid grid-cols-2 gap-2 text-sm\">\r\n                  <div className=\"flex items-center gap-1\">\r\n                    <Clock className=\"h-4 w-4 text-muted-foreground\" />\r\n                    <span>{restaurant.deliveryTime}</span>\r\n                  </div>\r\n                  <div className=\"text-xs text-muted-foreground\">\r\n                    توصيل: {parseDecimal(restaurant.deliveryFee)} ريال\r\n                  </div>\r\n                  <div className=\"text-xs text-muted-foreground\">\r\n                    أقل طلب: {parseDecimal(restaurant.minimumOrder)} ريال\r\n                  </div>\r\n                  {restaurant.rating && (\r\n                    <div className=\"flex items-center gap-1\">\r\n                      <Star className=\"h-4 w-4 text-yellow-500\" />\r\n                      <span>{restaurant.rating}</span>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"text-center\">\r\n                  <p className=\"text-xs text-muted-foreground\">مفتوح</p>\r\n                  <Switch\r\n                    checked={restaurant.isOpen}\r\n                    onCheckedChange={() => toggleRestaurantStatus(restaurant, 'isOpen')}\r\n                    data-testid={`switch-restaurant-open-${restaurant.id}`}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"flex gap-2 pt-2\">\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"sm\"\r\n                    className=\"flex-1 gap-2\"\r\n                    onClick={() => handleEdit(restaurant)}\r\n                    data-testid={`button-edit-restaurant-${restaurant.id}`}\r\n                  >\r\n                    <Edit className=\"h-4 w-4\" />\r\n                    تعديل\r\n                  </Button>\r\n                  \r\n                  <AlertDialog>\r\n                    <AlertDialogTrigger asChild>\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        size=\"sm\"\r\n                        className=\"text-destructive hover:text-destructive\"\r\n                        data-testid={`button-delete-restaurant-${restaurant.id}`}\r\n                      >\r\n                        <Trash2 className=\"h-4 w-4\" />\r\n                      </Button>\r\n                    </AlertDialogTrigger>\r\n                    <AlertDialogContent>\r\n                      <AlertDialogHeader>\r\n                        <AlertDialogTitle>تأكيد الحذف</AlertDialogTitle>\r\n                        <AlertDialogDescription>\r\n                          هل أنت متأكد من حذف مطعم \"{restaurant.name}\"؟ \r\n                          سيتم حذف جميع منتجات المطعم أيضاً.\r\n                        </AlertDialogDescription>\r\n                      </AlertDialogHeader>\r\n                      <AlertDialogFooter>\r\n                        <AlertDialogCancel>إلغاء</AlertDialogCancel>\r\n                        <AlertDialogAction\r\n                          onClick={() => deleteRestaurantMutation.mutate(restaurant.id)}\r\n                          className=\"bg-destructive hover:bg-destructive/90\"\r\n                        >\r\n                          حذف\r\n                        </AlertDialogAction>\r\n                      </AlertDialogFooter>\r\n                    </AlertDialogContent>\r\n                  </AlertDialog>\r\n                </div>\r\n              </CardContent>\r\n            </Card>\r\n          ))\r\n        ) : (\r\n          <div className=\"col-span-full text-center py-12\">\r\n            <Store className=\"h-12 w-12 text-muted-foreground mx-auto mb-4\" />\r\n            <h3 className=\"text-lg font-semibold text-foreground mb-2\">لا توجد مطاعم</h3>\r\n            <p className=\"text-muted-foreground mb-4\">ابدأ بإضافة المطاعم والمتاجر</p>\r\n            <Button onClick={() => setIsDialogOpen(true)} data-testid=\"button-add-first-restaurant\">\r\n              إضافة المطعم الأول\r\n            </Button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}","size_bytes":20382},"client/src/pages/Cart.tsx":{"content":"import { useState } from 'react';\nimport { useLocation } from 'wouter';\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\nimport { ArrowRight, Trash2 } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';\nimport { Label } from '@/components/ui/label';\nimport { useCart } from '../context/CartContext';\nimport { useToast } from '@/hooks/use-toast';\nimport { apiRequest } from '@/lib/queryClient';\nimport type { InsertOrder } from '@shared/schema';\n\nexport default function Cart() {\n  const [, setLocation] = useLocation();\n  const { items, removeItem, updateQuantity, clearCart, getSubtotal, getTotal } = useCart();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const [orderForm, setOrderForm] = useState({\n    customerName: '',\n    customerPhone: '',\n    customerEmail: '',\n    deliveryAddress: '',\n    notes: '',\n    paymentMethod: 'cash',\n  });\n\n  const placeOrderMutation = useMutation({\n    mutationFn: async (orderData: InsertOrder) => {\n      const response = await apiRequest('POST', '/api/orders', orderData);\n      return response.json();\n    },\n    onSuccess: () => {\n      toast({\n        title: \"تم تأكيد طلبك بنجاح!\",\n        description: \"سيتم التواصل معك قريباً\",\n      });\n      clearCart();\n      setLocation('/');\n    },\n    onError: () => {\n      toast({\n        title: \"خطأ في تأكيد الطلب\",\n        description: \"يرجى المحاولة مرة أخرى\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handlePlaceOrder = () => {\n    if (!orderForm.customerName || !orderForm.customerPhone || !orderForm.deliveryAddress) {\n      toast({\n        title: \"معلومات ناقصة\",\n        description: \"يرجى ملء جميع الحقول المطلوبة\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    if (items.length === 0) {\n      toast({\n        title: \"السلة فارغة\",\n        description: \"أضف بعض العناصر قبل تأكيد الطلب\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    const orderData: InsertOrder = {\n      ...orderForm,\n      items: JSON.stringify(items),\n      subtotal: getSubtotal().toString(),\n      deliveryFee: '5',\n      totalAmount: getTotal().toString(),\n      restaurantId: items[0]?.restaurantId || '',\n      status: 'pending',\n    };\n\n    placeOrderMutation.mutate(orderData);\n  };\n\n  // دالة لتحويل السعر من string إلى number للحسابات\n  const parsePrice = (price: string | number): number => {\n    if (typeof price === 'number') return price;\n    const num = parseFloat(price);\n    return isNaN(num) ? 0 : num;\n  };\n\n  return (\n    <div>\n      {/* Header */}\n      <header className=\"bg-card border-b border-border p-4\">\n        <div className=\"flex items-center gap-3\">\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={() => setLocation('/')}\n            data-testid=\"button-cart-back\"\n          >\n            <ArrowRight className=\"h-5 w-5\" />\n          </Button>\n          <h2 className=\"text-xl font-bold text-foreground\">السلة</h2>\n        </div>\n      </header>\n\n      <section className=\"p-4\">\n        {/* Cart Items */}\n        <div className=\"space-y-4 mb-6\">\n          {items.length === 0 ? (\n            <div className=\"text-center text-muted-foreground py-8\">\n              <i className=\"fas fa-shopping-cart text-4xl mb-4\"></i>\n              <p>السلة فارغة</p>\n              <p className=\"text-sm\">أضف بعض العناصر لتبدأ طلبك</p>\n            </div>\n          ) : (\n            items.map((item) => (\n              <Card key={item.id} className=\"p-4 flex justify-between items-center\">\n                <div className=\"flex-1\">\n                  <h4 className=\"font-medium text-foreground\" data-testid={`cart-item-name-${item.id}`}>\n                    {item.name}\n                  </h4>\n                  <p className=\"text-sm text-muted-foreground\">\n                    {item.price} ريال × {item.quantity}\n                  </p>\n                  <div className=\"flex items-center gap-2 mt-2\">\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => updateQuantity(item.id, item.quantity - 1)}\n                      data-testid={`button-decrease-${item.id}`}\n                    >\n                      -\n                    </Button>\n                    <span className=\"px-3 py-1 bg-muted rounded\" data-testid={`quantity-${item.id}`}>\n                      {item.quantity}\n                    </span>\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => updateQuantity(item.id, item.quantity + 1)}\n                      data-testid={`button-increase-${item.id}`}\n                    >\n                      +\n                    </Button>\n                  </div>\n                </div>\n                <div className=\"flex items-center gap-3\">\n                  <span className=\"font-bold text-primary\" data-testid={`item-total-${item.id}`}>\n                    {parsePrice(item.price) * item.quantity} ريال\n                  </span>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    onClick={() => removeItem(item.id)}\n                    className=\"text-destructive hover:bg-destructive/10\"\n                    data-testid={`button-remove-${item.id}`}\n                  >\n                    <Trash2 className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n              </Card>\n            ))\n          )}\n        </div>\n\n        {/* Order Summary and Form */}\n        {items.length > 0 && (\n          <Card className=\"p-4\">\n            <h3 className=\"font-bold text-foreground mb-4\">ملخص الطلب</h3>\n            \n            {/* Order Summary */}\n            <div className=\"space-y-2 text-sm mb-6\">\n              <div className=\"flex justify-between\">\n                <span className=\"text-muted-foreground\">المجموع الفرعي</span>\n                <span className=\"text-foreground\" data-testid=\"order-subtotal\">\n                  {getSubtotal()} ريال\n                </span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-muted-foreground\">رسوم التوصيل</span>\n                <span className=\"text-foreground\">5 ريال</span>\n              </div>\n              <div className=\"border-t border-border pt-2 mt-2\">\n                <div className=\"flex justify-between font-bold\">\n                  <span className=\"text-foreground\">الإجمالي</span>\n                  <span className=\"text-primary\" data-testid=\"order-total\">\n                    {getTotal()} ريال\n                  </span>\n                </div>\n              </div>\n            </div>\n\n            {/* Order Form */}\n            <div className=\"space-y-4\">\n              <div>\n                <Label htmlFor=\"customerName\" className=\"text-foreground\">الاسم *</Label>\n                <Input\n                  id=\"customerName\"\n                  value={orderForm.customerName}\n                  onChange={(e) => setOrderForm(prev => ({ ...prev, customerName: e.target.value }))}\n                  placeholder=\"أدخل اسمك\"\n                  data-testid=\"input-customer-name\"\n                />\n              </div>\n\n              <div>\n                <Label htmlFor=\"customerPhone\" className=\"text-foreground\">رقم الهاتف *</Label>\n                <Input\n                  id=\"customerPhone\"\n                  value={orderForm.customerPhone}\n                  onChange={(e) => setOrderForm(prev => ({ ...prev, customerPhone: e.target.value }))}\n                  placeholder=\"أدخل رقم هاتفك\"\n                  data-testid=\"input-customer-phone\"\n                />\n              </div>\n\n              <div>\n                <Label htmlFor=\"customerEmail\" className=\"text-foreground\">البريد الإلكتروني</Label>\n                <Input\n                  id=\"customerEmail\"\n                  type=\"email\"\n                  value={orderForm.customerEmail}\n                  onChange={(e) => setOrderForm(prev => ({ ...prev, customerEmail: e.target.value }))}\n                  placeholder=\"أدخل بريدك الإلكتروني (اختياري)\"\n                  data-testid=\"input-customer-email\"\n                />\n              </div>\n\n              <div>\n                <Label htmlFor=\"deliveryAddress\" className=\"text-foreground\">عنوان التوصيل *</Label>\n                <Input\n                  id=\"deliveryAddress\"\n                  value={orderForm.deliveryAddress}\n                  onChange={(e) => setOrderForm(prev => ({ ...prev, deliveryAddress: e.target.value }))}\n                  placeholder=\"أدخل عنوانك بالتفصيل\"\n                  data-testid=\"input-delivery-address\"\n                />\n              </div>\n\n              <div>\n                <Label htmlFor=\"notes\" className=\"text-foreground\">ملاحظات الطلب</Label>\n                <Textarea\n                  id=\"notes\"\n                  value={orderForm.notes}\n                  onChange={(e) => setOrderForm(prev => ({ ...prev, notes: e.target.value }))}\n                  placeholder=\"ملاحظات إضافية (اختياري)\"\n                  className=\"h-20 resize-none\"\n                  data-testid=\"input-notes\"\n                />\n              </div>\n\n              <div>\n                <Label className=\"text-foreground\">طريقة الدفع</Label>\n                <RadioGroup\n                  value={orderForm.paymentMethod}\n                  onValueChange={(value) => setOrderForm(prev => ({ ...prev, paymentMethod: value }))}\n                  className=\"space-y-2 mt-2\"\n                >\n                  <div className=\"flex items-center space-x-2 space-x-reverse p-3 bg-muted rounded-lg\">\n                    <RadioGroupItem value=\"cash\" id=\"cash\" data-testid=\"payment-cash\" />\n                    <Label htmlFor=\"cash\" className=\"flex items-center gap-3 cursor-pointer\">\n                      <i className=\"fas fa-money-bill-wave text-muted-foreground\"></i>\n                      <span className=\"text-foreground\">الدفع عند الاستلام</span>\n                    </Label>\n                  </div>\n                  <div className=\"flex items-center space-x-2 space-x-reverse p-3 bg-muted rounded-lg\">\n                    <RadioGroupItem value=\"card\" id=\"card\" data-testid=\"payment-card\" />\n                    <Label htmlFor=\"card\" className=\"flex items-center gap-3 cursor-pointer\">\n                      <i className=\"fas fa-credit-card text-muted-foreground\"></i>\n                      <span className=\"text-foreground\">الدفع الإلكتروني</span>\n                    </Label>\n                  </div>\n                  <div className=\"flex items-center space-x-2 space-x-reverse p-3 bg-muted rounded-lg\">\n                    <RadioGroupItem value=\"wallet\" id=\"wallet\" data-testid=\"payment-wallet\" />\n                    <Label htmlFor=\"wallet\" className=\"flex items-center gap-3 cursor-pointer\">\n                      <i className=\"fas fa-wallet text-muted-foreground\"></i>\n                      <span className=\"text-foreground\">الدفع من الرصيد</span>\n                    </Label>\n                  </div>\n                </RadioGroup>\n              </div>\n            </div>\n\n            <Button\n              onClick={handlePlaceOrder}\n              disabled={placeOrderMutation.isPending}\n              className=\"w-full mt-6 py-4 text-lg font-bold\"\n              data-testid=\"button-place-order\"\n            >\n              {placeOrderMutation.isPending ? 'جاري تأكيد الطلب...' : 'تأكيد الطلب'}\n            </Button>\n          </Card>\n        )}\n      </section>\n    </div>\n  );\n}","size_bytes":12279},"client/src/pages/CartPage.tsx":{"content":"import { useState } from 'react';\nimport { useLocation } from 'wouter';\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\nimport { ArrowRight, Trash2 } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { RadioGroup, RadioGroupItem } from '@/components/ui/radio-group';\nimport { Label } from '@/components/ui/label';\nimport { useCart } from '../context/CartContext';\nimport { useToast } from '@/hooks/use-toast';\nimport { apiRequest } from '@/lib/queryClient';\nimport type { NewOrder } from '@shared/schema';\n\nexport default function CartPage() {\n  const [, setLocation] = useLocation();\n  const { items, removeItem, updateQuantity, clearCart, getSubtotal, getTotal } = useCart();\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n\n  const [orderForm, setOrderForm] = useState({\n    customerName: '',\n    customerPhone: '',\n    customerEmail: '',\n    deliveryAddress: '',\n    notes: '',\n    paymentMethod: 'cash',\n  });\n\n  const placeOrderMutation = useMutation({\n    mutationFn: async (orderData: NewOrder) => {\n      const response = await apiRequest('POST', '/api/orders', orderData);\n      return response.json();\n    },\n    onSuccess: () => {\n      toast({\n        title: \"تم تأكيد طلبك بنجاح!\",\n        description: \"سيتم التواصل معك قريباً\",\n      });\n      clearCart();\n      setLocation('/');\n    },\n    onError: () => {\n      toast({\n        title: \"خطأ في تأكيد الطلب\",\n        description: \"يرجى المحاولة مرة أخرى\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handlePlaceOrder = () => {\n    if (!orderForm.customerName || !orderForm.customerPhone || !orderForm.deliveryAddress) {\n      toast({\n        title: \"معلومات ناقصة\",\n        description: \"يرجى ملء جميع الحقول المطلوبة\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    if (items.length === 0) {\n      toast({\n        title: \"السلة فارغة\",\n        description: \"أضف بعض العناصر قبل تأكيد الطلب\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    const orderData: NewOrder = {\n      orderNumber: `ORD${Date.now()}`,\n      customerName: orderForm.customerName,\n      customerPhone: orderForm.customerPhone,\n      customerEmail: orderForm.customerEmail || undefined,\n      deliveryAddress: { address: orderForm.deliveryAddress },\n      notes: orderForm.notes || undefined,\n      paymentMethod: orderForm.paymentMethod,\n      items: items,\n      subtotal: getSubtotal().toString(),\n      deliveryFee: \"5\",\n      total: getTotal().toString(),\n      restaurantId: items[0]?.restaurantId || undefined,\n      status: 'pending',\n    };\n\n    placeOrderMutation.mutate(orderData);\n  };\n\n  // دالة لتحويل السعر من string إلى number للحسابات\n  const parsePrice = (price: string | number): number => {\n    if (typeof price === 'number') return price;\n    const num = parseFloat(price);\n    return isNaN(num) ? 0 : num;\n  };\n\n  return (\n    <div>\n      {/* Header */}\n      <header className=\"bg-card border-b border-border p-4\">\n        <div className=\"flex items-center gap-3\">\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={() => setLocation('/')}\n            data-testid=\"button-cart-back\"\n          >\n            <ArrowRight className=\"h-5 w-5\" />\n          </Button>\n          <h2 className=\"text-xl font-bold text-foreground\">السلة</h2>\n        </div>\n      </header>\n\n      <section className=\"p-4\">\n        {/* Cart Items */}\n        <div className=\"space-y-4 mb-6\">\n          {items.length === 0 ? (\n            <div className=\"text-center text-muted-foreground py-8\">\n              <i className=\"fas fa-shopping-cart text-4xl mb-4\"></i>\n              <p>السلة فارغة</p>\n              <p className=\"text-sm\">أضف بعض العناصر لتبدأ طلبك</p>\n            </div>\n          ) : (\n            items.map((item) => (\n              <Card key={item.id} className=\"p-4 flex justify-between items-center\">\n                <div className=\"flex-1\">\n                  <h4 className=\"font-medium text-foreground\" data-testid={`cart-item-name-${item.id}`}>\n                    {item.name}\n                  </h4>\n                  <p className=\"text-sm text-muted-foreground\">\n                    {item.price} ريال × {item.quantity}\n                  </p>\n                  <div className=\"flex items-center gap-2 mt-2\">\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => updateQuantity(item.id, item.quantity - 1)}\n                      data-testid={`button-decrease-${item.id}`}\n                    >\n                      -\n                    </Button>\n                    <span className=\"px-3 py-1 bg-muted rounded\" data-testid={`quantity-${item.id}`}>\n                      {item.quantity}\n                    </span>\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => updateQuantity(item.id, item.quantity + 1)}\n                      data-testid={`button-increase-${item.id}`}\n                    >\n                      +\n                    </Button>\n                  </div>\n                </div>\n                <div className=\"flex items-center gap-3\">\n                  <span className=\"font-bold text-primary\" data-testid={`item-total-${item.id}`}>\n                    {parsePrice(item.price) * item.quantity} ريال\n                  </span>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    onClick={() => removeItem(item.id)}\n                    className=\"text-destructive hover:bg-destructive/10\"\n                    data-testid={`button-remove-${item.id}`}\n                  >\n                    <Trash2 className=\"h-4 w-4\" />\n                  </Button>\n                </div>\n              </Card>\n            ))\n          )}\n        </div>\n\n        {/* Order Summary and Form */}\n        {items.length > 0 && (\n          <Card className=\"p-4\">\n            <h3 className=\"font-bold text-foreground mb-4\">ملخص الطلب</h3>\n            \n            {/* Order Summary */}\n            <div className=\"space-y-2 text-sm mb-6\">\n              <div className=\"flex justify-between\">\n                <span className=\"text-muted-foreground\">المجموع الفرعي</span>\n                <span className=\"text-foreground\" data-testid=\"order-subtotal\">\n                  {getSubtotal()} ريال\n                </span>\n              </div>\n              <div className=\"flex justify-between\">\n                <span className=\"text-muted-foreground\">رسوم التوصيل</span>\n                <span className=\"text-foreground\">5 ريال</span>\n              </div>\n              <div className=\"border-t border-border pt-2 mt-2\">\n                <div className=\"flex justify-between font-bold\">\n                  <span className=\"text-foreground\">الإجمالي</span>\n                  <span className=\"text-primary\" data-testid=\"order-total\">\n                    {getTotal()} ريال\n                  </span>\n                </div>\n              </div>\n            </div>\n\n            {/* Order Form */}\n            <div className=\"space-y-4\">\n              <div>\n                <Label htmlFor=\"customerName\" className=\"text-foreground\">الاسم *</Label>\n                <Input\n                  id=\"customerName\"\n                  value={orderForm.customerName}\n                  onChange={(e) => setOrderForm(prev => ({ ...prev, customerName: e.target.value }))}\n                  placeholder=\"أدخل اسمك\"\n                  data-testid=\"input-customer-name\"\n                />\n              </div>\n\n              <div>\n                <Label htmlFor=\"customerPhone\" className=\"text-foreground\">رقم الهاتف *</Label>\n                <Input\n                  id=\"customerPhone\"\n                  value={orderForm.customerPhone}\n                  onChange={(e) => setOrderForm(prev => ({ ...prev, customerPhone: e.target.value }))}\n                  placeholder=\"أدخل رقم هاتفك\"\n                  data-testid=\"input-customer-phone\"\n                />\n              </div>\n\n              <div>\n                <Label htmlFor=\"customerEmail\" className=\"text-foreground\">البريد الإلكتروني</Label>\n                <Input\n                  id=\"customerEmail\"\n                  type=\"email\"\n                  value={orderForm.customerEmail}\n                  onChange={(e) => setOrderForm(prev => ({ ...prev, customerEmail: e.target.value }))}\n                  placeholder=\"أدخل بريدك الإلكتروني (اختياري)\"\n                  data-testid=\"input-customer-email\"\n                />\n              </div>\n\n              <div>\n                <Label htmlFor=\"deliveryAddress\" className=\"text-foreground\">عنوان التوصيل *</Label>\n                <Input\n                  id=\"deliveryAddress\"\n                  value={orderForm.deliveryAddress}\n                  onChange={(e) => setOrderForm(prev => ({ ...prev, deliveryAddress: e.target.value }))}\n                  placeholder=\"أدخل عنوانك بالتفصيل\"\n                  data-testid=\"input-delivery-address\"\n                />\n              </div>\n\n              <div>\n                <Label htmlFor=\"notes\" className=\"text-foreground\">ملاحظات الطلب</Label>\n                <Textarea\n                  id=\"notes\"\n                  value={orderForm.notes}\n                  onChange={(e) => setOrderForm(prev => ({ ...prev, notes: e.target.value }))}\n                  placeholder=\"ملاحظات إضافية (اختياري)\"\n                  className=\"h-20 resize-none\"\n                  data-testid=\"input-notes\"\n                />\n              </div>\n\n              <div>\n                <Label className=\"text-foreground\">طريقة الدفع</Label>\n                <RadioGroup\n                  value={orderForm.paymentMethod}\n                  onValueChange={(value) => setOrderForm(prev => ({ ...prev, paymentMethod: value }))}\n                  className=\"space-y-2 mt-2\"\n                >\n                  <div className=\"flex items-center space-x-2 space-x-reverse p-3 bg-muted rounded-lg\">\n                    <RadioGroupItem value=\"cash\" id=\"cash\" data-testid=\"payment-cash\" />\n                    <Label htmlFor=\"cash\" className=\"flex items-center gap-3 cursor-pointer\">\n                      <i className=\"fas fa-money-bill-wave text-muted-foreground\"></i>\n                      <span className=\"text-foreground\">الدفع عند الاستلام</span>\n                    </Label>\n                  </div>\n                  <div className=\"flex items-center space-x-2 space-x-reverse p-3 bg-muted rounded-lg\">\n                    <RadioGroupItem value=\"card\" id=\"card\" data-testid=\"payment-card\" />\n                    <Label htmlFor=\"card\" className=\"flex items-center gap-3 cursor-pointer\">\n                      <i className=\"fas fa-credit-card text-muted-foreground\"></i>\n                      <span className=\"text-foreground\">الدفع الإلكتروني</span>\n                    </Label>\n                  </div>\n                  <div className=\"flex items-center space-x-2 space-x-reverse p-3 bg-muted rounded-lg\">\n                    <RadioGroupItem value=\"wallet\" id=\"wallet\" data-testid=\"payment-wallet\" />\n                    <Label htmlFor=\"wallet\" className=\"flex items-center gap-3 cursor-pointer\">\n                      <i className=\"fas fa-wallet text-muted-foreground\"></i>\n                      <span className=\"text-foreground\">الدفع من الرصيد</span>\n                    </Label>\n                  </div>\n                </RadioGroup>\n              </div>\n            </div>\n\n            <Button\n              onClick={handlePlaceOrder}\n              disabled={placeOrderMutation.isPending}\n              className=\"w-full mt-6 py-4 text-lg font-bold\"\n              data-testid=\"button-place-order\"\n            >\n              {placeOrderMutation.isPending ? 'جاري تأكيد الطلب...' : 'تأكيد الطلب'}\n            </Button>\n          </Card>\n        )}\n      </section>\n    </div>\n  );\n}","size_bytes":12579},"client/src/pages/Delivery.tsx":{"content":"import { useState } from 'react';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { MapPin, Package, Phone, Check, X, Navigation, DollarSign, Clock, User, Star } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Switch } from '@/components/ui/switch';\nimport { Label } from '@/components/ui/label';\nimport { useToast } from '@/hooks/use-toast';\nimport { apiRequest } from '@/lib/queryClient';\nimport type { Order, Driver } from '@shared/schema';\n\nexport default function Delivery() {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  \n  // Mock driver data - in real app this would come from authentication\n  const [currentDriver] = useState<Driver>({\n    id: '1',\n    name: 'أحمد محمد',\n    phone: '+967771234567',\n    password: '$2b$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi',\n    isAvailable: true,\n    isActive: true,\n    currentLocation: 'صنعاء، شارع الزبيري',\n    earnings: '2500',\n    createdAt: new Date(),\n  });\n\n  const [driverStatus, setDriverStatus] = useState(currentDriver.isAvailable);\n\n  const { data: availableOrders, isLoading } = useQuery<Order[]>({\n    queryKey: ['/api/orders', { status: 'confirmed' }],\n  });\n\n  const { data: activeOrders } = useQuery<Order[]>({\n    queryKey: ['/api/orders', { driverId: currentDriver.id, status: 'on_way' }],\n  });\n\n  const acceptOrderMutation = useMutation({\n    mutationFn: async (orderId: string) => {\n      const response = await apiRequest('PUT', `/api/orders/${orderId}`, {\n        status: 'on_way',\n        driverId: currentDriver.id,\n      });\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/orders'] });\n      toast({\n        title: \"تم قبول الطلب\",\n        description: \"يمكنك الآن بدء رحلة التوصيل\",\n      });\n    },\n  });\n\n  const completeOrderMutation = useMutation({\n    mutationFn: async (orderId: string) => {\n      const response = await apiRequest('PUT', `/api/orders/${orderId}`, {\n        status: 'delivered',\n      });\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/orders'] });\n      toast({\n        title: \"تم تسليم الطلب\",\n        description: \"تم تحديث حالة الطلب بنجاح\",\n      });\n    },\n  });\n\n  const updateDriverStatus = useMutation({\n    mutationFn: async (isAvailable: boolean) => {\n      const response = await apiRequest('PUT', `/api/drivers/${currentDriver.id}`, {\n        isAvailable,\n      });\n      return response.json();\n    },\n    onSuccess: (_, isAvailable: boolean) => {\n      setDriverStatus(isAvailable);\n      toast({\n        title: isAvailable ? \"أنت متاح الآن\" : \"أنت غير متاح\",\n        description: isAvailable ? \"ستتلقى طلبات جديدة\" : \"لن تتلقى طلبات جديدة\",\n      });\n    },\n  });\n\n  const getOrderItems = (itemsString: string) => {\n    try {\n      return JSON.parse(itemsString);\n    } catch {\n      return [];\n    }\n  };\n\n  // دالة لتحويل القيم الرقمية من string إلى number\n  const parseDecimal = (value: string | null): number => {\n    if (!value) return 0;\n    const num = parseFloat(value);\n    return isNaN(num) ? 0 : num;\n  };\n\n  const todayEarnings = 450; // Mock data\n  const todayOrders = 8; // Mock data\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Header */}\n      <header className=\"bg-card border-b border-border p-4 sticky top-0 z-40\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-12 h-12 bg-primary rounded-full flex items-center justify-center\">\n              <User className=\"h-6 w-6 text-primary-foreground\" />\n            </div>\n            <div>\n              <h1 className=\"text-lg font-bold text-foreground\">{currentDriver.name}</h1>\n              <p className=\"text-sm text-muted-foreground\">سائق توصيل</p>\n            </div>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <Label htmlFor=\"driver-status\" className=\"text-sm text-foreground\">متاح</Label>\n            <Switch\n              id=\"driver-status\"\n              checked={driverStatus}\n              onCheckedChange={(checked) => updateDriverStatus.mutate(checked)}\n              data-testid=\"switch-driver-status\"\n            />\n          </div>\n        </div>\n      </header>\n\n      <div className=\"p-4 space-y-6\">\n        {/* Today's Stats */}\n        <div className=\"grid grid-cols-2 gap-4\">\n          <Card>\n            <CardContent className=\"p-4 text-center\">\n              <DollarSign className=\"h-8 w-8 text-green-500 mx-auto mb-2\" />\n              <h3 className=\"text-lg font-bold text-foreground\" data-testid=\"today-earnings\">\n                {todayEarnings} ريال\n              </h3>\n              <p className=\"text-sm text-muted-foreground\">أرباح اليوم</p>\n            </CardContent>\n          </Card>\n          \n          <Card>\n            <CardContent className=\"p-4 text-center\">\n              <Package className=\"h-8 w-8 text-primary mx-auto mb-2\" />\n              <h3 className=\"text-lg font-bold text-foreground\" data-testid=\"today-orders\">\n                {todayOrders}\n              </h3>\n              <p className=\"text-sm text-muted-foreground\">طلبات اليوم</p>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Active Orders */}\n        {activeOrders && activeOrders.length > 0 && (\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Package className=\"h-5 w-5 text-primary\" />\n                الطلبات الحالية\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              {activeOrders.map((order) => (\n                <div key={order.id} className=\"border border-border rounded-lg p-4\">\n                  <div className=\"flex justify-between items-start mb-3\">\n                    <div>\n                      <h4 className=\"font-bold text-foreground\">طلب #{order.id}</h4>\n                      <p className=\"text-sm text-muted-foreground\">{order.customerName}</p>\n                    </div>\n                    <Badge className=\"bg-orange-500 hover:bg-orange-500\">جاري التوصيل</Badge>\n                  </div>\n                  \n                  <div className=\"space-y-2 mb-4\">\n                    <div className=\"flex items-center gap-2\">\n                      <MapPin className=\"h-4 w-4 text-muted-foreground\" />\n                      <span className=\"text-sm text-foreground\">{order.deliveryAddress}</span>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <Phone className=\"h-4 w-4 text-muted-foreground\" />\n                      <span className=\"text-sm text-foreground\">{order.customerPhone}</span>\n                    </div>\n                  </div>\n                  \n                  <div className=\"flex gap-2\">\n                    <Button \n                      className=\"flex-1 gap-2\"\n                      onClick={() => window.open(`tel:${order.customerPhone}`)}\n                      data-testid={`button-call-${order.id}`}\n                    >\n                      <Phone className=\"h-4 w-4\" />\n                      اتصال\n                    </Button>\n                    <Button \n                      className=\"flex-1 gap-2\"\n                      onClick={() => window.open(`https://maps.google.com/?q=${encodeURIComponent(order.deliveryAddress)}`)}\n                      data-testid={`button-navigate-${order.id}`}\n                    >\n                      <Navigation className=\"h-4 w-4\" />\n                      التنقل\n                    </Button>\n                    <Button \n                      variant=\"outline\"\n                      className=\"flex-1 gap-2\"\n                      onClick={() => completeOrderMutation.mutate(order.id)}\n                      disabled={completeOrderMutation.isPending}\n                      data-testid={`button-complete-${order.id}`}\n                    >\n                      <Check className=\"h-4 w-4\" />\n                      تم التسليم\n                    </Button>\n                  </div>\n                </div>\n              ))}\n            </CardContent>\n          </Card>\n        )}\n\n        {/* Available Orders */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Clock className=\"h-5 w-5 text-primary\" />\n              الطلبات المتاحة\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            {!driverStatus ? (\n              <div className=\"text-center py-8\">\n                <Clock className=\"h-12 w-12 text-muted-foreground mx-auto mb-4\" />\n                <p className=\"text-muted-foreground\">قم بتفعيل حالة التوفر لاستقبال الطلبات</p>\n              </div>\n            ) : isLoading ? (\n              <div className=\"space-y-4\">\n                {[...Array(3)].map((_, i) => (\n                  <div key={i} className=\"border border-border rounded-lg p-4 animate-pulse\">\n                    <div className=\"h-4 bg-muted rounded w-3/4 mb-2\" />\n                    <div className=\"h-3 bg-muted rounded w-1/2 mb-3\" />\n                    <div className=\"h-3 bg-muted rounded w-2/3\" />\n                  </div>\n                ))}\n              </div>\n            ) : availableOrders && availableOrders.length > 0 ? (\n              <div className=\"space-y-4\">\n                {availableOrders.map((order) => {\n                  const items = getOrderItems(order.items);\n                  const totalAmount = parseDecimal(order.totalAmount);\n                  const commission = Math.round(totalAmount * 0.1);\n                  \n                  return (\n                    <div key={order.id} className=\"border border-border rounded-lg p-4\">\n                      <div className=\"flex justify-between items-start mb-3\">\n                        <div>\n                          <h4 className=\"font-bold text-foreground\">طلب #{order.id}</h4>\n                          <p className=\"text-sm text-muted-foreground\">{order.customerName}</p>\n                        </div>\n                        <div className=\"text-right\">\n                          <p className=\"font-bold text-primary\">{totalAmount} ريال</p>\n                          <p className=\"text-sm text-muted-foreground\">العمولة: {commission} ريال</p>\n                        </div>\n                      </div>\n                      \n                      <div className=\"space-y-2 mb-4\">\n                        <div className=\"flex items-center gap-2\">\n                          <MapPin className=\"h-4 w-4 text-muted-foreground\" />\n                          <span className=\"text-sm text-foreground\">{order.deliveryAddress}</span>\n                        </div>\n                        <div className=\"flex items-center gap-2\">\n                          <Package className=\"h-4 w-4 text-muted-foreground\" />\n                          <span className=\"text-sm text-foreground\">\n                            {items.length} عنصر - {order.paymentMethod === 'cash' ? 'دفع نقدي' : 'مدفوع مسبقاً'}\n                          </span>\n                        </div>\n                      </div>\n                      \n                      <div className=\"flex gap-2\">\n                        <Button \n                          className=\"flex-1\"\n                          onClick={() => acceptOrderMutation.mutate(order.id)}\n                          disabled={acceptOrderMutation.isPending}\n                          data-testid={`button-accept-${order.id}`}\n                        >\n                          قبول الطلب\n                        </Button>\n                        <Button \n                          variant=\"outline\"\n                          onClick={() => window.open(`https://maps.google.com/?q=${encodeURIComponent(order.deliveryAddress)}`)}\n                          data-testid={`button-view-location-${order.id}`}\n                        >\n                          عرض الموقع\n                        </Button>\n                      </div>\n                    </div>\n                  );\n                })}\n              </div>\n            ) : (\n              <div className=\"text-center py-8\">\n                <Package className=\"h-12 w-12 text-muted-foreground mx-auto mb-4\" />\n                <p className=\"text-muted-foreground\">لا توجد طلبات متاحة في الوقت الحالي</p>\n                <p className=\"text-sm text-muted-foreground mt-2\">سيتم إشعارك عند توفر طلبات جديدة</p>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Earnings Summary */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2\">\n              <Star className=\"h-5 w-5 text-primary\" />\n              ملخص الأرباح\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"grid grid-cols-2 gap-4 text-center\">\n              <div>\n                <p className=\"text-sm text-muted-foreground\">هذا الأسبوع</p>\n                <p className=\"text-lg font-bold text-foreground\">1,250 ريال</p>\n              </div>\n              <div>\n                <p className=\"text-sm text-muted-foreground\">هذا الشهر</p>\n                <p className=\"text-lg font-bold text-foreground\">4,800 ريال</p>\n              </div>\n              <div>\n                <p className=\"text-sm text-muted-foreground\">متوسط الطلب</p>\n                <p className=\"text-lg font-bold text-foreground\">85 ريال</p>\n              </div>\n              <div>\n                <p className=\"text-sm text-muted-foreground\">التقييم</p>\n                <p className=\"text-lg font-bold text-foreground\">4.9 ⭐</p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}","size_bytes":14449},"client/src/pages/DriverDashboard.tsx":{"content":"import React, { useState } from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport { useAuth } from '@/context/AuthContext';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { NotificationSystem } from '@/components/NotificationSystem';\nimport { apiRequest } from '@/lib/queryClient';\nimport { \n  Truck, \n  MapPin, \n  Clock, \n  DollarSign, \n  LogOut,\n  Navigation,\n  Phone,\n  CheckCircle,\n  XCircle,\n  Package,\n  TrendingUp,\n  Star\n} from 'lucide-react';\n\nexport default function DriverDashboard() {\n  const { user, logout } = useAuth();\n  const [isAvailable, setIsAvailable] = useState(true);\n  const [currentOrder, setCurrentOrder] = useState<any>(null);\n\n  const { data: dashboardData, isLoading } = useQuery({\n    queryKey: ['/api/driver/dashboard'],\n    queryFn: async () => {\n      const response = await apiRequest('GET', '/api/driver/dashboard', null, user?.token);\n      return response.json();\n    },\n    refetchInterval: 10000, // تحديث كل 10 ثواني\n  });\n\n  const handleLogout = () => {\n    logout();\n  };\n\n  const toggleAvailability = () => {\n    setIsAvailable(!isAvailable);\n  };\n\n  const acceptOrder = (orderId: string) => {\n    // TODO: إرسال طلب قبول الطلب إلى الخادم\n    console.log('قبول الطلب:', orderId);\n  };\n\n  const completeOrder = () => {\n    // TODO: إرسال طلب إكمال الطلب إلى الخادم\n    setCurrentOrder(null);\n  };\n\n  const stats = dashboardData?.stats || {};\n  const availableOrders = dashboardData?.availableOrders || [];\n  const currentOrders = dashboardData?.currentOrders || [];\n\n  const todayStats = [\n    { title: 'توصيلات اليوم', value: stats.todayOrders || 0, icon: Package, color: 'text-blue-600' },\n    { title: 'أرباح اليوم', value: `${stats.todayEarnings || 0} ريال`, icon: DollarSign, color: 'text-green-600' },\n    { title: 'إجمالي الطلبات', value: stats.totalOrders || 0, icon: TrendingUp, color: 'text-orange-600' },\n    { title: 'التقييم', value: stats.averageRating || '0.0', icon: Star, color: 'text-yellow-600' },\n  ];\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">جاري تحميل البيانات...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\" dir=\"rtl\">\n      {/* Header */}\n      <header className=\"bg-white shadow-sm border-b\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between items-center h-16\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"w-10 h-10 bg-gradient-to-br from-green-500 to-green-600 rounded-lg flex items-center justify-center\">\n                <Truck className=\"h-6 w-6 text-white\" />\n              </div>\n              <div>\n                <h1 className=\"text-xl font-bold text-gray-900\">تطبيق السائق</h1>\n                <p className=\"text-sm text-gray-500\">مرحباً {user?.name}</p>\n              </div>\n            </div>\n            <div className=\"flex items-center gap-3\">\n              <Button \n                variant={isAvailable ? \"default\" : \"secondary\"}\n                onClick={toggleAvailability}\n                className={isAvailable ? \"bg-green-600 hover:bg-green-700\" : \"bg-gray-500 hover:bg-gray-600\"}\n              >\n                {isAvailable ? 'متاح' : 'غير متاح'}\n              </Button>\n              <Button \n                variant=\"outline\" \n                onClick={handleLogout}\n                className=\"flex items-center gap-2 hover:bg-red-50 hover:text-red-600 hover:border-red-200\"\n              >\n                <LogOut className=\"h-4 w-4\" />\n                تسجيل الخروج\n              </Button>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* Main Content */}\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {/* Notification System */}\n        <div className=\"mb-6\">\n          <NotificationSystem userType=\"driver\" />\n        </div>\n\n        {/* Stats Cards */}\n        <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\n          {todayStats.map((stat, index) => {\n            const Icon = stat.icon;\n            return (\n              <Card key={index} className=\"hover:shadow-lg transition-shadow duration-200\">\n                <CardContent className=\"p-6\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"text-sm font-medium text-gray-600 mb-1\">{stat.title}</p>\n                      <p className=\"text-2xl font-bold text-gray-900\">{stat.value}</p>\n                    </div>\n                    <Icon className={`h-8 w-8 ${stat.color}`} />\n                  </div>\n                </CardContent>\n              </Card>\n            );\n          })}\n        </div>\n\n        {/* Current Order */}\n        {currentOrders.length > 0 && (\n          <Card className=\"mb-6 border-green-200 bg-green-50\">\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2 text-green-800\">\n                <Package className=\"h-5 w-5\" />\n                الطلب الحالي - #{currentOrders[0].orderNumber}\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-4\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <p className=\"font-medium\">{currentOrders[0].customerName}</p>\n                    <div className=\"flex items-center gap-2 text-sm text-gray-600 mt-1\">\n                      <Phone className=\"h-4 w-4\" />\n                      {currentOrders[0].customerPhone}\n                    </div>\n                    <div className=\"flex items-center gap-2 text-sm text-gray-600 mt-1\">\n                      <MapPin className=\"h-4 w-4\" />\n                      {JSON.parse(currentOrders[0].deliveryAddress).address}\n                    </div>\n                  </div>\n                  <div>\n                    <p className=\"font-medium\">{currentOrders[0].restaurantId?.name || 'مطعم'}</p>\n                    <p className=\"text-sm text-gray-600 mt-1\">\n                      {JSON.parse(currentOrders[0].items).length} عنصر\n                    </p>\n                    <p className=\"text-lg font-bold text-green-600 mt-2\">{currentOrders[0].total} ريال</p>\n                  </div>\n                </div>\n                <div className=\"flex gap-3\">\n                  <Button className=\"flex-1 bg-blue-600 hover:bg-blue-700\">\n                    <Navigation className=\"h-4 w-4 mr-2\" />\n                    فتح الخريطة\n                  </Button>\n                  <Button className=\"flex-1\" onClick={completeOrder}>\n                    <CheckCircle className=\"h-4 w-4 mr-2\" />\n                    تم التسليم\n                  </Button>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        )}\n\n        {/* Available Orders */}\n        {isAvailable && currentOrders.length === 0 && (\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Clock className=\"h-5 w-5\" />\n                الطلبات المتاحة\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              {availableOrders.length > 0 ? (\n                <div className=\"space-y-4\">\n                  {availableOrders.map((order: any) => (\n                    <div key={order.id} className=\"border rounded-lg p-4 hover:bg-gray-50 transition-colors\">\n                      <div className=\"flex justify-between items-start mb-3\">\n                        <div>\n                          <p className=\"font-medium\">طلب #{order.orderNumber}</p>\n                          <p className=\"text-sm text-gray-600\">{order.customerName}</p>\n                        </div>\n                        <Badge variant=\"secondary\">\n                          {new Date(order.createdAt).toLocaleTimeString('ar-YE')}\n                        </Badge>\n                      </div>\n                      \n                      <div className=\"space-y-2 mb-4\">\n                        <div className=\"flex items-center gap-2 text-sm\">\n                          <Package className=\"h-4 w-4 text-gray-400\" />\n                          {order.restaurantId?.name || 'مطعم'}\n                        </div>\n                        <div className=\"flex items-center gap-2 text-sm\">\n                          <MapPin className=\"h-4 w-4 text-gray-400\" />\n                          {JSON.parse(order.deliveryAddress).address}\n                        </div>\n                        <div className=\"flex justify-between text-sm\">\n                          <span>المجموع: {order.total} ريال</span>\n                          <span className=\"font-medium text-green-600\">\n                            رسوم التوصيل: {order.deliveryFee} ريال\n                          </span>\n                        </div>\n                      </div>\n                      \n                      <div className=\"flex gap-3\">\n                        <Button \n                          className=\"flex-1 bg-green-600 hover:bg-green-700\"\n                          onClick={() => acceptOrder(order.id)}\n                        >\n                          <CheckCircle className=\"h-4 w-4 mr-2\" />\n                          قبول الطلب\n                        </Button>\n                        <Button variant=\"outline\" className=\"flex-1 text-red-600 hover:bg-red-50\">\n                          <XCircle className=\"h-4 w-4 mr-2\" />\n                          رفض\n                        </Button>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              ) : (\n                <div className=\"text-center py-8\">\n                  <Clock className=\"h-16 w-16 text-gray-300 mx-auto mb-4\" />\n                  <p className=\"text-gray-500\">لا توجد طلبات متاحة حالياً</p>\n                  <p className=\"text-sm text-gray-400 mt-2\">سيتم إشعارك عند توفر طلبات جديدة</p>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        )}\n\n        {/* Offline Status */}\n        {!isAvailable && (\n          <Card>\n            <CardContent className=\"py-8\">\n              <div className=\"text-center\">\n                <Truck className=\"h-16 w-16 text-gray-300 mx-auto mb-4\" />\n                <p className=\"text-lg font-medium text-gray-600 mb-2\">أنت غير متاح حالياً</p>\n                <p className=\"text-sm text-gray-400 mb-4\">قم بتفعيل حالة المتاح لاستلام الطلبات</p>\n                <Button onClick={toggleAvailability} className=\"bg-green-600 hover:bg-green-700\">\n                  تفعيل حالة المتاح\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        )}\n      </main>\n    </div>\n  );\n}","size_bytes":11479},"client/src/pages/Home.tsx":{"content":"import { useState } from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport { useLocation } from 'wouter';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Gift, Truck, Clock, Star, Zap, Percent } from 'lucide-react';\nimport CategoryTabs from '../components/CategoryTabs';\nimport RestaurantCard from '../components/RestaurantCard';\nimport type { Restaurant } from '@shared/schema';\n\nexport default function Home() {\n  const [, setLocation] = useLocation();\n  const [selectedCategory, setSelectedCategory] = useState<string | null>(null);\n\n  const { data: restaurants, isLoading } = useQuery<Restaurant[]>({\n    queryKey: ['/api/restaurants', ...(selectedCategory ? [`?categoryId=${selectedCategory}`] : [])],\n  });\n\n  const handleRestaurantClick = (restaurantId: string) => {\n    setLocation(`/restaurant/${restaurantId}`);\n  };\n\n  return (\n    <div>\n      {/* Special Offers */}\n      <section className=\"mb-6\">\n        <h3 className=\"text-lg font-bold text-foreground mb-4 px-4 flex items-center gap-2\">\n          <Zap className=\"h-5 w-5 text-primary\" />\n          العروض الخاصة\n        </h3>\n        <div className=\"px-4 space-y-3\">\n          <Card className=\"bg-gradient-to-r from-primary/20 to-primary/10 border-primary/30 overflow-hidden\">\n            <CardContent className=\"p-0\">\n              <div className=\"flex items-center\">\n                <div className=\"w-20 h-20 bg-primary/20 flex items-center justify-center\">\n                  <Gift className=\"h-10 w-10 text-primary\" />\n                </div>\n                <div className=\"flex-1 p-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <h4 className=\"font-bold text-foreground\">خصم 30% على الطلب الأول</h4>\n                      <p className=\"text-sm text-muted-foreground\">استخدم كود: WELCOME30</p>\n                    </div>\n                    <Badge className=\"bg-primary\">جديد</Badge>\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n          \n          <Card className=\"bg-gradient-to-r from-green-500/20 to-green-500/10 border-green-500/30 overflow-hidden\">\n            <CardContent className=\"p-0\">\n              <div className=\"flex items-center\">\n                <div className=\"w-20 h-20 bg-green-500/20 flex items-center justify-center\">\n                  <Truck className=\"h-10 w-10 text-green-500\" />\n                </div>\n                <div className=\"flex-1 p-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <h4 className=\"font-bold text-foreground\">توصيل مجاني للطلبات فوق 50 ريال</h4>\n                      <p className=\"text-sm text-muted-foreground\">لفترة محدودة</p>\n                    </div>\n                    <Badge className=\"bg-green-500\">مميز</Badge>\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card className=\"bg-gradient-to-r from-yellow-500/20 to-yellow-500/10 border-yellow-500/30 overflow-hidden\">\n            <CardContent className=\"p-0\">\n              <div className=\"flex items-center\">\n                <div className=\"w-20 h-20 bg-yellow-500/20 flex items-center justify-center\">\n                  <Clock className=\"h-10 w-10 text-yellow-500\" />\n                </div>\n                <div className=\"flex-1 p-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <h4 className=\"font-bold text-foreground\">طلب سريع في 15 دقيقة</h4>\n                      <p className=\"text-sm text-muted-foreground\">للطلبات داخل المدينة</p>\n                    </div>\n                    <Badge className=\"bg-yellow-500\">سريع</Badge>\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n          \n          <Card className=\"bg-gradient-to-r from-purple-500/20 to-purple-500/10 border-purple-500/30 overflow-hidden\">\n            <CardContent className=\"p-0\">\n              <div className=\"flex items-center\">\n                <div className=\"w-20 h-20 bg-purple-500/20 flex items-center justify-center\">\n                  <Star className=\"h-10 w-10 text-purple-500\" />\n                </div>\n                <div className=\"flex-1 p-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <h4 className=\"font-bold text-foreground\">نقاط مكافآت مضاعفة</h4>\n                      <p className=\"text-sm text-muted-foreground\">اجمع نقاط واحصل على خصومات</p>\n                    </div>\n                    <Badge className=\"bg-purple-500\">VIP</Badge>\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </section>\n\n      {/* Category Tabs */}\n      <CategoryTabs \n        selectedCategory={selectedCategory}\n        onCategoryChange={setSelectedCategory}\n      />\n\n      {/* Restaurant List */}\n      <section className=\"px-4 space-y-4\">\n        <h3 className=\"text-lg font-bold text-foreground mb-4\">المطاعم القريبة منك</h3>\n        \n        {isLoading ? (\n          <div className=\"space-y-4\">\n            {[...Array(3)].map((_, i) => (\n              <div key={i} className=\"bg-card rounded-xl border border-border overflow-hidden\">\n                <div className=\"w-full h-48 bg-muted animate-pulse\" />\n                <div className=\"p-4 space-y-3\">\n                  <div className=\"h-4 bg-muted rounded animate-pulse\" />\n                  <div className=\"h-3 bg-muted rounded w-3/4 animate-pulse\" />\n                  <div className=\"h-3 bg-muted rounded w-1/2 animate-pulse\" />\n                </div>\n              </div>\n            ))}\n          </div>\n        ) : restaurants?.length ? (\n          restaurants.map((restaurant) => (\n            <RestaurantCard\n              key={restaurant.id}\n              restaurant={restaurant}\n              onClick={() => handleRestaurantClick(restaurant.id)}\n            />\n          ))\n        ) : (\n          <div className=\"text-center text-muted-foreground py-8\">\n            <p>لا توجد مطاعم متاحة في هذا التصنيف</p>\n          </div>\n        )}\n      </section>\n    </div>\n  );\n}\n","size_bytes":6620},"client/src/pages/HomePage.tsx":{"content":"import React, { useState, useEffect } from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport { useLocation } from 'wouter';\nimport { \n  Search, \n  MapPin, \n  Clock, \n  Star, \n  ShoppingBag,\n  Percent,\n  Filter,\n  Grid,\n  List,\n  ChevronRight,\n  Truck,\n  Settings\n} from 'lucide-react';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Input } from '@/components/ui/input';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport type { Category, Restaurant, SpecialOffer } from '@shared/schema';\n\nexport default function HomePage() {\n  const [, setLocation] = useLocation();\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState('all');\n  const [viewMode, setViewMode] = useState<'grid' | 'list'>('grid');\n  const [clickCount, setClickCount] = useState(0);\n  const [showAdminButtons, setShowAdminButtons] = useState(false);\n\n  // نظام الـ 4 نقرات\n  useEffect(() => {\n    if (clickCount === 4) {\n      setShowAdminButtons(true);\n    }\n    \n    // إعادة تعيين العداد بعد 3 ثوانٍ\n    const timer = setTimeout(() => {\n      if (clickCount > 0 && clickCount < 4) {\n        setClickCount(0);\n      }\n    }, 3000);\n\n    return () => clearTimeout(timer);\n  }, [clickCount]);\n\n  const handleLogoClick = () => {\n    setClickCount(prev => prev + 1);\n  };\n\n  // جلب البيانات\n  const { data: categories } = useQuery<Category[]>({\n    queryKey: ['/api/categories'],\n  });\n\n  const { data: restaurants } = useQuery<Restaurant[]>({\n    queryKey: ['/api/restaurants', { categoryId: selectedCategory, search: searchQuery }],\n    queryFn: async () => {\n      const params = new URLSearchParams();\n      if (selectedCategory !== 'all') params.append('categoryId', selectedCategory);\n      if (searchQuery) params.append('search', searchQuery);\n      \n      const response = await fetch(`/api/restaurants?${params}`);\n      return response.json();\n    },\n  });\n\n  const { data: specialOffers } = useQuery<SpecialOffer[]>({\n    queryKey: ['/api/special-offers'],\n  });\n\n  const filteredRestaurants = restaurants?.filter(restaurant => {\n    const matchesSearch = !searchQuery || \n      restaurant.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      restaurant.description?.toLowerCase().includes(searchQuery.toLowerCase());\n    \n    const matchesCategory = selectedCategory === 'all' || restaurant.categoryId === selectedCategory;\n    \n    return matchesSearch && matchesCategory;\n  }) || [];\n\n  const handleRestaurantClick = (restaurantId: string) => {\n    setLocation(`/restaurant/${restaurantId}`);\n  };\n\n  const parseDecimal = (value: string | null): number => {\n    if (!value) return 0;\n    const num = parseFloat(value);\n    return isNaN(num) ? 0 : num;\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\" dir=\"rtl\">\n      {/* Header */}\n      <header className=\"bg-white shadow-sm sticky top-0 z-50\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex items-center justify-between h-16\">\n            {/* Logo مع نظام الـ 4 نقرات */}\n            <div className=\"flex items-center gap-3 cursor-pointer\" onClick={handleLogoClick}>\n              <div className=\"w-10 h-10 bg-gradient-to-br from-orange-500 to-orange-600 rounded-lg flex items-center justify-center\">\n                <ShoppingBag className=\"h-6 w-6 text-white\" />\n              </div>\n              <div>\n                <h1 className=\"text-xl font-bold text-gray-900\">السريع ون</h1>\n                <p className=\"text-xs text-gray-500\">توصيل سريع وآمن</p>\n              </div>\n              \n              {/* مؤشر النقرات */}\n              {clickCount > 0 && clickCount < 4 && (\n                <div className=\"flex gap-1 mr-2\">\n                  {[...Array(4)].map((_, i) => (\n                    <div\n                      key={i}\n                      className={`w-2 h-2 rounded-full ${\n                        i < clickCount ? 'bg-orange-500' : 'bg-gray-300'\n                      }`}\n                    />\n                  ))}\n                </div>\n              )}\n            </div>\n\n            {/* أزرار الإدارة (تظهر بعد 4 نقرات) */}\n            {showAdminButtons && (\n              <div className=\"flex items-center gap-2\">\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => setLocation('/admin-login')}\n                  className=\"flex items-center gap-2\"\n                >\n                  <Settings className=\"h-4 w-4\" />\n                  لوحة التحكم\n                </Button>\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => setLocation('/driver-login')}\n                  className=\"flex items-center gap-2\"\n                >\n                  <Truck className=\"h-4 w-4\" />\n                  تطبيق السائق\n                </Button>\n              </div>\n            )}\n\n            {/* العنوان والموقع */}\n            <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n              <MapPin className=\"h-4 w-4\" />\n              <span>صنعاء، اليمن</span>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      {/* Hero Section */}\n      <section className=\"bg-gradient-to-br from-orange-500 to-orange-600 text-white py-12\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"text-center\">\n            <h2 className=\"text-4xl font-bold mb-4\">اطلب طعامك المفضل</h2>\n            <p className=\"text-xl mb-8 opacity-90\">توصيل سريع من أفضل المطاعم في صنعاء</p>\n            \n            {/* شريط البحث */}\n            <div className=\"max-w-2xl mx-auto relative\">\n              <Search className=\"absolute right-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400\" />\n              <Input\n                type=\"text\"\n                placeholder=\"ابحث عن مطعم أو وجبة...\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                className=\"w-full pr-12 pl-4 py-4 text-lg rounded-xl border-0 shadow-lg\"\n              />\n            </div>\n          </div>\n        </div>\n      </section>\n\n      {/* Main Content */}\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {/* العروض الخاصة */}\n        {specialOffers && specialOffers.length > 0 && (\n          <section className=\"mb-12\">\n            <div className=\"flex items-center gap-2 mb-6\">\n              <Percent className=\"h-6 w-6 text-orange-500\" />\n              <h3 className=\"text-2xl font-bold text-gray-900\">العروض الخاصة</h3>\n            </div>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n              {specialOffers.slice(0, 3).map((offer) => (\n                <Card key={offer.id} className=\"overflow-hidden hover:shadow-lg transition-shadow cursor-pointer\">\n                  <div className=\"h-48 bg-gradient-to-br from-green-400 to-green-500 flex items-center justify-center\">\n                    {offer.image ? (\n                      <img src={offer.image} alt={offer.title} className=\"w-full h-full object-cover\" />\n                    ) : (\n                      <Percent className=\"h-16 w-16 text-white\" />\n                    )}\n                  </div>\n                  <CardContent className=\"p-4\">\n                    <h4 className=\"font-bold text-lg mb-2\">{offer.title}</h4>\n                    <p className=\"text-gray-600 text-sm mb-3\">{offer.description}</p>\n                    <div className=\"flex items-center justify-between\">\n                      {offer.discountPercent && (\n                        <Badge className=\"bg-green-100 text-green-800\">\n                          خصم {offer.discountPercent}%\n                        </Badge>\n                      )}\n                      {offer.discountAmount && (\n                        <Badge className=\"bg-green-100 text-green-800\">\n                          خصم {parseDecimal(offer.discountAmount)} ريال\n                        </Badge>\n                      )}\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          </section>\n        )}\n\n        {/* التصنيفات والمطاعم */}\n        <section>\n          <div className=\"flex items-center justify-between mb-6\">\n            <h3 className=\"text-2xl font-bold text-gray-900\">المطاعم</h3>\n            <div className=\"flex items-center gap-4\">\n              {/* تبديل العرض */}\n              <div className=\"flex items-center gap-1 bg-gray-100 rounded-lg p-1\">\n                <Button\n                  variant={viewMode === 'grid' ? 'default' : 'ghost'}\n                  size=\"sm\"\n                  onClick={() => setViewMode('grid')}\n                >\n                  <Grid className=\"h-4 w-4\" />\n                </Button>\n                <Button\n                  variant={viewMode === 'list' ? 'default' : 'ghost'}\n                  size=\"sm\"\n                  onClick={() => setViewMode('list')}\n                >\n                  <List className=\"h-4 w-4\" />\n                </Button>\n              </div>\n            </div>\n          </div>\n\n          {/* فلتر التصنيفات */}\n          <div className=\"mb-8\">\n            <Tabs value={selectedCategory} onValueChange={setSelectedCategory}>\n              <TabsList className=\"grid w-full grid-cols-2 md:grid-cols-4 lg:grid-cols-6 h-auto\">\n                <TabsTrigger value=\"all\" className=\"py-3\">\n                  جميع المطاعم\n                </TabsTrigger>\n                {categories?.map((category) => (\n                  <TabsTrigger key={category.id} value={category.id} className=\"py-3\">\n                    {category.name}\n                  </TabsTrigger>\n                ))}\n              </TabsList>\n            </Tabs>\n          </div>\n\n          {/* قائمة المطاعم */}\n          {filteredRestaurants.length > 0 ? (\n            <div className={`grid gap-6 ${\n              viewMode === 'grid' \n                ? 'grid-cols-1 md:grid-cols-2 lg:grid-cols-3' \n                : 'grid-cols-1'\n            }`}>\n              {filteredRestaurants.map((restaurant) => (\n                <Card \n                  key={restaurant.id} \n                  className=\"overflow-hidden hover:shadow-lg transition-all duration-200 cursor-pointer group\"\n                  onClick={() => handleRestaurantClick(restaurant.id)}\n                >\n                  <div className=\"h-48 bg-gradient-to-br from-gray-200 to-gray-300 flex items-center justify-center overflow-hidden\">\n                    {restaurant.image ? (\n                      <img \n                        src={restaurant.image} \n                        alt={restaurant.name}\n                        className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200\"\n                      />\n                    ) : (\n                      <ShoppingBag className=\"h-16 w-16 text-gray-400\" />\n                    )}\n                  </div>\n                  \n                  <CardContent className=\"p-4\">\n                    <div className=\"flex items-start justify-between mb-2\">\n                      <h4 className=\"font-bold text-lg group-hover:text-orange-600 transition-colors\">\n                        {restaurant.name}\n                      </h4>\n                      {restaurant.isOpen ? (\n                        <Badge className=\"bg-green-100 text-green-800\">مفتوح</Badge>\n                      ) : (\n                        <Badge variant=\"secondary\">مغلق</Badge>\n                      )}\n                    </div>\n                    \n                    {restaurant.description && (\n                      <p className=\"text-gray-600 text-sm mb-3 line-clamp-2\">\n                        {restaurant.description}\n                      </p>\n                    )}\n                    \n                    <div className=\"flex items-center justify-between text-sm text-gray-500\">\n                      <div className=\"flex items-center gap-4\">\n                        <div className=\"flex items-center gap-1\">\n                          <Star className=\"h-4 w-4 text-yellow-500\" />\n                          <span>{parseDecimal(restaurant.rating)}</span>\n                        </div>\n                        <div className=\"flex items-center gap-1\">\n                          <Clock className=\"h-4 w-4\" />\n                          <span>{restaurant.deliveryTime}</span>\n                        </div>\n                      </div>\n                      <div className=\"text-left\">\n                        <p className=\"text-xs\">رسوم التوصيل</p>\n                        <p className=\"font-medium text-gray-900\">\n                          {parseDecimal(restaurant.deliveryFee)} ريال\n                        </p>\n                      </div>\n                    </div>\n                    \n                    <div className=\"mt-3 pt-3 border-t flex items-center justify-between\">\n                      <span className=\"text-xs text-gray-500\">\n                        أقل طلب: {parseDecimal(restaurant.minimumOrder)} ريال\n                      </span>\n                      <ChevronRight className=\"h-4 w-4 text-gray-400 group-hover:text-orange-600 transition-colors\" />\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          ) : (\n            <div className=\"text-center py-12\">\n              <ShoppingBag className=\"h-16 w-16 text-gray-300 mx-auto mb-4\" />\n              <h3 className=\"text-lg font-medium text-gray-900 mb-2\">لا توجد مطاعم</h3>\n              <p className=\"text-gray-500\">\n                {searchQuery \n                  ? `لم نجد مطاعم تطابق \"${searchQuery}\"`\n                  : 'لا توجد مطاعم متاحة في الوقت الحالي'\n                }\n              </p>\n            </div>\n          )}\n        </section>\n      </main>\n\n      {/* Footer */}\n      <footer className=\"bg-gray-900 text-white py-12 mt-16\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8\">\n            <div>\n              <div className=\"flex items-center gap-3 mb-4\">\n                <div className=\"w-8 h-8 bg-orange-500 rounded-lg flex items-center justify-center\">\n                  <ShoppingBag className=\"h-5 w-5 text-white\" />\n                </div>\n                <h3 className=\"text-xl font-bold\">السريع ون</h3>\n              </div>\n              <p className=\"text-gray-400\">\n                أفضل تطبيق توصيل طعام في اليمن. نوصل لك طعامك المفضل بسرعة وأمان.\n              </p>\n            </div>\n            \n            <div>\n              <h4 className=\"font-semibold mb-4\">روابط سريعة</h4>\n              <ul className=\"space-y-2 text-gray-400\">\n                <li><a href=\"#\" className=\"hover:text-white transition-colors\">من نحن</a></li>\n                <li><a href=\"#\" className=\"hover:text-white transition-colors\">اتصل بنا</a></li>\n                <li><a href=\"#\" className=\"hover:text-white transition-colors\">الشروط والأحكام</a></li>\n                <li><a href=\"#\" className=\"hover:text-white transition-colors\">سياسة الخصوصية</a></li>\n              </ul>\n            </div>\n            \n            <div>\n              <h4 className=\"font-semibold mb-4\">تواصل معنا</h4>\n              <div className=\"space-y-2 text-gray-400\">\n                <p>📞 +967 1 234 567</p>\n                <p>📧 info@sareeone.com</p>\n                <p>📍 صنعاء، اليمن</p>\n              </div>\n            </div>\n          </div>\n          \n          <div className=\"border-t border-gray-800 mt-8 pt-8 text-center text-gray-400\">\n            <p>&copy; 2024 السريع ون. جميع الحقوق محفوظة.</p>\n          </div>\n        </div>\n      </footer>\n    </div>\n  );\n}","size_bytes":16597},"client/src/pages/Location.tsx":{"content":"import { useState } from 'react';\nimport { useLocation } from 'wouter';\nimport { ArrowRight, MapPin, Plus, Target, Home, Building } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Badge } from '@/components/ui/badge';\nimport { useToast } from '@/hooks/use-toast';\n\ninterface SavedAddress {\n  id: string;\n  type: 'home' | 'work' | 'other';\n  label: string;\n  address: string;\n  details: string;\n  isDefault: boolean;\n}\n\nexport default function Location() {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  \n  const [showAddForm, setShowAddForm] = useState(false);\n  const [newAddress, setNewAddress] = useState({\n    type: 'home' as 'home' | 'work' | 'other',\n    label: '',\n    address: '',\n    details: '',\n  });\n\n  const [savedAddresses, setSavedAddresses] = useState<SavedAddress[]>([\n    {\n      id: '1',\n      type: 'home',\n      label: 'المنزل',\n      address: 'صنعاء، شارع الزبيري',\n      details: 'بجانب مسجد النور، الطابق الثاني',\n      isDefault: true,\n    },\n    {\n      id: '2',\n      type: 'work',\n      label: 'العمل',\n      address: 'صنعاء، شارع السبعين',\n      details: 'مجمع الأعمال، مكتب رقم 205',\n      isDefault: false,\n    },\n  ]);\n\n  const handleAddAddress = () => {\n    if (!newAddress.label || !newAddress.address) {\n      toast({\n        title: \"معلومات ناقصة\",\n        description: \"يرجى ملء جميع الحقول المطلوبة\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    const address: SavedAddress = {\n      id: Date.now().toString(),\n      ...newAddress,\n      isDefault: savedAddresses.length === 0,\n    };\n\n    setSavedAddresses(prev => [...prev, address]);\n    setNewAddress({ type: 'home', label: '', address: '', details: '' });\n    setShowAddForm(false);\n    \n    toast({\n      title: \"تم إضافة العنوان\",\n      description: \"تم حفظ العنوان الجديد بنجاح\",\n    });\n  };\n\n  const handleSetDefault = (id: string) => {\n    setSavedAddresses(prev =>\n      prev.map(addr => ({ ...addr, isDefault: addr.id === id }))\n    );\n    toast({\n      title: \"تم تحديث العنوان الافتراضي\",\n      description: \"تم تعيين العنوان كافتراضي للتوصيل\",\n    });\n  };\n\n  const handleDeleteAddress = (id: string) => {\n    setSavedAddresses(prev => prev.filter(addr => addr.id !== id));\n    toast({\n      title: \"تم حذف العنوان\",\n      description: \"تم حذف العنوان من القائمة المحفوظة\",\n    });\n  };\n\n  const getAddressIcon = (type: string) => {\n    switch (type) {\n      case 'home': return Home;\n      case 'work': return Building;\n      default: return MapPin;\n    }\n  };\n\n  const getAddressColor = (type: string) => {\n    switch (type) {\n      case 'home': return 'text-green-500';\n      case 'work': return 'text-blue-500';\n      default: return 'text-purple-500';\n    }\n  };\n\n  return (\n    <div>\n      {/* Header */}\n      <header className=\"bg-card border-b border-border p-4\">\n        <div className=\"flex items-center gap-3\">\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={() => setLocation('/profile')}\n            data-testid=\"button-location-back\"\n          >\n            <ArrowRight className=\"h-5 w-5\" />\n          </Button>\n          <h2 className=\"text-xl font-bold text-foreground\">العناوين المحفوظة</h2>\n        </div>\n      </header>\n\n      <section className=\"p-4 space-y-6\">\n        {/* Current Location */}\n        <Card>\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center gap-3 mb-3\">\n              <Target className=\"h-6 w-6 text-primary\" />\n              <div>\n                <h3 className=\"font-medium text-foreground\">موقعك الحالي</h3>\n                <p className=\"text-sm text-muted-foreground\">تم تحديده تلقائياً</p>\n              </div>\n            </div>\n            <div className=\"bg-muted p-3 rounded-lg\">\n              <p className=\"text-foreground\" data-testid=\"current-location\">\n                صنعاء، شارع الستين، قرب دوار الأمم المتحدة\n              </p>\n            </div>\n            <Button \n              variant=\"outline\" \n              className=\"w-full mt-3\"\n              data-testid=\"button-use-current-location\"\n            >\n              استخدام الموقع الحالي\n            </Button>\n          </CardContent>\n        </Card>\n\n        {/* Add New Address */}\n        <Card>\n          <CardHeader>\n            <div className=\"flex items-center justify-between\">\n              <CardTitle className=\"text-lg\">إضافة عنوان جديد</CardTitle>\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                onClick={() => setShowAddForm(!showAddForm)}\n                data-testid=\"button-toggle-add-form\"\n              >\n                <Plus className=\"h-5 w-5\" />\n              </Button>\n            </div>\n          </CardHeader>\n          {showAddForm && (\n            <CardContent className=\"space-y-4\">\n              <div>\n                <Label className=\"text-foreground\">نوع العنوان</Label>\n                <div className=\"flex gap-2 mt-2\">\n                  {[\n                    { value: 'home', label: 'المنزل', icon: Home },\n                    { value: 'work', label: 'العمل', icon: Building },\n                    { value: 'other', label: 'أخرى', icon: MapPin },\n                  ].map((type) => {\n                    const Icon = type.icon;\n                    return (\n                      <Button\n                        key={type.value}\n                        variant={newAddress.type === type.value ? 'default' : 'outline'}\n                        className=\"flex-1 gap-2\"\n                        onClick={() => setNewAddress(prev => ({ ...prev, type: type.value as any }))}\n                        data-testid={`address-type-${type.value}`}\n                      >\n                        <Icon className=\"h-4 w-4\" />\n                        {type.label}\n                      </Button>\n                    );\n                  })}\n                </div>\n              </div>\n\n              <div>\n                <Label htmlFor=\"address-label\" className=\"text-foreground\">تسمية العنوان</Label>\n                <Input\n                  id=\"address-label\"\n                  value={newAddress.label}\n                  onChange={(e) => setNewAddress(prev => ({ ...prev, label: e.target.value }))}\n                  placeholder=\"مثال: المنزل، العمل، بيت الأهل\"\n                  data-testid=\"input-address-label\"\n                />\n              </div>\n\n              <div>\n                <Label htmlFor=\"address-street\" className=\"text-foreground\">العنوان الرئيسي *</Label>\n                <Input\n                  id=\"address-street\"\n                  value={newAddress.address}\n                  onChange={(e) => setNewAddress(prev => ({ ...prev, address: e.target.value }))}\n                  placeholder=\"الشارع والحي\"\n                  data-testid=\"input-address-street\"\n                />\n              </div>\n\n              <div>\n                <Label htmlFor=\"address-details\" className=\"text-foreground\">تفاصيل إضافية</Label>\n                <Input\n                  id=\"address-details\"\n                  value={newAddress.details}\n                  onChange={(e) => setNewAddress(prev => ({ ...prev, details: e.target.value }))}\n                  placeholder=\"رقم الطابق، معالم قريبة، ملاحظات للسائق\"\n                  data-testid=\"input-address-details\"\n                />\n              </div>\n\n              <div className=\"flex gap-2\">\n                <Button onClick={handleAddAddress} className=\"flex-1\" data-testid=\"button-save-address\">\n                  حفظ العنوان\n                </Button>\n                <Button \n                  variant=\"outline\" \n                  onClick={() => setShowAddForm(false)}\n                  data-testid=\"button-cancel-add\"\n                >\n                  إلغاء\n                </Button>\n              </div>\n            </CardContent>\n          )}\n        </Card>\n\n        {/* Saved Addresses */}\n        <div className=\"space-y-3\">\n          <h3 className=\"text-lg font-bold text-foreground\">العناوين المحفوظة</h3>\n          \n          {savedAddresses.map((address) => {\n            const Icon = getAddressIcon(address.type);\n            const iconColor = getAddressColor(address.type);\n            \n            return (\n              <Card key={address.id} className={`${address.isDefault ? 'border-primary' : ''}`}>\n                <CardContent className=\"p-4\">\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex items-start gap-3 flex-1\">\n                      <Icon className={`h-6 w-6 ${iconColor} mt-1`} />\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center gap-2 mb-1\">\n                          <h4 className=\"font-medium text-foreground\" data-testid={`address-label-${address.id}`}>\n                            {address.label}\n                          </h4>\n                          {address.isDefault && (\n                            <Badge variant=\"secondary\" className=\"text-xs\">افتراضي</Badge>\n                          )}\n                        </div>\n                        <p className=\"text-sm text-foreground mb-1\" data-testid={`address-street-${address.id}`}>\n                          {address.address}\n                        </p>\n                        {address.details && (\n                          <p className=\"text-sm text-muted-foreground\" data-testid={`address-details-${address.id}`}>\n                            {address.details}\n                          </p>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                  \n                  <div className=\"flex gap-2 mt-3\">\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      className=\"flex-1\"\n                      onClick={() => setLocation('/cart')}\n                      data-testid={`button-deliver-here-${address.id}`}\n                    >\n                      التوصيل هنا\n                    </Button>\n                    {!address.isDefault && (\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => handleSetDefault(address.id)}\n                        data-testid={`button-set-default-${address.id}`}\n                      >\n                        تعيين كافتراضي\n                      </Button>\n                    )}\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => handleDeleteAddress(address.id)}\n                      className=\"text-destructive hover:bg-destructive/10\"\n                      data-testid={`button-delete-address-${address.id}`}\n                    >\n                      حذف\n                    </Button>\n                  </div>\n                </CardContent>\n              </Card>\n            );\n          })}\n        </div>\n      </section>\n    </div>\n  );\n}","size_bytes":11766},"client/src/pages/LoginPage.tsx":{"content":"import React, { useState } from 'react';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '../components/ui/card';\nimport { Button } from '../components/ui/button';\nimport { Input } from '../components/ui/input';\nimport { Label } from '../components/ui/label';\nimport { Alert, AlertDescription } from '../components/ui/alert';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '../components/ui/tabs';\nimport { useAuth } from '../context/AuthContext';\nimport { Loader2, Shield, Truck } from 'lucide-react';\n\ninterface LoginPageProps {\n  onSuccess: () => void;\n}\n\nexport const LoginPage: React.FC<LoginPageProps> = ({ onSuccess }) => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [activeTab, setActiveTab] = useState('admin');\n  const { login } = useAuth();\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true);\n    setError('');\n\n    try {\n      const result = await login(email, password);\n      if (result.success) {\n        onSuccess();\n      } else {\n        setError(result.message);\n      }\n    } catch (error) {\n      setError('خطأ في تسجيل الدخول');\n    }\n\n    setLoading(false);\n  };\n\n  const fillAdminCredentials = () => {\n    setEmail('admin@alsarie-one.com');\n    setPassword('admin123456');\n  };\n\n  const fillDriverCredentials = () => {\n    setEmail('+967771234567');\n    setPassword('$2b$10$92IXUNpkjO0rOQ5byMi.Ye4oKoEa3Ro9llC/.og/at2.uheWG/igi');\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4\" dir=\"rtl\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader className=\"text-center\">\n          <CardTitle className=\"text-2xl font-bold text-gray-900\">\n            تسجيل الدخول للنظام\n          </CardTitle>\n          <CardDescription>\n            اختر نوع المستخدم وأدخل بيانات الدخول\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\n            <TabsList className=\"grid w-full grid-cols-2\">\n              <TabsTrigger value=\"admin\" className=\"flex items-center gap-2\">\n                <Shield className=\"w-4 h-4\" />\n                مدير النظام\n              </TabsTrigger>\n              <TabsTrigger value=\"driver\" className=\"flex items-center gap-2\">\n                <Truck className=\"w-4 h-4\" />\n                سائق\n              </TabsTrigger>\n            </TabsList>\n\n            <form onSubmit={handleSubmit} className=\"space-y-4 mt-6\">\n              <TabsContent value=\"admin\" className=\"space-y-4 mt-0\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"email\">البريد الإلكتروني</Label>\n                  <Input\n                    id=\"email\"\n                    type=\"email\"\n                    value={email}\n                    onChange={(e) => setEmail(e.target.value)}\n                    placeholder=\"أدخل البريد الإلكتروني\"\n                    required\n                    className=\"text-right\"\n                    dir=\"ltr\"\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"password\">كلمة المرور</Label>\n                  <Input\n                    id=\"password\"\n                    type=\"password\"\n                    value={password}\n                    onChange={(e) => setPassword(e.target.value)}\n                    placeholder=\"أدخل كلمة المرور\"\n                    required\n                    className=\"text-right\"\n                    dir=\"ltr\"\n                  />\n                </div>\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  onClick={fillAdminCredentials}\n                  className=\"w-full\"\n                >\n                  استخدام بيانات المدير الافتراضية\n                </Button>\n              </TabsContent>\n\n              <TabsContent value=\"driver\" className=\"space-y-4 mt-0\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"phone\">رقم الهاتف</Label>\n                  <Input\n                    id=\"phone\"\n                    type=\"tel\"\n                    value={email}\n                    onChange={(e) => setEmail(e.target.value)}\n                    placeholder=\"أدخل رقم الهاتف\"\n                    required\n                    className=\"text-right\"\n                    dir=\"ltr\"\n                  />\n                </div>\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"password\">كلمة المرور</Label>\n                  <Input\n                    id=\"password\"\n                    type=\"password\"\n                    value={password}\n                    onChange={(e) => setPassword(e.target.value)}\n                    placeholder=\"أدخل كلمة المرور\"\n                    required\n                    className=\"text-right\"\n                    dir=\"ltr\"\n                  />\n                </div>\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  onClick={fillDriverCredentials}\n                  className=\"w-full\"\n                >\n                  استخدام بيانات السائق التجريبية\n                </Button>\n              </TabsContent>\n\n              {error && (\n                <Alert variant=\"destructive\">\n                  <AlertDescription>{error}</AlertDescription>\n                </Alert>\n              )}\n\n              <Button type=\"submit\" className=\"w-full\" disabled={loading}>\n                {loading ? (\n                  <>\n                    <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                    جاري تسجيل الدخول...\n                  </>\n                ) : (\n                  'تسجيل الدخول'\n                )}\n              </Button>\n            </form>\n          </Tabs>\n        </CardContent>\n      </Card>\n    </div>\n  );\n};","size_bytes":6314},"client/src/pages/OrderTracking.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { useParams, useLocation } from 'wouter';\nimport { ArrowRight, MapPin, Clock, Phone, CheckCircle, Truck, Package, User } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\n\ninterface OrderStatus {\n  id: string;\n  status: 'pending' | 'confirmed' | 'preparing' | 'on_way' | 'delivered' | 'cancelled';\n  timestamp: Date;\n  description: string;\n}\n\ninterface OrderDetails {\n  id: string;\n  customerName: string;\n  customerPhone: string;\n  deliveryAddress: string;\n  items: any[];\n  total: number;\n  status: string;\n  estimatedTime: string;\n  driverName?: string;\n  driverPhone?: string;\n  createdAt: Date;\n}\n\nexport default function OrderTracking() {\n  const { orderId } = useParams<{ orderId: string }>();\n  const [, setLocation] = useLocation();\n  \n  // Mock order data - in real app this would come from API\n  const [order] = useState<OrderDetails>({\n    id: orderId || '12345',\n    customerName: 'محمد أحمد',\n    customerPhone: '+967771234567',\n    deliveryAddress: 'صنعاء، شارع الزبيري، بجانب مسجد النور',\n    items: [\n      { name: 'عربكة بالقشطة والعسل', quantity: 2, price: 55 },\n      { name: 'مياه معدنية', quantity: 1, price: 3 },\n    ],\n    total: 113,\n    status: 'on_way',\n    estimatedTime: '25 دقيقة',\n    driverName: 'أحمد محمد',\n    driverPhone: '+967771234567',\n    createdAt: new Date(),\n  });\n\n  const [orderHistory] = useState<OrderStatus[]>([\n    { id: '1', status: 'pending', timestamp: new Date(Date.now() - 30 * 60000), description: 'تم استلام الطلب' },\n    { id: '2', status: 'confirmed', timestamp: new Date(Date.now() - 25 * 60000), description: 'تم تأكيد الطلب من المطعم' },\n    { id: '3', status: 'preparing', timestamp: new Date(Date.now() - 15 * 60000), description: 'جاري تحضير الطلب' },\n    { id: '4', status: 'on_way', timestamp: new Date(Date.now() - 5 * 60000), description: 'الطلب في الطريق إليك' },\n  ]);\n\n  const getStatusProgress = (status: string) => {\n    const statusMap = {\n      pending: 25,\n      confirmed: 40,\n      preparing: 60,\n      on_way: 80,\n      delivered: 100,\n      cancelled: 0,\n    };\n    return statusMap[status as keyof typeof statusMap] || 0;\n  };\n\n  const getStatusColor = (status: string) => {\n    const colorMap = {\n      pending: 'bg-yellow-500',\n      confirmed: 'bg-blue-500',\n      preparing: 'bg-orange-500',\n      on_way: 'bg-purple-500',\n      delivered: 'bg-green-500',\n      cancelled: 'bg-red-500',\n    };\n    return colorMap[status as keyof typeof colorMap] || 'bg-gray-500';\n  };\n\n  const getStatusText = (status: string) => {\n    const textMap = {\n      pending: 'في الانتظار',\n      confirmed: 'مؤكد',\n      preparing: 'قيد التحضير',\n      on_way: 'في الطريق',\n      delivered: 'تم التوصيل',\n      cancelled: 'ملغي',\n    };\n    return textMap[status as keyof typeof textMap] || status;\n  };\n\n  return (\n    <div>\n      {/* Header */}\n      <header className=\"bg-card border-b border-border p-4\">\n        <div className=\"flex items-center gap-3\">\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={() => setLocation('/profile')}\n            data-testid=\"button-tracking-back\"\n          >\n            <ArrowRight className=\"h-5 w-5\" />\n          </Button>\n          <h2 className=\"text-xl font-bold text-foreground\">تتبع الطلب</h2>\n        </div>\n      </header>\n\n      <section className=\"p-4 space-y-6\">\n        {/* Order Status Card */}\n        <Card>\n          <CardHeader>\n            <div className=\"flex items-center justify-between\">\n              <CardTitle className=\"text-lg\">طلب رقم #{order.id}</CardTitle>\n              <Badge \n                className={`${getStatusColor(order.status)} text-white`}\n                data-testid=\"order-status-badge\"\n              >\n                {getStatusText(order.status)}\n              </Badge>\n            </div>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"flex items-center gap-3\">\n              <Clock className=\"h-5 w-5 text-muted-foreground\" />\n              <span className=\"text-foreground\">الوقت المتوقع للوصول: </span>\n              <span className=\"font-bold text-primary\" data-testid=\"estimated-time\">\n                {order.estimatedTime}\n              </span>\n            </div>\n            \n            <div className=\"space-y-2\">\n              <div className=\"flex justify-between text-sm\">\n                <span className=\"text-muted-foreground\">حالة الطلب</span>\n                <span className=\"text-foreground\">{getStatusProgress(order.status)}%</span>\n              </div>\n              <Progress \n                value={getStatusProgress(order.status)} \n                className=\"h-2\"\n                data-testid=\"order-progress\"\n              />\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Driver Info */}\n        {order.status === 'on_way' && order.driverName && (\n          <Card>\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center gap-3 mb-3\">\n                <div className=\"w-12 h-12 bg-primary rounded-full flex items-center justify-center\">\n                  <User className=\"h-6 w-6 text-primary-foreground\" />\n                </div>\n                <div className=\"flex-1\">\n                  <h4 className=\"font-medium text-foreground\" data-testid=\"driver-name\">\n                    {order.driverName}\n                  </h4>\n                  <p className=\"text-sm text-muted-foreground\">سائق التوصيل</p>\n                </div>\n                <Button \n                  variant=\"outline\" \n                  size=\"sm\"\n                  data-testid=\"button-call-driver\"\n                >\n                  <Phone className=\"h-4 w-4 ml-2\" />\n                  اتصال\n                </Button>\n              </div>\n              <div className=\"bg-muted p-3 rounded-lg\">\n                <div className=\"flex items-center gap-2\">\n                  <Truck className=\"h-4 w-4 text-primary\" />\n                  <span className=\"text-sm text-foreground\">السائق في الطريق إليك</span>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        )}\n\n        {/* Delivery Address */}\n        <Card>\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-start gap-3\">\n              <MapPin className=\"h-5 w-5 text-primary mt-1\" />\n              <div>\n                <h4 className=\"font-medium text-foreground mb-1\">عنوان التوصيل</h4>\n                <p className=\"text-sm text-foreground\" data-testid=\"delivery-address\">\n                  {order.deliveryAddress}\n                </p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Order Items */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"text-lg\">تفاصيل الطلب</CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-3\">\n            {order.items.map((item, index) => (\n              <div key={index} className=\"flex justify-between items-center py-2 border-b border-border last:border-0\">\n                <div className=\"flex-1\">\n                  <span className=\"text-foreground font-medium\" data-testid={`item-name-${index}`}>\n                    {item.name}\n                  </span>\n                  <span className=\"text-muted-foreground text-sm mr-2\">\n                    × {item.quantity}\n                  </span>\n                </div>\n                <span className=\"font-bold text-primary\" data-testid={`item-price-${index}`}>\n                  {item.price * item.quantity} ريال\n                </span>\n              </div>\n            ))}\n            <div className=\"border-t border-border pt-3 mt-3\">\n              <div className=\"flex justify-between items-center font-bold\">\n                <span className=\"text-foreground\">الإجمالي</span>\n                <span className=\"text-primary\" data-testid=\"order-total\">\n                  {order.total} ريال\n                </span>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Order Timeline */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"text-lg\">تاريخ الطلب</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-4\">\n              {orderHistory.map((status, index) => (\n                <div key={status.id} className=\"flex items-start gap-3\">\n                  <div className={`w-4 h-4 rounded-full ${getStatusColor(status.status)} mt-1 flex-shrink-0`} />\n                  <div className=\"flex-1 min-w-0\">\n                    <p className=\"text-foreground font-medium\" data-testid={`timeline-description-${index}`}>\n                      {status.description}\n                    </p>\n                    <p className=\"text-sm text-muted-foreground\" data-testid={`timeline-time-${index}`}>\n                      {status.timestamp.toLocaleTimeString('ar-YE', { \n                        hour: '2-digit', \n                        minute: '2-digit' \n                      })}\n                    </p>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Action Buttons */}\n        <div className=\"space-y-3\">\n          <Button \n            variant=\"outline\" \n            className=\"w-full\"\n            data-testid=\"button-contact-support\"\n          >\n            تواصل مع الدعم\n          </Button>\n          \n          {order.status !== 'delivered' && order.status !== 'cancelled' && (\n            <Button \n              variant=\"destructive\" \n              className=\"w-full\"\n              data-testid=\"button-cancel-order\"\n            >\n              إلغاء الطلب\n            </Button>\n          )}\n        </div>\n      </section>\n    </div>\n  );\n}","size_bytes":10327},"client/src/pages/OrderTrackingPage.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { useParams, useLocation } from 'wouter';\nimport { ArrowRight, MapPin, Clock, Phone, CheckCircle, Truck, Package, User } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\n\ninterface OrderStatus {\n  id: string;\n  status: 'pending' | 'confirmed' | 'preparing' | 'on_way' | 'delivered' | 'cancelled';\n  timestamp: Date;\n  description: string;\n}\n\ninterface OrderDetails {\n  id: string;\n  customerName: string;\n  customerPhone: string;\n  deliveryAddress: string;\n  items: any[];\n  total: number;\n  status: string;\n  estimatedTime: string;\n  driverName?: string;\n  driverPhone?: string;\n  createdAt: Date;\n}\n\nexport default function OrderTrackingPage() {\n  const { orderId } = useParams<{ orderId: string }>();\n  const [, setLocation] = useLocation();\n  \n  // Mock order data - in real app this would come from API\n  const [order] = useState<OrderDetails>({\n    id: orderId || '12345',\n    customerName: 'محمد أحمد',\n    customerPhone: '+967771234567',\n    deliveryAddress: 'صنعاء، شارع الزبيري، بجانب مسجد النور',\n    items: [\n      { name: 'عربكة بالقشطة والعسل', quantity: 2, price: 55 },\n      { name: 'مياه معدنية', quantity: 1, price: 3 },\n    ],\n    total: 113,\n    status: 'on_way',\n    estimatedTime: '25 دقيقة',\n    driverName: 'أحمد محمد',\n    driverPhone: '+967771234567',\n    createdAt: new Date(),\n  });\n\n  const [orderHistory] = useState<OrderStatus[]>([\n    { id: '1', status: 'pending', timestamp: new Date(Date.now() - 30 * 60000), description: 'تم استلام الطلب' },\n    { id: '2', status: 'confirmed', timestamp: new Date(Date.now() - 25 * 60000), description: 'تم تأكيد الطلب من المطعم' },\n    { id: '3', status: 'preparing', timestamp: new Date(Date.now() - 15 * 60000), description: 'جاري تحضير الطلب' },\n    { id: '4', status: 'on_way', timestamp: new Date(Date.now() - 5 * 60000), description: 'الطلب في الطريق إليك' },\n  ]);\n\n  const getStatusProgress = (status: string) => {\n    const statusMap = {\n      pending: 25,\n      confirmed: 40,\n      preparing: 60,\n      on_way: 80,\n      delivered: 100,\n      cancelled: 0,\n    };\n    return statusMap[status as keyof typeof statusMap] || 0;\n  };\n\n  const getStatusColor = (status: string) => {\n    const colorMap = {\n      pending: 'bg-yellow-500',\n      confirmed: 'bg-blue-500',\n      preparing: 'bg-orange-500',\n      on_way: 'bg-purple-500',\n      delivered: 'bg-green-500',\n      cancelled: 'bg-red-500',\n    };\n    return colorMap[status as keyof typeof colorMap] || 'bg-gray-500';\n  };\n\n  const getStatusText = (status: string) => {\n    const textMap = {\n      pending: 'في الانتظار',\n      confirmed: 'مؤكد',\n      preparing: 'قيد التحضير',\n      on_way: 'في الطريق',\n      delivered: 'تم التوصيل',\n      cancelled: 'ملغي',\n    };\n    return textMap[status as keyof typeof textMap] || status;\n  };\n\n  return (\n    <div>\n      {/* Header */}\n      <header className=\"bg-card border-b border-border p-4\">\n        <div className=\"flex items-center gap-3\">\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={() => setLocation('/profile')}\n            data-testid=\"button-tracking-back\"\n          >\n            <ArrowRight className=\"h-5 w-5\" />\n          </Button>\n          <h2 className=\"text-xl font-bold text-foreground\">تتبع الطلب</h2>\n        </div>\n      </header>\n\n      <section className=\"p-4 space-y-6\">\n        {/* Order Status Card */}\n        <Card>\n          <CardHeader>\n            <div className=\"flex items-center justify-between\">\n              <CardTitle className=\"text-lg\">طلب رقم #{order.id}</CardTitle>\n              <Badge \n                className={`${getStatusColor(order.status)} text-white`}\n                data-testid=\"order-status-badge\"\n              >\n                {getStatusText(order.status)}\n              </Badge>\n            </div>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <div className=\"flex items-center gap-3\">\n              <Clock className=\"h-5 w-5 text-muted-foreground\" />\n              <span className=\"text-foreground\">الوقت المتوقع للوصول: </span>\n              <span className=\"font-bold text-primary\" data-testid=\"estimated-time\">\n                {order.estimatedTime}\n              </span>\n            </div>\n            \n            <div className=\"space-y-2\">\n              <div className=\"flex justify-between text-sm\">\n                <span className=\"text-muted-foreground\">حالة الطلب</span>\n                <span className=\"text-foreground\">{getStatusProgress(order.status)}%</span>\n              </div>\n              <Progress \n                value={getStatusProgress(order.status)} \n                className=\"h-2\"\n                data-testid=\"order-progress\"\n              />\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Driver Info */}\n        {order.status === 'on_way' && order.driverName && (\n          <Card>\n            <CardContent className=\"p-4\">\n              <div className=\"flex items-center gap-3 mb-3\">\n                <div className=\"w-12 h-12 bg-primary rounded-full flex items-center justify-center\">\n                  <User className=\"h-6 w-6 text-primary-foreground\" />\n                </div>\n                <div className=\"flex-1\">\n                  <h4 className=\"font-medium text-foreground\" data-testid=\"driver-name\">\n                    {order.driverName}\n                  </h4>\n                  <p className=\"text-sm text-muted-foreground\">سائق التوصيل</p>\n                </div>\n                <Button \n                  variant=\"outline\" \n                  size=\"sm\"\n                  data-testid=\"button-call-driver\"\n                >\n                  <Phone className=\"h-4 w-4 ml-2\" />\n                  اتصال\n                </Button>\n              </div>\n              <div className=\"bg-muted p-3 rounded-lg\">\n                <div className=\"flex items-center gap-2\">\n                  <Truck className=\"h-4 w-4 text-primary\" />\n                  <span className=\"text-sm text-foreground\">السائق في الطريق إليك</span>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        )}\n\n        {/* Delivery Address */}\n        <Card>\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-start gap-3\">\n              <MapPin className=\"h-5 w-5 text-primary mt-1\" />\n              <div>\n                <h4 className=\"font-medium text-foreground mb-1\">عنوان التوصيل</h4>\n                <p className=\"text-sm text-foreground\" data-testid=\"delivery-address\">\n                  {order.deliveryAddress}\n                </p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Order Items */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"text-lg\">تفاصيل الطلب</CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-3\">\n            {order.items.map((item, index) => (\n              <div key={index} className=\"flex justify-between items-center py-2 border-b border-border last:border-0\">\n                <div className=\"flex-1\">\n                  <span className=\"text-foreground font-medium\" data-testid={`item-name-${index}`}>\n                    {item.name}\n                  </span>\n                  <span className=\"text-muted-foreground text-sm mr-2\">\n                    × {item.quantity}\n                  </span>\n                </div>\n                <span className=\"font-bold text-primary\" data-testid={`item-price-${index}`}>\n                  {item.price * item.quantity} ريال\n                </span>\n              </div>\n            ))}\n            <div className=\"border-t border-border pt-3 mt-3\">\n              <div className=\"flex justify-between items-center font-bold\">\n                <span className=\"text-foreground\">الإجمالي</span>\n                <span className=\"text-primary\" data-testid=\"order-total\">\n                  {order.total} ريال\n                </span>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Order Timeline */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"text-lg\">تاريخ الطلب</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-4\">\n              {orderHistory.map((status, index) => (\n                <div key={status.id} className=\"flex items-start gap-3\">\n                  <div className={`w-4 h-4 rounded-full ${getStatusColor(status.status)} mt-1 flex-shrink-0`} />\n                  <div className=\"flex-1 min-w-0\">\n                    <p className=\"text-foreground font-medium\" data-testid={`timeline-description-${index}`}>\n                      {status.description}\n                    </p>\n                    <p className=\"text-sm text-muted-foreground\" data-testid={`timeline-time-${index}`}>\n                      {status.timestamp.toLocaleTimeString('ar-YE', { \n                        hour: '2-digit', \n                        minute: '2-digit' \n                      })}\n                    </p>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Action Buttons */}\n        <div className=\"space-y-3\">\n          <Button \n            variant=\"outline\" \n            className=\"w-full\"\n            data-testid=\"button-contact-support\"\n          >\n            تواصل مع الدعم\n          </Button>\n          \n          {order.status !== 'delivered' && order.status !== 'cancelled' && (\n            <Button \n              variant=\"destructive\" \n              className=\"w-full\"\n              data-testid=\"button-cancel-order\"\n            >\n              إلغاء الطلب\n            </Button>\n          )}\n        </div>\n      </section>\n    </div>\n  );\n}","size_bytes":10331},"client/src/pages/Privacy.tsx":{"content":"import { useLocation } from 'wouter';\nimport { ArrowRight, Shield, Eye, Lock, Phone, Mail } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\n\nexport default function Privacy() {\n  const [, setLocation] = useLocation();\n\n  const privacySections = [\n    {\n      icon: Shield,\n      title: 'جمع المعلومات',\n      content: [\n        'نقوم بجمع المعلومات التي تقدمها لنا عند التسجيل في التطبيق',\n        'معلومات الطلبات والمدفوعات لتحسين خدماتنا',\n        'معلومات الموقع لتحديد المطاعم القريبة منك',\n        'معلومات الاستخدام لتطوير التطبيق وتحسين الأداء',\n      ],\n    },\n    {\n      icon: Eye,\n      title: 'استخدام المعلومات',\n      content: [\n        'معالجة وتنفيذ طلباتك بطريقة صحيحة وسريعة',\n        'التواصل معك بخصوص حالة الطلبات والتحديثات',\n        'تحسين خدماتنا وتطوير مميزات جديدة',\n        'إرسال العروض والتحديثات التسويقية (يمكن إلغاء الاشتراك)',\n      ],\n    },\n    {\n      icon: Lock,\n      title: 'حماية المعلومات',\n      content: [\n        'نستخدم تقنيات التشفير المتقدمة لحماية بياناتك',\n        'جميع المدفوعات تتم عبر منصات آمنة ومعتمدة',\n        'الوصول للمعلومات محدود للموظفين المخولين فقط',\n        'نقوم بمراجعة أنظمة الأمان بانتظام لضمان الحماية',\n      ],\n    },\n    {\n      icon: Phone,\n      title: 'مشاركة المعلومات',\n      content: [\n        'لا نبيع أو نؤجر معلوماتك الشخصية لأطراف ثالثة',\n        'نشارك المعلومات مع المطاعم فقط لتنفيذ الطلبات',\n        'قد نشارك معلومات محدودة مع السائقين للتوصيل',\n        'نلتزم بالقوانين المحلية في حالة طلب السلطات المختصة',\n      ],\n    },\n  ];\n\n  const contactInfo = [\n    { icon: Mail, label: 'البريد الإلكتروني', value: 'privacy@alsarie-one.com' },\n    { icon: Phone, label: 'رقم الهاتف', value: '+967-1-234567' },\n  ];\n\n  return (\n    <div>\n      {/* Header */}\n      <header className=\"bg-card border-b border-border p-4\">\n        <div className=\"flex items-center gap-3\">\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={() => setLocation('/profile')}\n            data-testid=\"button-privacy-back\"\n          >\n            <ArrowRight className=\"h-5 w-5\" />\n          </Button>\n          <h2 className=\"text-xl font-bold text-foreground\">سياسة الخصوصية</h2>\n        </div>\n      </header>\n\n      <section className=\"p-4 space-y-6\">\n        {/* Introduction */}\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"text-center mb-6\">\n              <Shield className=\"h-16 w-16 text-primary mx-auto mb-4\" />\n              <h3 className=\"text-xl font-bold text-foreground mb-2\">\n                نحن نحترم خصوصيتك\n              </h3>\n              <p className=\"text-muted-foreground\">\n                تطبيق السريع ون ملتزم بحماية خصوصيتك وأمان معلوماتك الشخصية. \n                هذه السياسة توضح كيفية جمع واستخدام وحماية بياناتك.\n              </p>\n            </div>\n            \n            <div className=\"bg-muted p-4 rounded-lg\">\n              <p className=\"text-sm text-foreground\">\n                <strong>آخر تحديث:</strong> 1 سبتمبر 2025\n              </p>\n              <p className=\"text-sm text-muted-foreground mt-1\">\n                قد تتغير هذه السياسة من وقت لآخر، وسنقوم بإشعارك بأي تغييرات مهمة.\n              </p>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Privacy Sections */}\n        {privacySections.map((section, index) => {\n          const Icon = section.icon;\n          return (\n            <Card key={index}>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-3 text-lg\">\n                  <Icon className=\"h-6 w-6 text-primary\" />\n                  {section.title}\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <ul className=\"space-y-3\">\n                  {section.content.map((item, itemIndex) => (\n                    <li \n                      key={itemIndex} \n                      className=\"flex items-start gap-3 text-foreground\"\n                      data-testid={`privacy-item-${index}-${itemIndex}`}\n                    >\n                      <div className=\"w-2 h-2 bg-primary rounded-full mt-2 flex-shrink-0\" />\n                      <span className=\"text-sm leading-relaxed\">{item}</span>\n                    </li>\n                  ))}\n                </ul>\n              </CardContent>\n            </Card>\n          );\n        })}\n\n        {/* User Rights */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"text-lg\">حقوقك</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-4\">\n              <div className=\"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border border-green-200 dark:border-green-800\">\n                <h4 className=\"font-medium text-green-800 dark:text-green-200 mb-2\">\n                  يحق لك:\n                </h4>\n                <ul className=\"space-y-2 text-sm text-green-700 dark:text-green-300\">\n                  <li>• الوصول إلى معلوماتك الشخصية وتحديثها</li>\n                  <li>• طلب حذف حسابك ومعلوماتك</li>\n                  <li>• إلغاء الاشتراك في الإشعارات التسويقية</li>\n                  <li>• تقديم شكوى حول استخدام معلوماتك</li>\n                </ul>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Contact Information */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"text-lg\">تواصل معنا</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-muted-foreground mb-4\">\n              إذا كان لديك أي أسئلة حول سياسة الخصوصية أو كيفية معالجة بياناتك، \n              يمكنك التواصل معنا عبر:\n            </p>\n            \n            <div className=\"space-y-3\">\n              {contactInfo.map((contact, index) => {\n                const Icon = contact.icon;\n                return (\n                  <div \n                    key={index}\n                    className=\"flex items-center gap-3 p-3 bg-muted rounded-lg\"\n                  >\n                    <Icon className=\"h-5 w-5 text-primary\" />\n                    <div>\n                      <p className=\"text-sm text-muted-foreground\">{contact.label}</p>\n                      <p className=\"text-foreground font-medium\" data-testid={`contact-${index}`}>\n                        {contact.value}\n                      </p>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Acceptance */}\n        <Card>\n          <CardContent className=\"p-6 text-center\">\n            <p className=\"text-sm text-muted-foreground mb-4\">\n              باستخدام تطبيق السريع ون، فإنك توافق على سياسة الخصوصية هذه \n              وعلى جمع واستخدام معلوماتك وفقاً للممارسات الموضحة أعلاه.\n            </p>\n            <Button \n              onClick={() => setLocation('/profile')}\n              data-testid=\"button-accept-privacy\"\n            >\n              فهمت وأوافق\n            </Button>\n          </CardContent>\n        </Card>\n      </section>\n    </div>\n  );\n}","size_bytes":8358},"client/src/pages/Profile.tsx":{"content":"import { useState } from 'react';\nimport { useLocation } from 'wouter';\nimport { ArrowRight, User, Phone, Mail, MapPin, Settings, Shield, Star, Clock, Receipt } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Badge } from '@/components/ui/badge';\nimport { useToast } from '@/hooks/use-toast';\n\nexport default function Profile() {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  \n  const [profile, setProfile] = useState({\n    name: 'محمد أحمد',\n    phone: '+967771234567',\n    email: 'mohammed@example.com',\n    address: 'صنعاء، شارع الزبيري، بجانب مسجد النور',\n  });\n\n  const [isEditing, setIsEditing] = useState(false);\n\n  const handleSave = () => {\n    setIsEditing(false);\n    toast({\n      title: \"تم حفظ البيانات\",\n      description: \"تم تحديث معلومات الملف الشخصي بنجاح\",\n    });\n  };\n\n  const profileStats = [\n    { icon: Receipt, label: 'إجمالي الطلبات', value: '42', color: 'text-primary' },\n    { icon: Star, label: 'التقييم', value: '4.8', color: 'text-yellow-500' },\n    { icon: Clock, label: 'عضو منذ', value: '6 أشهر', color: 'text-green-500' },\n  ];\n\n  const menuItems = [\n    { icon: Receipt, label: 'طلباتي', path: '/orders', description: 'عرض تاريخ الطلبات', testId: 'profile-orders' },\n    { icon: MapPin, label: 'العناوين المحفوظة', path: '/addresses', description: 'إدارة عناوين التوصيل', testId: 'profile-addresses' },\n    { icon: Settings, label: 'الإعدادات', path: '/settings', description: 'إعدادات التطبيق والحساب', testId: 'profile-settings' },\n    { icon: Shield, label: 'سياسة الخصوصية', path: '/privacy', description: 'سياسة الخصوصية وشروط الاستخدام', testId: 'profile-privacy' },\n  ];\n\n  return (\n    <div>\n      {/* Header */}\n      <header className=\"bg-card border-b border-border p-4\">\n        <div className=\"flex items-center gap-3\">\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={() => setLocation('/')}\n            data-testid=\"button-profile-back\"\n          >\n            <ArrowRight className=\"h-5 w-5\" />\n          </Button>\n          <h2 className=\"text-xl font-bold text-foreground\">الملف الشخصي</h2>\n        </div>\n      </header>\n\n      <section className=\"p-4 space-y-6\">\n        {/* Profile Info Card */}\n        <Card>\n          <CardHeader className=\"text-center\">\n            <div className=\"w-20 h-20 bg-primary rounded-full flex items-center justify-center mx-auto mb-4\">\n              <User className=\"h-10 w-10 text-primary-foreground\" />\n            </div>\n            <CardTitle className=\"text-xl text-foreground\">{profile.name}</CardTitle>\n            <Badge variant=\"secondary\" className=\"mx-auto\">عضو مميز</Badge>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            {isEditing ? (\n              <div className=\"space-y-4\">\n                <div>\n                  <Label htmlFor=\"name\" className=\"text-foreground\">الاسم</Label>\n                  <Input\n                    id=\"name\"\n                    value={profile.name}\n                    onChange={(e) => setProfile(prev => ({ ...prev, name: e.target.value }))}\n                    data-testid=\"input-profile-name\"\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"phone\" className=\"text-foreground\">رقم الهاتف</Label>\n                  <Input\n                    id=\"phone\"\n                    value={profile.phone}\n                    onChange={(e) => setProfile(prev => ({ ...prev, phone: e.target.value }))}\n                    data-testid=\"input-profile-phone\"\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"email\" className=\"text-foreground\">البريد الإلكتروني</Label>\n                  <Input\n                    id=\"email\"\n                    type=\"email\"\n                    value={profile.email}\n                    onChange={(e) => setProfile(prev => ({ ...prev, email: e.target.value }))}\n                    data-testid=\"input-profile-email\"\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"address\" className=\"text-foreground\">العنوان</Label>\n                  <Input\n                    id=\"address\"\n                    value={profile.address}\n                    onChange={(e) => setProfile(prev => ({ ...prev, address: e.target.value }))}\n                    data-testid=\"input-profile-address\"\n                  />\n                </div>\n                <div className=\"flex gap-2\">\n                  <Button onClick={handleSave} className=\"flex-1\" data-testid=\"button-save-profile\">\n                    حفظ التغييرات\n                  </Button>\n                  <Button \n                    variant=\"outline\" \n                    onClick={() => setIsEditing(false)}\n                    data-testid=\"button-cancel-edit\"\n                  >\n                    إلغاء\n                  </Button>\n                </div>\n              </div>\n            ) : (\n              <div className=\"space-y-3\">\n                <div className=\"flex items-center gap-3 p-3 bg-muted rounded-lg\">\n                  <Phone className=\"h-5 w-5 text-muted-foreground\" />\n                  <span className=\"text-foreground\" data-testid=\"profile-phone\">{profile.phone}</span>\n                </div>\n                <div className=\"flex items-center gap-3 p-3 bg-muted rounded-lg\">\n                  <Mail className=\"h-5 w-5 text-muted-foreground\" />\n                  <span className=\"text-foreground\" data-testid=\"profile-email\">{profile.email}</span>\n                </div>\n                <div className=\"flex items-center gap-3 p-3 bg-muted rounded-lg\">\n                  <MapPin className=\"h-5 w-5 text-muted-foreground\" />\n                  <span className=\"text-foreground\" data-testid=\"profile-address\">{profile.address}</span>\n                </div>\n                <Button \n                  onClick={() => setIsEditing(true)} \n                  className=\"w-full\"\n                  data-testid=\"button-edit-profile\"\n                >\n                  تعديل المعلومات\n                </Button>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Stats */}\n        <div className=\"grid grid-cols-3 gap-3\">\n          {profileStats.map((stat, index) => {\n            const Icon = stat.icon;\n            return (\n              <Card key={index} className=\"text-center\">\n                <CardContent className=\"p-4\">\n                  <Icon className={`h-6 w-6 ${stat.color} mx-auto mb-2`} />\n                  <div className=\"text-lg font-bold text-foreground\" data-testid={`stat-${index}`}>\n                    {stat.value}\n                  </div>\n                  <div className=\"text-xs text-muted-foreground\">{stat.label}</div>\n                </CardContent>\n              </Card>\n            );\n          })}\n        </div>\n\n        {/* Menu Items */}\n        <div className=\"space-y-3\">\n          {menuItems.map((item) => {\n            const Icon = item.icon;\n            return (\n              <Button\n                key={item.path}\n                variant=\"ghost\"\n                className=\"w-full h-auto p-4 justify-between hover:bg-accent\"\n                onClick={() => setLocation(item.path)}\n                data-testid={item.testId}\n              >\n                <div className=\"flex items-center gap-3\">\n                  <Icon className=\"h-6 w-6 text-primary\" />\n                  <div className=\"text-right\">\n                    <div className=\"font-medium text-foreground\">{item.label}</div>\n                    <div className=\"text-sm text-muted-foreground\">{item.description}</div>\n                  </div>\n                </div>\n                <ArrowRight className=\"h-5 w-5 text-muted-foreground rotate-180\" />\n              </Button>\n            );\n          })}\n        </div>\n      </section>\n    </div>\n  );\n}","size_bytes":8383},"client/src/pages/ProfilePage.tsx":{"content":"import { useState } from 'react';\nimport { useLocation } from 'wouter';\nimport { ArrowRight, User, Phone, Mail, MapPin, Settings, Shield, Star, Clock, Receipt } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Badge } from '@/components/ui/badge';\nimport { useToast } from '@/hooks/use-toast';\n\nexport default function ProfilePage() {\n  const [, setLocation] = useLocation();\n  const { toast } = useToast();\n  \n  const [profile, setProfile] = useState({\n    name: 'محمد أحمد',\n    phone: '+967771234567',\n    email: 'mohammed@example.com',\n    address: 'صنعاء، شارع الزبيري، بجانب مسجد النور',\n  });\n\n  const [isEditing, setIsEditing] = useState(false);\n\n  const handleSave = () => {\n    setIsEditing(false);\n    toast({\n      title: \"تم حفظ البيانات\",\n      description: \"تم تحديث معلومات الملف الشخصي بنجاح\",\n    });\n  };\n\n  const profileStats = [\n    { icon: Receipt, label: 'إجمالي الطلبات', value: '42', color: 'text-primary' },\n    { icon: Star, label: 'التقييم', value: '4.8', color: 'text-yellow-500' },\n    { icon: Clock, label: 'عضو منذ', value: '6 أشهر', color: 'text-green-500' },\n  ];\n\n  const menuItems = [\n    { icon: Receipt, label: 'طلباتي', path: '/orders', description: 'عرض تاريخ الطلبات', testId: 'profile-orders' },\n    { icon: MapPin, label: 'العناوين المحفوظة', path: '/addresses', description: 'إدارة عناوين التوصيل', testId: 'profile-addresses' },\n    { icon: Settings, label: 'الإعدادات', path: '/settings', description: 'إعدادات التطبيق والحساب', testId: 'profile-settings' },\n    { icon: Shield, label: 'سياسة الخصوصية', path: '/privacy', description: 'سياسة الخصوصية وشروط الاستخدام', testId: 'profile-privacy' },\n  ];\n\n  return (\n    <div>\n      {/* Header */}\n      <header className=\"bg-card border-b border-border p-4\">\n        <div className=\"flex items-center gap-3\">\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={() => setLocation('/')}\n            data-testid=\"button-profile-back\"\n          >\n            <ArrowRight className=\"h-5 w-5\" />\n          </Button>\n          <h2 className=\"text-xl font-bold text-foreground\">الملف الشخصي</h2>\n        </div>\n      </header>\n\n      <section className=\"p-4 space-y-6\">\n        {/* Profile Info Card */}\n        <Card>\n          <CardHeader className=\"text-center\">\n            <div className=\"w-20 h-20 bg-primary rounded-full flex items-center justify-center mx-auto mb-4\">\n              <User className=\"h-10 w-10 text-primary-foreground\" />\n            </div>\n            <CardTitle className=\"text-xl text-foreground\">{profile.name}</CardTitle>\n            <Badge variant=\"secondary\" className=\"mx-auto\">عضو مميز</Badge>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            {isEditing ? (\n              <div className=\"space-y-4\">\n                <div>\n                  <Label htmlFor=\"name\" className=\"text-foreground\">الاسم</Label>\n                  <Input\n                    id=\"name\"\n                    value={profile.name}\n                    onChange={(e) => setProfile(prev => ({ ...prev, name: e.target.value }))}\n                    data-testid=\"input-profile-name\"\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"phone\" className=\"text-foreground\">رقم الهاتف</Label>\n                  <Input\n                    id=\"phone\"\n                    value={profile.phone}\n                    onChange={(e) => setProfile(prev => ({ ...prev, phone: e.target.value }))}\n                    data-testid=\"input-profile-phone\"\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"email\" className=\"text-foreground\">البريد الإلكتروني</Label>\n                  <Input\n                    id=\"email\"\n                    type=\"email\"\n                    value={profile.email}\n                    onChange={(e) => setProfile(prev => ({ ...prev, email: e.target.value }))}\n                    data-testid=\"input-profile-email\"\n                  />\n                </div>\n                <div>\n                  <Label htmlFor=\"address\" className=\"text-foreground\">العنوان</Label>\n                  <Input\n                    id=\"address\"\n                    value={profile.address}\n                    onChange={(e) => setProfile(prev => ({ ...prev, address: e.target.value }))}\n                    data-testid=\"input-profile-address\"\n                  />\n                </div>\n                <div className=\"flex gap-2\">\n                  <Button onClick={handleSave} className=\"flex-1\" data-testid=\"button-save-profile\">\n                    حفظ التغييرات\n                  </Button>\n                  <Button \n                    variant=\"outline\" \n                    onClick={() => setIsEditing(false)}\n                    data-testid=\"button-cancel-edit\"\n                  >\n                    إلغاء\n                  </Button>\n                </div>\n              </div>\n            ) : (\n              <div className=\"space-y-3\">\n                <div className=\"flex items-center gap-3 p-3 bg-muted rounded-lg\">\n                  <Phone className=\"h-5 w-5 text-muted-foreground\" />\n                  <span className=\"text-foreground\" data-testid=\"profile-phone\">{profile.phone}</span>\n                </div>\n                <div className=\"flex items-center gap-3 p-3 bg-muted rounded-lg\">\n                  <Mail className=\"h-5 w-5 text-muted-foreground\" />\n                  <span className=\"text-foreground\" data-testid=\"profile-email\">{profile.email}</span>\n                </div>\n                <div className=\"flex items-center gap-3 p-3 bg-muted rounded-lg\">\n                  <MapPin className=\"h-5 w-5 text-muted-foreground\" />\n                  <span className=\"text-foreground\" data-testid=\"profile-address\">{profile.address}</span>\n                </div>\n                <Button \n                  onClick={() => setIsEditing(true)} \n                  className=\"w-full\"\n                  data-testid=\"button-edit-profile\"\n                >\n                  تعديل المعلومات\n                </Button>\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Stats */}\n        <div className=\"grid grid-cols-3 gap-3\">\n          {profileStats.map((stat, index) => {\n            const Icon = stat.icon;\n            return (\n              <Card key={index} className=\"text-center\">\n                <CardContent className=\"p-4\">\n                  <Icon className={`h-6 w-6 ${stat.color} mx-auto mb-2`} />\n                  <div className=\"text-lg font-bold text-foreground\" data-testid={`stat-${index}`}>\n                    {stat.value}\n                  </div>\n                  <div className=\"text-xs text-muted-foreground\">{stat.label}</div>\n                </CardContent>\n              </Card>\n            );\n          })}\n        </div>\n\n        {/* Menu Items */}\n        <div className=\"space-y-3\">\n          {menuItems.map((item) => {\n            const Icon = item.icon;\n            return (\n              <Button\n                key={item.path}\n                variant=\"ghost\"\n                className=\"w-full h-auto p-4 justify-between hover:bg-accent\"\n                onClick={() => setLocation(item.path)}\n                data-testid={item.testId}\n              >\n                <div className=\"flex items-center gap-3\">\n                  <Icon className=\"h-6 w-6 text-primary\" />\n                  <div className=\"text-right\">\n                    <div className=\"font-medium text-foreground\">{item.label}</div>\n                    <div className=\"text-sm text-muted-foreground\">{item.description}</div>\n                  </div>\n                </div>\n                <ArrowRight className=\"h-5 w-5 text-muted-foreground rotate-180\" />\n              </Button>\n            );\n          })}\n        </div>\n      </section>\n    </div>\n  );\n}","size_bytes":8387},"client/src/pages/Restaurant.tsx":{"content":"import { useState } from 'react';\nimport { useParams, useLocation } from 'wouter';\nimport { useQuery } from '@tanstack/react-query';\nimport { ArrowRight, Star, Clock, AlertTriangle } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport MenuItemCard from '../components/MenuItemCard';\nimport type { Restaurant, MenuItem } from '@shared/schema';\nimport { getRestaurantStatus, canOrderFromRestaurant } from '../utils/restaurantHours';\n\nexport default function Restaurant() {\n  const { id } = useParams<{ id: string }>();\n  const [, setLocation] = useLocation();\n  const [selectedMenuCategory, setSelectedMenuCategory] = useState('وجبات رمضان');\n\n  const { data: restaurant, isLoading: restaurantLoading } = useQuery<Restaurant>({\n    queryKey: ['/api/restaurants', id],\n  });\n\n  const { data: menuItems, isLoading: menuLoading } = useQuery<MenuItem[]>({\n    queryKey: ['/api/restaurants', id, 'menu'],\n  });\n\nconst menuCategories = menuItems \n  ? Array.from(new Set(menuItems.map(item => item.category))) \n  : [];\n  const filteredMenuItems = menuItems?.filter(item => item.category === selectedMenuCategory) || [];\n\n  if (restaurantLoading) {\n    return (\n      <div className=\"animate-pulse\">\n        <div className=\"w-full h-64 bg-muted\" />\n        <div className=\"p-4 space-y-4\">\n          <div className=\"h-6 bg-muted rounded w-3/4\" />\n          <div className=\"h-4 bg-muted rounded w-1/2\" />\n        </div>\n      </div>\n    );\n  }\n\n  if (!restaurant) {\n    return (\n      <div className=\"p-4 text-center\">\n        <p className=\"text-muted-foreground\">المطعم غير موجود</p>\n      </div>\n    );\n  }\n\n  const restaurantStatus = getRestaurantStatus(restaurant);\n  const orderStatus = canOrderFromRestaurant(restaurant);\n\n  return (\n    <div>\n      {/* Restaurant Header */}\n      <div className=\"relative\">\n        <img\n          src={restaurant.image}\n          alt={restaurant.name}\n          className=\"w-full h-64 object-cover\"\n        />\n        <Button\n          variant=\"ghost\"\n          size=\"icon\"\n          className=\"absolute top-4 right-4 bg-black/50 text-white hover:bg-black/70\"\n          onClick={() => setLocation('/')}\n          data-testid=\"button-back\"\n        >\n          <ArrowRight className=\"h-5 w-5\" />\n        </Button>\n        <div className=\"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-6\">\n          <h2 className=\"text-2xl font-bold text-white mb-2\" data-testid=\"restaurant-name\">\n            {restaurant.name}\n          </h2>\n          <div className=\"flex items-center gap-4 text-white/90 text-sm\">\n            <div className=\"flex items-center gap-1\">\n              <Star className=\"h-4 w-4 text-yellow-500\" />\n              <span>{restaurant.rating} ({restaurant.reviewCount} تقييم)</span>\n            </div>\n            <div className=\"flex items-center gap-1\">\n              <Clock className=\"h-4 w-4\" />\n              <span>{restaurant.deliveryTime}</span>\n            </div>\n            <Badge \n              variant={restaurantStatus.isOpen ? \"default\" : \"destructive\"}\n              className={restaurantStatus.statusColor === 'green' ? \"bg-green-500 hover:bg-green-500\" : \n                        restaurantStatus.statusColor === 'yellow' ? \"bg-yellow-500 hover:bg-yellow-500\" : \"\"}\n            >\n              {restaurantStatus.isOpen ? 'مفتوح' : 'مغلق'}\n            </Badge>\n          </div>\n        </div>\n      </div>\n\n      {/* Restaurant Status Alert */}\n      {!orderStatus.canOrder && (\n        <Alert className=\"m-4 border-red-200 bg-red-50\">\n          <AlertTriangle className=\"h-4 w-4 text-red-600\" />\n          <AlertDescription className=\"text-red-800\">\n            {orderStatus.message}\n          </AlertDescription>\n        </Alert>\n      )}\n\n      {/* Menu Categories */}\n      <div className=\"sticky top-0 bg-background border-b border-border z-30\">\n        <div className=\"flex gap-2 p-4 overflow-x-auto no-scrollbar\">\n          {menuCategories.map((category) => (\n            <Button\n              key={category}\n              variant={selectedMenuCategory === category ? \"default\" : \"secondary\"}\n              className=\"whitespace-nowrap font-medium\"\n              onClick={() => setSelectedMenuCategory(category)}\n              data-testid={`menu-category-${category}`}\n            >\n              {category}\n            </Button>\n          ))}\n        </div>\n      </div>\n\n      {/* Menu Items */}\n      <section className=\"p-4 space-y-4\">\n        {menuLoading ? (\n          <div className=\"space-y-4\">\n            {[...Array(4)].map((_, i) => (\n              <div key={i} className=\"bg-card border border-border rounded-xl p-4 flex gap-4\">\n                <div className=\"w-20 h-20 bg-muted rounded-lg animate-pulse\" />\n                <div className=\"flex-1 space-y-2\">\n                  <div className=\"h-4 bg-muted rounded animate-pulse\" />\n                  <div className=\"h-3 bg-muted rounded w-3/4 animate-pulse\" />\n                  <div className=\"h-3 bg-muted rounded w-1/2 animate-pulse\" />\n                </div>\n              </div>\n            ))}\n          </div>\n        ) : filteredMenuItems.length ? (\n          filteredMenuItems.map((item) => (\n            <MenuItemCard \n              key={item.id} \n              item={item} \n              disabled={!orderStatus.canOrder}\n              disabledMessage={orderStatus.message}\n            />\n          ))\n        ) : (\n          <div className=\"text-center text-muted-foreground py-8\">\n            <p>لا توجد عناصر في هذا التصنيف</p>\n          </div>\n        )}\n      </section>\n    </div>\n  );\n}\n","size_bytes":5760},"client/src/pages/RestaurantPage.tsx":{"content":"import { useState } from 'react';\nimport { useParams, useLocation } from 'wouter';\nimport { useQuery } from '@tanstack/react-query';\nimport { ArrowRight, Star, Clock, AlertTriangle } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport MenuItemCard from '../components/MenuItemCard';\nimport type { Restaurant, MenuItem } from '@shared/schema';\nimport { getRestaurantStatus, canOrderFromRestaurant } from '../utils/restaurantHours';\n\nexport default function RestaurantPage() {\n  const { id } = useParams<{ id: string }>();\n  const [, setLocation] = useLocation();\n  const [selectedMenuCategory, setSelectedMenuCategory] = useState('وجبات رمضان');\n\n  const { data: restaurant, isLoading: restaurantLoading } = useQuery<Restaurant>({\n    queryKey: ['/api/restaurants', id],\n  });\n\n  const { data: menuItems, isLoading: menuLoading } = useQuery<MenuItem[]>({\n    queryKey: ['/api/restaurants', id, 'menu'],\n  });\n\n  const menuCategories = menuItems \n    ? Array.from(new Set(menuItems.map(item => item.category))) \n    : [];\n  const filteredMenuItems = menuItems?.filter(item => item.category === selectedMenuCategory) || [];\n\n  if (restaurantLoading) {\n    return (\n      <div className=\"animate-pulse\">\n        <div className=\"w-full h-64 bg-muted\" />\n        <div className=\"p-4 space-y-4\">\n          <div className=\"h-6 bg-muted rounded w-3/4\" />\n          <div className=\"h-4 bg-muted rounded w-1/2\" />\n        </div>\n      </div>\n    );\n  }\n\n  if (!restaurant) {\n    return (\n      <div className=\"p-4 text-center\">\n        <p className=\"text-muted-foreground\">المطعم غير موجود</p>\n      </div>\n    );\n  }\n\n  const restaurantStatus = getRestaurantStatus(restaurant);\n  const orderStatus = canOrderFromRestaurant(restaurant);\n\n  return (\n    <div>\n      {/* Restaurant Header */}\n      <div className=\"relative\">\n        <img\n          src={restaurant.image}\n          alt={restaurant.name}\n          className=\"w-full h-64 object-cover\"\n        />\n        <Button\n          variant=\"ghost\"\n          size=\"icon\"\n          className=\"absolute top-4 right-4 bg-black/50 text-white hover:bg-black/70\"\n          onClick={() => setLocation('/')}\n          data-testid=\"button-back\"\n        >\n          <ArrowRight className=\"h-5 w-5\" />\n        </Button>\n        <div className=\"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-6\">\n          <h2 className=\"text-2xl font-bold text-white mb-2\" data-testid=\"restaurant-name\">\n            {restaurant.name}\n          </h2>\n          <div className=\"flex items-center gap-4 text-white/90 text-sm\">\n            <div className=\"flex items-center gap-1\">\n              <Star className=\"h-4 w-4 text-yellow-500\" />\n              <span>{restaurant.rating} ({restaurant.reviewCount} تقييم)</span>\n            </div>\n            <div className=\"flex items-center gap-1\">\n              <Clock className=\"h-4 w-4\" />\n              <span>{restaurant.deliveryTime}</span>\n            </div>\n            <Badge \n              variant={restaurantStatus.isOpen ? \"default\" : \"destructive\"}\n              className={restaurantStatus.statusColor === 'green' ? \"bg-green-500 hover:bg-green-500\" : \n                        restaurantStatus.statusColor === 'yellow' ? \"bg-yellow-500 hover:bg-yellow-500\" : \"\"}\n            >\n              {restaurantStatus.isOpen ? 'مفتوح' : 'مغلق'}\n            </Badge>\n          </div>\n        </div>\n      </div>\n\n      {/* Restaurant Status Alert */}\n      {!orderStatus.canOrder && (\n        <Alert className=\"m-4 border-red-200 bg-red-50\">\n          <AlertTriangle className=\"h-4 w-4 text-red-600\" />\n          <AlertDescription className=\"text-red-800\">\n            {orderStatus.message}\n          </AlertDescription>\n        </Alert>\n      )}\n\n      {/* Menu Categories */}\n      <div className=\"sticky top-0 bg-background border-b border-border z-30\">\n        <div className=\"flex gap-2 p-4 overflow-x-auto no-scrollbar\">\n          {menuCategories.map((category) => (\n            <Button\n              key={category}\n              variant={selectedMenuCategory === category ? \"default\" : \"secondary\"}\n              className=\"whitespace-nowrap font-medium\"\n              onClick={() => setSelectedMenuCategory(category)}\n              data-testid={`menu-category-${category}`}\n            >\n              {category}\n            </Button>\n          ))}\n        </div>\n      </div>\n\n      {/* Menu Items */}\n      <section className=\"p-4 space-y-4\">\n        {menuLoading ? (\n          <div className=\"space-y-4\">\n            {[...Array(4)].map((_, i) => (\n              <div key={i} className=\"bg-card border border-border rounded-xl p-4 flex gap-4\">\n                <div className=\"w-20 h-20 bg-muted rounded-lg animate-pulse\" />\n                <div className=\"flex-1 space-y-2\">\n                  <div className=\"h-4 bg-muted rounded animate-pulse\" />\n                  <div className=\"h-3 bg-muted rounded w-3/4 animate-pulse\" />\n                  <div className=\"h-3 bg-muted rounded w-1/2 animate-pulse\" />\n                </div>\n              </div>\n            ))}\n          </div>\n        ) : filteredMenuItems.length ? (\n          filteredMenuItems.map((item) => (\n            <MenuItemCard \n              key={item.id} \n              item={item} \n              disabled={!orderStatus.canOrder}\n              disabledMessage={orderStatus.message}\n            />\n          ))\n        ) : (\n          <div className=\"text-center text-muted-foreground py-8\">\n            <p>لا توجد عناصر في هذا التصنيف</p>\n          </div>\n        )}\n      </section>\n    </div>\n  );\n}","size_bytes":5769},"client/src/pages/Settings.tsx":{"content":"import { useState } from 'react';\nimport { useLocation } from 'wouter';\nimport { ArrowRight, Bell, Globe, Moon, Sun, Lock, CreditCard, Smartphone, Settings as SettingsIcon } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Switch } from '@/components/ui/switch';\nimport { Label } from '@/components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { useTheme } from '../context/ThemeContext';\nimport { useToast } from '@/hooks/use-toast';\nimport { UiControlPanel } from '@/components/UiControlPanel';\n\ninterface SettingItem {\n  key: string;\n  label: string;\n  description: string;\n  type: 'switch' | 'theme' | 'select';\n  value: boolean | string;\n  onChange: (value: any) => void;\n  options?: Array<{ value: string; label: string }>;\n}\n\ninterface SettingsGroup {\n  title: string;\n  icon: React.ComponentType<React.SVGProps<SVGSVGElement>>;\n  items: SettingItem[];\n}\n\nexport default function Settings() {\n  const [, setLocation] = useLocation();\n  const { theme, toggleTheme } = useTheme();\n  const { toast } = useToast();\n  \n  const [settings, setSettings] = useState({\n    notifications: {\n      orderUpdates: true,\n      promotions: true,\n      sound: true,\n    },\n    language: 'ar',\n    currency: 'YER',\n    autoLocation: true,\n    biometric: false,\n  });\n\n  const handleNotificationChange = (setting: string, value: boolean) => {\n    setSettings(prev => ({\n      ...prev,\n      notifications: {\n        ...prev.notifications,\n        [setting]: value,\n      },\n    }));\n    \n    toast({\n      title: \"تم حفظ الإعدادات\",\n      description: \"تم تحديث إعداداتك بنجاح\",\n    });\n  };\n\n  const handleSimpleSettingChange = (setting: string, value: boolean | string) => {\n    setSettings(prev => ({\n      ...prev,\n      [setting]: value,\n    }));\n    \n    toast({\n      title: \"تم حفظ الإعدادات\",\n      description: \"تم تحديث إعداداتك بنجاح\",\n    });\n  };\n\n  const settingsGroups: SettingsGroup[] = [\n    {\n      title: 'الإشعارات',\n      icon: Bell,\n      items: [\n        {\n          key: 'orderUpdates',\n          label: 'تحديثات الطلبات',\n          description: 'إشعارات حول حالة طلباتك',\n          type: 'switch',\n          value: settings.notifications.orderUpdates,\n          onChange: (value: boolean) => handleNotificationChange('orderUpdates', value),\n        },\n        {\n          key: 'promotions',\n          label: 'العروض والتخفيضات',\n          description: 'إشعارات حول العروض الجديدة',\n          type: 'switch',\n          value: settings.notifications.promotions,\n          onChange: (value: boolean) => handleNotificationChange('promotions', value),\n        },\n        {\n          key: 'sound',\n          label: 'الأصوات',\n          description: 'تشغيل أصوات الإشعارات',\n          type: 'switch',\n          value: settings.notifications.sound,\n          onChange: (value: boolean) => handleNotificationChange('sound', value),\n        },\n      ],\n    },\n    {\n      title: 'العرض واللغة',\n      icon: Globe,\n      items: [\n        {\n          key: 'theme',\n          label: 'المظهر',\n          description: 'اختيار المظهر الفاتح أو الداكن',\n          type: 'theme',\n          value: theme,\n          onChange: toggleTheme,\n        },\n        {\n          key: 'language',\n          label: 'اللغة',\n          description: 'اختيار لغة التطبيق',\n          type: 'select',\n          value: settings.language,\n          options: [\n            { value: 'ar', label: 'العربية' },\n            { value: 'en', label: 'English' },\n          ],\n          onChange: (value: string) => handleSimpleSettingChange('language', value),\n        },\n        {\n          key: 'currency',\n          label: 'العملة',\n          description: 'وحدة العملة المستخدمة',\n          type: 'select',\n          value: settings.currency,\n          options: [\n            { value: 'YER', label: 'الريال اليمني (YER)' },\n            { value: 'SAR', label: 'الريال السعودي (SAR)' },\n            { value: 'USD', label: 'الدولار الأمريكي (USD)' },\n          ],\n          onChange: (value: string) => handleSimpleSettingChange('currency', value),\n        },\n      ],\n    },\n    {\n      title: 'الموقع والخصوصية',\n      icon: Lock,\n      items: [\n        {\n          key: 'autoLocation',\n          label: 'تحديد الموقع تلقائياً',\n          description: 'السماح للتطبيق بتحديد موقعك',\n          type: 'switch',\n          value: settings.autoLocation,\n          onChange: (value: boolean) => handleSimpleSettingChange('autoLocation', value),\n        },\n        {\n          key: 'biometric',\n          label: 'الحماية البيومترية',\n          description: 'استخدام بصمة الإصبع أو الوجه',\n          type: 'switch',\n          value: settings.biometric,\n          onChange: (value: boolean) => handleSimpleSettingChange('biometric', value),\n        },\n      ],\n    },\n  ];\n\n  const quickActions = [\n    {\n      icon: CreditCard,\n      label: 'طرق الدفع',\n      description: 'إدارة طرق الدفع المحفوظة',\n      action: () => setLocation('/payment-methods'),\n      testId: 'settings-payment-methods',\n    },\n    {\n      icon: Smartphone,\n      label: 'حول التطبيق',\n      description: 'معلومات النسخة والتحديثات',\n      action: () => setLocation('/about'),\n      testId: 'settings-about',\n    },\n  ];\n\n  return (\n    <div>\n      {/* Header */}\n      <header className=\"bg-card border-b border-border p-4\">\n        <div className=\"flex items-center gap-3\">\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            onClick={() => setLocation('/profile')}\n            data-testid=\"button-settings-back\"\n          >\n            <ArrowRight className=\"h-5 w-5\" />\n          </Button>\n          <h2 className=\"text-xl font-bold text-foreground\">الإعدادات</h2>\n        </div>\n      </header>\n\n      <section className=\"p-4\">\n        <Tabs defaultValue=\"general\" className=\"w-full\">\n          <TabsList className=\"grid w-full grid-cols-2\">\n            <TabsTrigger value=\"general\" className=\"flex items-center gap-2\">\n              <SettingsIcon className=\"h-4 w-4\" />\n              إعدادات عامة\n            </TabsTrigger>\n            <TabsTrigger value=\"ui-control\" className=\"flex items-center gap-2\">\n              <Globe className=\"h-4 w-4\" />\n              تحكم الواجهة\n            </TabsTrigger>\n          </TabsList>\n          \n          <TabsContent value=\"general\" className=\"space-y-6 mt-6\">\n            {/* Settings Groups */}\n            {settingsGroups.map((group) => {\n          const Icon = group.icon;\n          return (\n            <Card key={group.title}>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-3 text-lg\">\n                  <Icon className=\"h-6 w-6 text-primary\" />\n                  {group.title}\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                {group.items.map((item) => (\n                  <div key={item.key} className=\"flex items-center justify-between py-2\">\n                    <div className=\"flex-1\">\n                      <Label \n                        htmlFor={item.key} \n                        className=\"text-foreground font-medium cursor-pointer\"\n                        data-testid={`setting-label-${item.key}`}\n                      >\n                        {item.label}\n                      </Label>\n                      <p className=\"text-sm text-muted-foreground mt-1\">\n                        {item.description}\n                      </p>\n                    </div>\n                    \n                    <div className=\"ml-4\">\n                      {item.type === 'switch' && (\n                        <Switch\n                          id={item.key}\n                          checked={item.value as boolean}\n                          onCheckedChange={item.onChange}\n                          data-testid={`switch-${item.key}`}\n                        />\n                      )}\n                      \n                      {item.type === 'theme' && (\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={item.onChange}\n                          data-testid=\"button-toggle-theme\"\n                        >\n                          {theme === 'dark' ? (\n                            <Sun className=\"h-4 w-4 ml-2\" />\n                          ) : (\n                            <Moon className=\"h-4 w-4 ml-2\" />\n                          )}\n                          {theme === 'dark' ? 'فاتح' : 'داكن'}\n                        </Button>\n                      )}\n                      \n                      {item.type === 'select' && item.options && (\n                        <Select \n                          value={item.value as string} \n                          onValueChange={item.onChange}\n                        >\n                          <SelectTrigger className=\"w-40\" data-testid={`select-${item.key}`}>\n                            <SelectValue />\n                          </SelectTrigger>\n                          <SelectContent>\n                            {item.options.map((option) => (\n                              <SelectItem key={option.value} value={option.value}>\n                                {option.label}\n                              </SelectItem>\n                            ))}\n                          </SelectContent>\n                        </Select>\n                      )}\n                    </div>\n                  </div>\n                ))}\n              </CardContent>\n            </Card>\n          );\n        })}\n\n            {/* Quick Actions */}\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"text-lg\">إعدادات إضافية</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-3\">\n                {quickActions.map((action) => {\n                  const Icon = action.icon;\n                  return (\n                    <Button\n                      key={action.testId}\n                      variant=\"ghost\"\n                      className=\"w-full h-auto p-4 justify-between hover:bg-accent\"\n                      onClick={action.action}\n                      data-testid={action.testId}\n                    >\n                      <div className=\"flex items-center gap-3\">\n                        <Icon className=\"h-6 w-6 text-primary\" />\n                        <div className=\"text-right\">\n                          <div className=\"font-medium text-foreground\">{action.label}</div>\n                          <div className=\"text-sm text-muted-foreground\">{action.description}</div>\n                        </div>\n                      </div>\n                      <ArrowRight className=\"h-5 w-5 text-muted-foreground rotate-180\" />\n                    </Button>\n                  );\n                })}\n              </CardContent>\n            </Card>\n\n            {/* Sign Out */}\n            <Button\n              variant=\"destructive\"\n              className=\"w-full\"\n              data-testid=\"button-sign-out\"\n            >\n              تسجيل الخروج\n            </Button>\n          </TabsContent>\n          \n          <TabsContent value=\"ui-control\" className=\"mt-6\">\n            <UiControlPanel />\n          </TabsContent>\n        </Tabs>\n      </section>\n    </div>\n  );\n}","size_bytes":12034},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"client/src/utils/restaurantHours.ts":{"content":"export interface RestaurantStatus {\n  isOpen: boolean;\n  nextOpenTime?: string;\n  closeTime?: string;\n  message: string;\n  statusColor: 'green' | 'red' | 'yellow';\n}\n\nexport function getRestaurantStatus(restaurant: any): RestaurantStatus {\n  const now = new Date();\n  const currentDay = now.getDay(); // 0 = Sunday, 6 = Saturday\n  const currentTime = now.toTimeString().slice(0, 5); // HH:MM format\n\n  // Check if temporarily closed\n  if (restaurant.isTemporarilyClosed) {\n    return {\n      isOpen: false,\n      message: restaurant.temporaryCloseReason || 'مغلق مؤقتاً',\n      statusColor: 'red'\n    };\n  }\n\n  // Check if restaurant is manually set to closed\n  if (!restaurant.isOpen) {\n    return {\n      isOpen: false,\n      message: 'مغلق',\n      statusColor: 'red'\n    };\n  }\n\n  // Parse working days\n  const workingDays = restaurant.workingDays \n    ? restaurant.workingDays.split(',').map(Number)\n    : [0, 1, 2, 3, 4, 5, 6];\n\n  // Check if today is a working day\n  if (!workingDays.includes(currentDay)) {\n    const nextWorkingDay = getNextWorkingDay(currentDay, workingDays);\n    return {\n      isOpen: false,\n      nextOpenTime: `${getDayName(nextWorkingDay)} ${restaurant.openingTime || '08:00'}`,\n      message: `مغلق اليوم - يفتح ${getDayName(nextWorkingDay)} ${restaurant.openingTime || '08:00'}`,\n      statusColor: 'red'\n    };\n  }\n\n  const openingTime = restaurant.openingTime || '08:00';\n  const closingTime = restaurant.closingTime || '23:00';\n\n  // Check if currently within working hours\n  if (isTimeInRange(currentTime, openingTime, closingTime)) {\n    const minutesUntilClose = getMinutesUntilTime(currentTime, closingTime);\n    \n    if (minutesUntilClose <= 30) {\n      return {\n        isOpen: true,\n        closeTime: closingTime,\n        message: `مفتوح - يغلق الساعة ${closingTime}`,\n        statusColor: 'yellow'\n      };\n    }\n    \n    return {\n      isOpen: true,\n      closeTime: closingTime,\n      message: `مفتوح حتى ${closingTime}`,\n      statusColor: 'green'\n    };\n  }\n\n  // Restaurant is closed - calculate next opening time\n  if (currentTime < openingTime) {\n    // Will open today\n    return {\n      isOpen: false,\n      nextOpenTime: `اليوم ${openingTime}`,\n      message: `مغلق - يفتح اليوم الساعة ${openingTime}`,\n      statusColor: 'red'\n    };\n  } else {\n    // Will open tomorrow or next working day\n    const nextWorkingDay = getNextWorkingDay(currentDay, workingDays);\n    const dayText = nextWorkingDay === (currentDay + 1) % 7 ? 'غداً' : getDayName(nextWorkingDay);\n    \n    return {\n      isOpen: false,\n      nextOpenTime: `${dayText} ${openingTime}`,\n      message: `مغلق - يفتح ${dayText} الساعة ${openingTime}`,\n      statusColor: 'red'\n    };\n  }\n}\n\nfunction isTimeInRange(current: string, start: string, end: string): boolean {\n  const currentMinutes = timeToMinutes(current);\n  const startMinutes = timeToMinutes(start);\n  const endMinutes = timeToMinutes(end);\n\n  // Handle overnight hours (e.g., 22:00 to 02:00)\n  if (endMinutes < startMinutes) {\n    return currentMinutes >= startMinutes || currentMinutes <= endMinutes;\n  }\n  \n  return currentMinutes >= startMinutes && currentMinutes <= endMinutes;\n}\n\nfunction timeToMinutes(time: string): number {\n  const [hours, minutes] = time.split(':').map(Number);\n  return hours * 60 + minutes;\n}\n\nfunction getMinutesUntilTime(currentTime: string, targetTime: string): number {\n  const currentMinutes = timeToMinutes(currentTime);\n  const targetMinutes = timeToMinutes(targetTime);\n  \n  if (targetMinutes < currentMinutes) {\n    // Next day\n    return (24 * 60) - currentMinutes + targetMinutes;\n  }\n  \n  return targetMinutes - currentMinutes;\n}\n\nfunction getNextWorkingDay(currentDay: number, workingDays: number[]): number {\n  for (let i = 1; i <= 7; i++) {\n    const nextDay = (currentDay + i) % 7;\n    if (workingDays.includes(nextDay)) {\n      return nextDay;\n    }\n  }\n  return workingDays[0] || 0;\n}\n\nfunction getDayName(day: number): string {\n  const days = ['الأحد', 'الإثنين', 'الثلاثاء', 'الأربعاء', 'الخميس', 'الجمعة', 'السبت'];\n  return days[day] || '';\n}\n\nexport function canOrderFromRestaurant(restaurant: any): { canOrder: boolean; message?: string } {\n  const status = getRestaurantStatus(restaurant);\n  \n  if (!status.isOpen) {\n    return {\n      canOrder: false,\n      message: `عذراً، لا يمكن الطلب الآن. ${status.message}`\n    };\n  }\n  \n  return { canOrder: true };\n}","size_bytes":4550},"client/src/components/admin/AdminLayout.tsx":{"content":"import React, { useState } from 'react';\nimport { useLocation } from 'wouter';\nimport { useAuth } from '@/context/AuthContext';\nimport { Button } from '@/components/ui/button';\nimport { Sheet, SheetContent, SheetTrigger } from '@/components/ui/sheet';\nimport { \n  BarChart3, \n  Store, \n  ShoppingBag, \n  Truck, \n  Percent, \n  Settings, \n  Menu,\n  LogOut,\n  Package,\n  Users,\n  Bell\n} from 'lucide-react';\n\ninterface AdminLayoutProps {\n  children: React.ReactNode;\n}\n\nexport const AdminLayout: React.FC<AdminLayoutProps> = ({ children }) => {\n  const [, setLocation] = useLocation();\n  const { user, logout } = useAuth();\n  const [isSidebarOpen, setIsSidebarOpen] = useState(false);\n\n  const menuItems = [\n    { \n      icon: BarChart3, \n      label: 'لوحة التحكم', \n      path: '/admin',\n      description: 'نظرة عامة على النظام'\n    },\n    { \n      icon: ShoppingBag, \n      label: 'الطلبات', \n      path: '/admin/orders',\n      description: 'إدارة جميع الطلبات'\n    },\n    { \n      icon: Store, \n      label: 'المطاعم', \n      path: '/admin/restaurants',\n      description: 'إدارة المطاعم والمتاجر'\n    },\n    { \n      icon: Package, \n      label: 'قوائم الطعام', \n      path: '/admin/menu-items',\n      description: 'إدارة عناصر القوائم'\n    },\n    { \n      icon: Truck, \n      label: 'السائقين', \n      path: '/admin/drivers',\n      description: 'إدارة السائقين'\n    },\n    { \n      icon: Percent, \n      label: 'العروض', \n      path: '/admin/offers',\n      description: 'إدارة العروض الخاصة'\n    },\n    { \n      icon: Users, \n      label: 'العملاء', \n      path: '/admin/customers',\n      description: 'إدارة العملاء'\n    },\n    { \n      icon: Settings, \n      label: 'الإعدادات', \n      path: '/admin/settings',\n      description: 'إعدادات النظام'\n    },\n  ];\n\n  const handleNavigation = (path: string) => {\n    setLocation(path);\n    setIsSidebarOpen(false);\n  };\n\n  const handleLogout = () => {\n    logout();\n    setLocation('/admin-login');\n  };\n\n  const currentPath = window.location.pathname;\n\n  const SidebarContent = () => (\n    <div className=\"flex flex-col h-full bg-white\">\n      {/* Header */}\n      <div className=\"p-6 border-b bg-gradient-to-r from-blue-50 to-blue-100\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center\">\n            <BarChart3 className=\"h-6 w-6 text-white\" />\n          </div>\n          <div>\n            <h2 className=\"text-lg font-bold text-gray-900\">لوحة التحكم</h2>\n            <p className=\"text-sm text-gray-600\">السريع ون</p>\n          </div>\n        </div>\n      </div>\n\n      {/* User Info */}\n      <div className=\"p-4 border-b bg-gray-50\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center\">\n            <span className=\"text-white text-sm font-medium\">\n              {user?.name?.charAt(0) || 'A'}\n            </span>\n          </div>\n          <div>\n            <p className=\"font-medium text-gray-900\">{user?.name}</p>\n            <p className=\"text-xs text-gray-500\">مدير النظام</p>\n          </div>\n        </div>\n      </div>\n\n      {/* Navigation */}\n      <nav className=\"flex-1 p-4 space-y-2\">\n        {menuItems.map((item) => {\n          const Icon = item.icon;\n          const isActive = currentPath === item.path;\n          \n          return (\n            <button\n              key={item.path}\n              onClick={() => handleNavigation(item.path)}\n              className={`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-right transition-all duration-200 group ${\n                isActive\n                  ? 'bg-blue-500 text-white shadow-lg'\n                  : 'text-gray-700 hover:bg-blue-50 hover:text-blue-600'\n              }`}\n            >\n              <Icon className={`h-5 w-5 ${isActive ? 'text-white' : 'text-gray-500 group-hover:text-blue-600'}`} />\n              <div className=\"flex-1\">\n                <p className={`font-medium ${isActive ? 'text-white' : 'text-gray-900'}`}>\n                  {item.label}\n                </p>\n                <p className={`text-xs ${isActive ? 'text-blue-100' : 'text-gray-500'}`}>\n                  {item.description}\n                </p>\n              </div>\n            </button>\n          );\n        })}\n      </nav>\n\n      {/* Footer */}\n      <div className=\"p-4 border-t\">\n        <Button\n          variant=\"outline\"\n          onClick={handleLogout}\n          className=\"w-full flex items-center gap-2 text-red-600 border-red-200 hover:bg-red-50 hover:border-red-300\"\n        >\n          <LogOut className=\"h-4 w-4\" />\n          تسجيل الخروج\n        </Button>\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex\" dir=\"rtl\">\n      {/* Desktop Sidebar */}\n      <div className=\"hidden lg:block w-80 bg-white shadow-lg\">\n        <SidebarContent />\n      </div>\n\n      {/* Mobile Sidebar */}\n      <Sheet open={isSidebarOpen} onOpenChange={setIsSidebarOpen}>\n        <SheetContent side=\"right\" className=\"w-80 p-0\">\n          <SidebarContent />\n        </SheetContent>\n      </Sheet>\n\n      {/* Main Content */}\n      <div className=\"flex-1 flex flex-col\">\n        {/* Mobile Header */}\n        <div className=\"lg:hidden bg-white border-b p-4 flex items-center justify-between\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center\">\n              <BarChart3 className=\"h-5 w-5 text-white\" />\n            </div>\n            <div>\n              <h1 className=\"font-bold text-gray-900\">لوحة التحكم</h1>\n              <p className=\"text-xs text-gray-500\">السريع ون</p>\n            </div>\n          </div>\n          \n          <div className=\"flex items-center gap-2\">\n            <Button variant=\"ghost\" size=\"sm\">\n              <Bell className=\"h-5 w-5\" />\n            </Button>\n            <Sheet open={isSidebarOpen} onOpenChange={setIsSidebarOpen}>\n              <SheetTrigger asChild>\n                <Button variant=\"ghost\" size=\"sm\">\n                  <Menu className=\"h-5 w-5\" />\n                </Button>\n              </SheetTrigger>\n            </Sheet>\n          </div>\n        </div>\n\n        {/* Page Content */}\n        <div className=\"flex-1\">\n          {children}\n        </div>\n      </div>\n    </div>\n  );\n};","size_bytes":6681},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1419},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1128},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":1901},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","size_bytes":1858},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":791},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5742},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"client/src/components/ui/sidebar.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { VariantProps, cva } from \"class-variance-authority\"\nimport { PanelLeft } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nconst SidebarProvider = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    defaultOpen?: boolean\n    open?: boolean\n    onOpenChange?: (open: boolean) => void\n  }\n>(\n  (\n    {\n      defaultOpen = true,\n      open: openProp,\n      onOpenChange: setOpenProp,\n      className,\n      style,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const isMobile = useIsMobile()\n    const [openMobile, setOpenMobile] = React.useState(false)\n\n    // This is the internal state of the sidebar.\n    // We use openProp and setOpenProp for control from outside the component.\n    const [_open, _setOpen] = React.useState(defaultOpen)\n    const open = openProp ?? _open\n    const setOpen = React.useCallback(\n      (value: boolean | ((value: boolean) => boolean)) => {\n        const openState = typeof value === \"function\" ? value(open) : value\n        if (setOpenProp) {\n          setOpenProp(openState)\n        } else {\n          _setOpen(openState)\n        }\n\n        // This sets the cookie to keep the sidebar state.\n        document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n      },\n      [setOpenProp, open]\n    )\n\n    // Helper to toggle the sidebar.\n    const toggleSidebar = React.useCallback(() => {\n      return isMobile\n        ? setOpenMobile((open) => !open)\n        : setOpen((open) => !open)\n    }, [isMobile, setOpen, setOpenMobile])\n\n    // Adds a keyboard shortcut to toggle the sidebar.\n    React.useEffect(() => {\n      const handleKeyDown = (event: KeyboardEvent) => {\n        if (\n          event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n          (event.metaKey || event.ctrlKey)\n        ) {\n          event.preventDefault()\n          toggleSidebar()\n        }\n      }\n\n      window.addEventListener(\"keydown\", handleKeyDown)\n      return () => window.removeEventListener(\"keydown\", handleKeyDown)\n    }, [toggleSidebar])\n\n    // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n    // This makes it easier to style the sidebar with Tailwind classes.\n    const state = open ? \"expanded\" : \"collapsed\"\n\n    const contextValue = React.useMemo<SidebarContextProps>(\n      () => ({\n        state,\n        open,\n        setOpen,\n        isMobile,\n        openMobile,\n        setOpenMobile,\n        toggleSidebar,\n      }),\n      [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n    )\n\n    return (\n      <SidebarContext.Provider value={contextValue}>\n        <TooltipProvider delayDuration={0}>\n          <div\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH,\n                \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n                ...style,\n              } as React.CSSProperties\n            }\n            className={cn(\n              \"group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar\",\n              className\n            )}\n            ref={ref}\n            {...props}\n          >\n            {children}\n          </div>\n        </TooltipProvider>\n      </SidebarContext.Provider>\n    )\n  }\n)\nSidebarProvider.displayName = \"SidebarProvider\"\n\nconst Sidebar = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    side?: \"left\" | \"right\"\n    variant?: \"sidebar\" | \"floating\" | \"inset\"\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n  }\n>(\n  (\n    {\n      side = \"left\",\n      variant = \"sidebar\",\n      collapsible = \"offcanvas\",\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n    if (collapsible === \"none\") {\n      return (\n        <div\n          className={cn(\n            \"flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground\",\n            className\n          )}\n          ref={ref}\n          {...props}\n        >\n          {children}\n        </div>\n      )\n    }\n\n    if (isMobile) {\n      return (\n        <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n          <SheetContent\n            data-sidebar=\"sidebar\"\n            data-mobile=\"true\"\n            className=\"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden\"\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n              } as React.CSSProperties\n            }\n            side={side}\n          >\n            <SheetHeader className=\"sr-only\">\n              <SheetTitle>Sidebar</SheetTitle>\n              <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n            </SheetHeader>\n            <div className=\"flex h-full w-full flex-col\">{children}</div>\n          </SheetContent>\n        </Sheet>\n      )\n    }\n\n    return (\n      <div\n        ref={ref}\n        className=\"group peer hidden text-sidebar-foreground md:block\"\n        data-state={state}\n        data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n        data-variant={variant}\n        data-side={side}\n      >\n        {/* This is what handles the sidebar gap on desktop */}\n        <div\n          className={cn(\n            \"relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear\",\n            \"group-data-[collapsible=offcanvas]:w-0\",\n            \"group-data-[side=right]:rotate-180\",\n            variant === \"floating\" || variant === \"inset\"\n              ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon]\"\n          )}\n        />\n        <div\n          className={cn(\n            \"fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex\",\n            side === \"left\"\n              ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n              : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n            // Adjust the padding for floating and inset variants.\n            variant === \"floating\" || variant === \"inset\"\n              ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n            className\n          )}\n          {...props}\n        >\n          <div\n            data-sidebar=\"sidebar\"\n            className=\"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\"\n          >\n            {children}\n          </div>\n        </div>\n      </div>\n    )\n  }\n)\nSidebar.displayName = \"Sidebar\"\n\nconst SidebarTrigger = React.forwardRef<\n  React.ElementRef<typeof Button>,\n  React.ComponentProps<typeof Button>\n>(({ className, onClick, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      ref={ref}\n      data-sidebar=\"trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeft />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n})\nSidebarTrigger.displayName = \"SidebarTrigger\"\n\nconst SidebarRail = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\">\n>(({ className, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <button\n      ref={ref}\n      data-sidebar=\"rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex\",\n        \"[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarRail.displayName = \"SidebarRail\"\n\nconst SidebarInset = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"main\">\n>(({ className, ...props }, ref) => {\n  return (\n    <main\n      ref={ref}\n      className={cn(\n        \"relative flex w-full flex-1 flex-col bg-background\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInset.displayName = \"SidebarInset\"\n\nconst SidebarInput = React.forwardRef<\n  React.ElementRef<typeof Input>,\n  React.ComponentProps<typeof Input>\n>(({ className, ...props }, ref) => {\n  return (\n    <Input\n      ref={ref}\n      data-sidebar=\"input\"\n      className={cn(\n        \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInput.displayName = \"SidebarInput\"\n\nconst SidebarHeader = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarHeader.displayName = \"SidebarHeader\"\n\nconst SidebarFooter = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarFooter.displayName = \"SidebarFooter\"\n\nconst SidebarSeparator = React.forwardRef<\n  React.ElementRef<typeof Separator>,\n  React.ComponentProps<typeof Separator>\n>(({ className, ...props }, ref) => {\n  return (\n    <Separator\n      ref={ref}\n      data-sidebar=\"separator\"\n      className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\n      {...props}\n    />\n  )\n})\nSidebarSeparator.displayName = \"SidebarSeparator\"\n\nconst SidebarContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarContent.displayName = \"SidebarContent\"\n\nconst SidebarGroup = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarGroup.displayName = \"SidebarGroup\"\n\nconst SidebarGroupLabel = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\"\n\nconst SidebarGroupAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupAction.displayName = \"SidebarGroupAction\"\n\nconst SidebarGroupContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"group-content\"\n    className={cn(\"w-full text-sm\", className)}\n    {...props}\n  />\n))\nSidebarGroupContent.displayName = \"SidebarGroupContent\"\n\nconst SidebarMenu = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu\"\n    className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n    {...props}\n  />\n))\nSidebarMenu.displayName = \"SidebarMenu\"\n\nconst SidebarMenuItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    data-sidebar=\"menu-item\"\n    className={cn(\"group/menu-item relative\", className)}\n    {...props}\n  />\n))\nSidebarMenuItem.displayName = \"SidebarMenuItem\"\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst SidebarMenuButton = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    isActive?: boolean\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>\n  } & VariantProps<typeof sidebarMenuButtonVariants>\n>(\n  (\n    {\n      asChild = false,\n      isActive = false,\n      variant = \"default\",\n      size = \"default\",\n      tooltip,\n      className,\n      ...props\n    },\n    ref\n  ) => {\n    const Comp = asChild ? Slot : \"button\"\n    const { isMobile, state } = useSidebar()\n\n    const button = (\n      <Comp\n        ref={ref}\n        data-sidebar=\"menu-button\"\n        data-size={size}\n        data-active={isActive}\n        className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n        {...props}\n      />\n    )\n\n    if (!tooltip) {\n      return button\n    }\n\n    if (typeof tooltip === \"string\") {\n      tooltip = {\n        children: tooltip,\n      }\n    }\n\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>{button}</TooltipTrigger>\n        <TooltipContent\n          side=\"right\"\n          align=\"center\"\n          hidden={state !== \"collapsed\" || isMobile}\n          {...tooltip}\n        />\n      </Tooltip>\n    )\n  }\n)\nSidebarMenuButton.displayName = \"SidebarMenuButton\"\n\nconst SidebarMenuAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    showOnHover?: boolean\n  }\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuAction.displayName = \"SidebarMenuAction\"\n\nconst SidebarMenuBadge = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"menu-badge\"\n    className={cn(\n      \"pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground\",\n      \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n      \"peer-data-[size=sm]/menu-button:top-1\",\n      \"peer-data-[size=default]/menu-button:top-1.5\",\n      \"peer-data-[size=lg]/menu-button:top-2.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\"\n\nconst SidebarMenuSkeleton = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    showIcon?: boolean\n  }\n>(({ className, showIcon = false, ...props }, ref) => {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[--skeleton-width] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n})\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\"\n\nconst SidebarMenuSub = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu-sub\"\n    className={cn(\n      \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuSub.displayName = \"SidebarMenuSub\"\n\nconst SidebarMenuSubItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ ...props }, ref) => <li ref={ref} {...props} />)\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\"\n\nconst SidebarMenuSubButton = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentProps<\"a\"> & {\n    asChild?: boolean\n    size?: \"sm\" | \"md\"\n    isActive?: boolean\n  }\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\"\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":23567},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"client/src/pages/admin/AdminDashboard.tsx":{"content":"<!DOCTYPE html>\n<html lang=\"ar\" dir=\"rtl\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>لوحة تحكم المشرف - تصحيح الأخطاء</title>\n    <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css\">\n    <style>\n        :root {\n            --primary: #3b82f6;\n            --primary-dark: #2563eb;\n            --primary-light: #bfdbfe;\n            --primary-bg: #eff6ff;\n            --gray-50: #f9fafb;\n            --gray-100: #f3f4f6;\n            --gray-200: #e5e7eb;\n            --gray-300: #d1d5db;\n            --gray-700: #374151;\n            --gray-900: #111827;\n            --red-500: #ef4444;\n            --red-100: #fee2e2;\n            --green-500: #22c55e;\n            --green-100: #dcfce7;\n            --orange-500: #f97316;\n            --orange-100: #ffedd5;\n            --purple-500: #a855f7;\n            --purple-100: #f3e8ff;\n            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);\n            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);\n        }\n\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n        }\n\n        body {\n            background-color: var(--gray-50);\n            color: var(--gray-900);\n            min-height: 100vh;\n        }\n\n        .container {\n            max-width: 1400px;\n            margin: 0 auto;\n            padding: 20px;\n        }\n\n        header {\n            background: white;\n            box-shadow: var(--shadow);\n            padding: 1rem 2rem;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            border-radius: 12px;\n            margin-bottom: 2rem;\n        }\n\n        .logo {\n            display: flex;\n            align-items: center;\n            gap: 0.75rem;\n        }\n\n        .logo-icon {\n            width: 40px;\n            height: 40px;\n            background: linear-gradient(to bottom right, var(--primary), var(--primary-dark));\n            border-radius: 0.5rem;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            color: white;\n        }\n\n        .auth-section {\n            display: flex;\n            align-items: center;\n            gap: 1rem;\n        }\n\n        .btn {\n            padding: 0.5rem 1rem;\n            border-radius: 8px;\n            border: none;\n            font-weight: 600;\n            cursor: pointer;\n            transition: background-color 0.3s ease;\n        }\n\n        .btn-primary {\n            background-color: var(--primary);\n            color: white;\n        }\n\n        .btn-primary:hover {\n            background-color: var(--primary-dark);\n        }\n\n        .btn-outline {\n            background-color: transparent;\n            border: 1px solid var(--primary);\n            color: var(--primary);\n        }\n\n        .btn-outline:hover {\n            background-color: var(--primary);\n            color: white;\n        }\n\n        .btn-danger {\n            background-color: var(--red-500);\n            color: white;\n        }\n\n        .btn-danger:hover {\n            background-color: #dc2626;\n        }\n\n        .debug-panel {\n            background: white;\n            border-radius: 12px;\n            box-shadow: var(--shadow);\n            padding: 1.5rem;\n            margin-bottom: 2rem;\n        }\n\n        .debug-panel h2 {\n            color: var(--primary-dark);\n            margin-bottom: 1rem;\n            padding-bottom: 0.5rem;\n            border-bottom: 1px solid var(--gray-200);\n        }\n\n        .debug-info {\n            display: grid;\n            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n            gap: 1rem;\n            margin-bottom: 1.5rem;\n        }\n\n        .info-item {\n            background: var(--gray-50);\n            padding: 1rem;\n            border-radius: 8px;\n        }\n\n        .info-item label {\n            font-weight: 600;\n            color: var(--gray-700);\n            display: block;\n            margin-bottom: 0.5rem;\n        }\n\n        .debug-actions {\n            display: flex;\n            gap: 1rem;\n            flex-wrap: wrap;\n        }\n\n        .dashboard {\n            display: grid;\n            grid-template-columns: 250px 1fr;\n            gap: 1.5rem;\n        }\n\n        .sidebar {\n            background: white;\n            border-radius: 12px;\n            box-shadow: var(--shadow);\n            padding: 1.5rem;\n            height: fit-content;\n        }\n\n        .sidebar-menu {\n            list-style: none;\n        }\n\n        .sidebar-menu li {\n            margin-bottom: 0.5rem;\n        }\n\n        .sidebar-menu a {\n            display: flex;\n            align-items: center;\n            gap: 0.75rem;\n            padding: 0.75rem 1rem;\n            border-radius: 8px;\n            color: var(--gray-700);\n            text-decoration: none;\n            transition: all 0.3s ease;\n        }\n\n        .sidebar-menu a:hover, .sidebar-menu a.active {\n            background-color: var(--primary-light);\n            color: var(--primary);\n        }\n\n        .main-content {\n            background: white;\n            border-radius: 12px;\n            box-shadow: var(--shadow);\n            padding: 2rem;\n        }\n\n        .stats-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\n            gap: 1.5rem;\n            margin-bottom: 2rem;\n        }\n\n        .stat-card {\n            background: var(--gray-50);\n            padding: 1.5rem;\n            border-radius: 12px;\n            text-align: center;\n        }\n\n        .stat-card i {\n            font-size: 2rem;\n            color: var(--primary);\n            margin-bottom: 1rem;\n        }\n\n        .stat-card h3 {\n            font-size: 2rem;\n            margin-bottom: 0.5rem;\n        }\n\n        .tabs {\n            margin-top: 2rem;\n        }\n\n        .tab-headers {\n            display: flex;\n            border-bottom: 1px solid var(--gray-200);\n            margin-bottom: 1.5rem;\n        }\n\n        .tab-header {\n            padding: 1rem 1.5rem;\n            cursor: pointer;\n            border-bottom: 2px solid transparent;\n            transition: all 0.3s ease;\n        }\n\n        .tab-header.active {\n            border-bottom-color: var(--primary);\n            color: var(--primary);\n            font-weight: 600;\n        }\n\n        .tab-content {\n            display: none;\n        }\n\n        .tab-content.active {\n            display: block;\n        }\n\n        .api-response {\n            background: var(--gray-100);\n            padding: 1rem;\n            border-radius: 8px;\n            margin-top: 1rem;\n            max-height: 300px;\n            overflow-y: auto;\n            font-family: monospace;\n            font-size: 0.9rem;\n        }\n\n        .hidden {\n            display: none;\n        }\n\n        .loading {\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            justify-content: center;\n            padding: 2rem;\n        }\n\n        .spinner {\n            width: 40px;\n            height: 40px;\n            border: 4px solid var(--gray-200);\n            border-top: 4px solid var(--primary);\n            border-radius: 50%;\n            animation: spin 1s linear infinite;\n            margin-bottom: 1rem;\n        }\n\n        @keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n        }\n\n        @media (max-width: 768px) {\n            .dashboard {\n                grid-template-columns: 1fr;\n            }\n            \n            .stats-grid {\n                grid-template-columns: 1fr;\n            }\n            \n            header {\n                flex-direction: column;\n                gap: 1rem;\n            }\n            \n            .debug-info {\n                grid-template-columns: 1fr;\n            }\n        }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <header>\n            <div class=\"logo\">\n                <div class=\"logo-icon\">\n                    <i class=\"fas fa-chart-bar\"></i>\n                </div>\n                <div class=\"logo-text\">\n                    <h2>لوحة تحكم المشرف - وضع التصحيح</h2>\n                </div>\n            </div>\n            <div class=\"auth-section\">\n                <button class=\"btn btn-danger\" onclick=\"logout()\">تسجيل الخروج</button>\n            </div>\n        </header>\n\n        <div class=\"debug-panel\">\n            <h2>معلومات التصحيح</h2>\n            <div class=\"debug-info\">\n                <div class=\"info-item\">\n                    <label>حالة المصادقة:</label>\n                    <span id=\"debugAuthStatus\">غير معروف</span>\n                </div>\n                <div class=\"info-item\">\n                    <label>نوع المستخدم:</label>\n                    <span id=\"debugUserType\">غير معروف</span>\n                </div>\n                <div class=\"info-item\">\n                    <label>Token:</label>\n                    <span id=\"debugToken\">غير متوفر</span>\n                </div>\n                <div class=\"info-item\">\n                    <label>حالة طلب API:</label>\n                    <span id=\"debugApiStatus\">لم يتم الطلب بعد</span>\n                </div>\n                <div class=\"info-item\">\n                    <label>رابط API:</label>\n                    <span>/api/admin/dashboard</span>\n                </div>\n                <div class=\"info-item\">\n                    <label>وقت آخر تحديث:</label>\n                    <span id=\"debugLastUpdate\">-</span>\n                </div>\n            </div>\n            <div class=\"debug-actions\">\n                <button class=\"btn btn-primary\" onclick=\"fetchDashboardData()\">\n                    <i class=\"fas fa-sync\"></i> إعادة تحميل البيانات\n                </button>\n                <button class=\"btn btn-outline\" onclick=\"simulateApiSuccess()\">\n                    <i class=\"fas fa-check-circle\"></i> محاكاة استجابة ناجحة\n                </button>\n                <button class=\"btn btn-outline\" onclick=\"simulateApiError()\">\n                    <i class=\"fas fa-exclamation-circle\"></i> محاكاة خطأ في API\n                </button>\n                <button class=\"btn btn-outline\" onclick=\"toggleJsonView()\">\n                    <i class=\"fas fa-code\"></i> عرض/إخفاء JSON\n                </button>\n            </div>\n            <div id=\"apiResponse\" class=\"api-response hidden\">\n                {/* سيتم ملء هذا بالقسم dynamically */}\n            </div>\n        </div>\n\n        <div id=\"loadingIndicator\" class=\"loading\">\n            <div class=\"spinner\"></div>\n            <p>جاري تحميل بيانات لوحة التحكم...</p>\n        </div>\n\n        <div id=\"dashboardContent\" class=\"hidden\">\n            <div class=\"dashboard\">\n                <div class=\"sidebar\">\n                    <h3 style=\"margin-bottom: 1rem;\">القائمة</h3>\n                    <ul class=\"sidebar-menu\">\n                        <li><a href=\"#\" class=\"active\"><i class=\"fas fa-tachometer-alt\"></i> لوحة التحكم</a></li>\n                        <li><a href=\"#\"><i class=\"fas fa-shopping-bag\"></i> الطلبات</a></li>\n                        <li><a href=\"#\"><i class=\"fas fa-store\"></i> المطاعم</a></li>\n                        <li><a href=\"#\"><i class=\"fas fa-utensils\"></i> قوائم الطعام</a></li>\n                        <li><a href=\"#\"><i class=\"fas fa-truck\"></i> السائقين</a></li>\n                        <li><a href=\"#\"><i class=\"fas fa-tag\"></i> العروض</a></li>\n                        <li><a href=\"#\"><i class=\"fas fa-users\"></i> العملاء</a></li>\n                        <li><a href=\"#\"><i class=\"fas fa-cog\"></i> الإعدادات</a></li>\n                    </ul>\n                </div>\n\n                <div class=\"main-content\">\n                    <h2 style=\"margin-bottom: 1.5rem;\">نظرة عامة على النظام</h2>\n\n                    <div class=\"stats-grid\">\n                        <div class=\"stat-card\">\n                            <i class=\"fas fa-shopping-bag\"></i>\n                            <h3 id=\"statOrders\">0</h3>\n                            <p>إجمالي الطلبات</p>\n                        </div>\n                        <div class=\"stat-card\">\n                            <i class=\"fas fa-users\"></i>\n                            <h3 id=\"statCustomers\">0</h3>\n                            <p>العملاء النشطين</p>\n                        </div>\n                        <div class=\"stat-card\">\n                            <i class=\"fas fa-dollar-sign\"></i>\n                            <h3 id=\"statRevenue\">0 ريال</h3>\n                            <p>إجمالي المبيعات</p>\n                        </div>\n                        <div class=\"stat-card\">\n                            <i class=\"fas fa-truck\"></i>\n                            <h3 id=\"statDrivers\">0</h3>\n                            <p>السائقين المتاحين</p>\n                        </div>\n                    </div>\n\n                    <div class=\"tabs\">\n                        <div class=\"tab-headers\">\n                            <div class=\"tab-header active\" onclick=\"switchTab('overview')\">نظرة عامة</div>\n                            <div class=\"tab-header\" onclick=\"switchTab('orders')\">الطلبات</div>\n                            <div class=\"tab-header\" onclick=\"switchTab('restaurants')\">المطاعم</div>\n                            <div class=\"tab-header\" onclick=\"switchTab('drivers')\">السائقين</div>\n                        </div>\n\n                        <div id=\"tabOverview\" class=\"tab-content active\">\n                            <h3>الطلبات الحديثة</h3>\n                            <div id=\"recentOrdersList\">\n                                <p>جاري تحميل البيانات...</p>\n                            </div>\n                        </div>\n\n                        <div id=\"tabOrders\" class=\"tab-content\">\n                            <h3>جميع الطلبات</h3>\n                            <p>محتوى إدارة الطلبات سيظهر هنا</p>\n                        </div>\n\n                        <div id=\"tabRestaurants\" class=\"tab-content\">\n                            <h3>المطاعم المسجلة</h3>\n                            <p>محتوى إدارة المطاعم سيظهر هنا</p>\n                        </div>\n\n                        <div id=\"tabDrivers\" class=\"tab-content\">\n                            <h3>السائقين المسجلين</h3>\n                            <p>محتوى إدارة السائقين سيظهر هنا</p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div id=\"errorContent\" class=\"hidden\" style=\"text-align: center; padding: 2rem;\">\n            <i class=\"fas fa-exclamation-triangle\" style=\"font-size: 3rem; color: var(--red-500); margin-bottom: 1rem;\"></i>\n            <h2>فشل في تحميل بيانات لوحة التحكم</h2>\n            <p id=\"errorMessage\" style=\"margin-bottom: 1.5rem;\">حدث خطأ أثناء محاولة تحميل البيانات</p>\n            <button class=\"btn btn-primary\" onclick=\"fetchDashboardData()\">إعادة المحاولة</button>\n        </div>\n    </div>\n\n    <script>\n        // حالة التطبيق\n        let authToken = localStorage.getItem('authToken') || 'fake-jwt-token-' + Math.random().toString(36).substring(2);\n        let userType = localStorage.getItem('userType') || 'admin';\n        let dashboardData = null;\n        let lastUpdateTime = null;\n\n        // عناصر DOM\n        const loadingIndicator = document.getElementById('loadingIndicator');\n        const dashboardContent = document.getElementById('dashboardContent');\n        const errorContent = document.getElementById('errorContent');\n        const apiResponseElement = document.getElementById('apiResponse');\n\n        // عناصر التصحيح\n        const debugAuthStatus = document.getElementById('debugAuthStatus');\n        const debugUserType = document.getElementById('debugUserType');\n        const debugToken = document.getElementById('debugToken');\n        const debugApiStatus = document.getElementById('debugApiStatus');\n        const debugLastUpdate = document.getElementById('debugLastUpdate');\n\n        // تهيئة الصفحة\n        function initPage() {\n            updateDebugInfo();\n            fetchDashboardData();\n        }\n\n        // تحديث معلومات التصحيح\n        function updateDebugInfo() {\n            debugAuthStatus.textContent = authToken ? 'مصادق' : 'غير مصادق';\n            debugUserType.textContent = userType;\n            debugToken.textContent = authToken ? authToken.substring(0, 20) + '...' : 'غير متوفر';\n            debugLastUpdate.textContent = lastUpdateTime || '-';\n        }\n\n        // محاكاة استدعاء API\n        function fetchDashboardData() {\n            // إظهار مؤشر التحميل\n            loadingIndicator.classList.remove('hidden');\n            dashboardContent.classList.add('hidden');\n            errorContent.classList.add('hidden');\n            \n            debugApiStatus.textContent = 'جاري التحميل...';\n            updateDebugInfo();\n\n            // محاكاة اتصال API مع الخادم\n            setTimeout(() => {\n                // في حالة نجاح محاكاة API\n                if (Math.random() > 0.3) { // 70% فرصة نجاح\n                    simulateApiSuccess();\n                } else {\n                    simulateApiError();\n                }\n            }, 2000);\n        }\n\n        // محاكاة استجابة API ناجحة\n        function simulateApiSuccess() {\n            // بيانات وهمية للوحة التحكم\n            dashboardData = {\n                stats: {\n                    totalOrders: 1258,\n                    totalCustomers: 524,\n                    totalRevenue: 85420,\n                    activeDrivers: 28,\n                    todayOrders: 42,\n                    todayRevenue: 3250,\n                    pendingOrders: 12,\n                    totalRestaurants: 36\n                },\n                recentOrders: [\n                    { id: 1, orderNumber: '1001', customerName: 'أحمد محمد', total: 120, status: 'delivered', createdAt: new Date(Date.now() - 1000 * 60 * 15).toISOString() },\n                    { id: 2, orderNumber: '1002', customerName: 'فاطمة علي', total: 85, status: 'preparing', createdAt: new Date(Date.now() - 1000 * 60 * 30).toISOString() },\n                    { id: 3, orderNumber: '1003', customerName: 'خالد إبراهيم', total: 210, status: 'pending', createdAt: new Date(Date.now() - 1000 * 60 * 45).toISOString() },\n                    { id: 4, orderNumber: '1004', customerName: 'سارة عبدالله', total: 65, status: 'ready', createdAt: new Date(Date.now() - 1000 * 60 * 60).toISOString() },\n                    { id: 5, orderNumber: '1005', customerName: 'محمد حسن', total: 150, status: 'picked_up', createdAt: new Date(Date.now() - 1000 * 60 * 90).toISOString() }\n                ]\n            };\n\n            // تحديث الوقت\n            lastUpdateTime = new Date().toLocaleTimeString();\n            \n            // تحديث واجهة المستخدم\n            updateDashboardUI();\n            \n            // تحديث حالة التصحيح\n            debugApiStatus.textContent = 'نجح (200 OK)';\n            updateDebugInfo();\n            \n            // إخفاء مؤشر التحميل وإظهار المحتوى\n            loadingIndicator.classList.add('hidden');\n            dashboardContent.classList.remove('hidden');\n            \n            // تحديث عرض JSON\n            updateApiResponseView();\n        }\n\n        // محاكاة خطأ في API\n        function simulateApiError() {\n            // تحديث حالة التصحيح\n            debugApiStatus.textContent = 'فشل (500 Internal Server Error)';\n            lastUpdateTime = new Date().toLocaleTimeString();\n            updateDebugInfo();\n            \n            // إخفاء مؤشر التحميل وإظهار رسالة الخطأ\n            loadingIndicator.classList.add('hidden');\n            errorContent.classList.remove('hidden');\n            \n            // تحديث عرض JSON\n            apiResponseElement.textContent = '{\\n  \"error\": \"Internal Server Error\",\\n  \"message\": \"حدث خطأ في الخادم\",\\n  \"statusCode\": 500\\n}';\n        }\n\n        // تحديث واجهة لوحة التحكم\n        function updateDashboardUI() {\n            if (!dashboardData) return;\n            \n            // تحديث الإحصائيات\n            document.getElementById('statOrders').textContent = dashboardData.stats.totalOrders.toLocaleString();\n            document.getElementById('statCustomers').textContent = dashboardData.stats.totalCustomers.toLocaleString();\n            document.getElementById('statRevenue').textContent = dashboardData.stats.totalRevenue.toLocaleString() + ' ريال';\n            document.getElementById('statDrivers').textContent = dashboardData.stats.activeDrivers.toLocaleString();\n            \n            // تحديث قائمة الطلبات الحديثة\n            const ordersList = document.getElementById('recentOrdersList');\n            if (dashboardData.recentOrders.length > 0) {\n                ordersList.innerHTML = '';\n                dashboardData.recentOrders.forEach(order => {\n                    const orderElement = document.createElement('div');\n                    orderElement.style.padding = '0.75rem';\n                    orderElement.style.border = '1px solid #e5e7eb';\n                    orderElement.style.borderRadius = '0.5rem';\n                    orderElement.style.marginBottom = '0.5rem';\n                    orderElement.style.display = 'flex';\n                    orderElement.style.justifyContent = 'space-between';\n                    orderElement.style.alignItems = 'center';\n                    \n                    orderElement.innerHTML = `\n                        <div>\n                            <strong>طلب #${order.orderNumber}</strong>\n                            <div>${order.customerName}</div>\n                            <small>${new Date(order.createdAt).toLocaleString('ar-YE')}</small>\n                        </div>\n                        <div>\n                            <span style=\"background: #e5e7eb; padding: 0.25rem 0.5rem; border-radius: 0.25rem; font-size: 0.875rem;\">\n                                ${order.total} ريال\n                            </span>\n                        </div>\n                    `;\n                    \n                    ordersList.appendChild(orderElement);\n                });\n            } else {\n                ordersList.innerHTML = '<p>لا توجد طلبات حديثة</p>';\n            }\n        }\n\n        // تحديث عرض استجابة API\n        function updateApiResponseView() {\n            if (dashboardData) {\n                apiResponseElement.textContent = JSON.stringify(dashboardData, null, 2);\n            }\n        }\n\n        // تبديل علامات التبويب\n        function switchTab(tabName) {\n            // إخفاء جميع المحتويات\n            document.querySelectorAll('.tab-content').forEach(tab => {\n                tab.classList.remove('active');\n            });\n            \n            // إلغاء تنشيط جميع العناوين\n            document.querySelectorAll('.tab-header').forEach(header => {\n                header.classList.remove('active');\n            });\n            \n            // إظهار المحتوى المحدد\n            document.getElementById('tab' + tabName.charAt(0).toUpperCase() + tabName.slice(1)).classList.add('active');\n            \n            // تنشيط العنوان المحدد\n            document.querySelector(`.tab-header:nth-child(${['overview', 'orders', 'restaurants', 'drivers'].indexOf(tabName) + 1})`).classList.add('active');\n        }\n\n        // تبديل عرض JSON\n        function toggleJsonView() {\n            apiResponseElement.classList.toggle('hidden');\n        }\n\n        // تسجيل الخروج\n        function logout() {\n            localStorage.removeItem('authToken');\n            localStorage.removeItem('userType');\n            alert('تم تسجيل الخروج بنجاح');\n            window.location.reload();\n        }\n\n        // بدء التطبيق\n        initPage();\n    </script>\n</body>\n</html>","size_bytes":25129},"client/src/pages/admin/AdminLoginPage.tsx":{"content":"import React, { useState, useEffect } from 'react';\nimport { useAuth } from '@/context/AuthContext';\nimport { useLocation } from 'wouter';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { Loader2, Shield, Mail, Lock, Eye, EyeOff } from 'lucide-react';\n\nexport default function AdminLoginPage() {\n  const [, setLocation] = useLocation();\n  const { login, user, isLoading } = useAuth();\n  const [formData, setFormData] = useState({\n    email: '',\n    password: ''\n  });\n  const [error, setError] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [showPassword, setShowPassword] = useState(false);\n\n  // إعادة توجيه إذا كان المستخدم مسجل دخول بالفعل\n  useEffect(() => {\n    if (user && user.userType === 'admin') {\n      setLocation('/admin');\n    }\n  }, [user, setLocation]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n    setIsSubmitting(true);\n\n    if (!formData.email.trim() || !formData.password.trim()) {\n      setError('يرجى إدخال البريد الإلكتروني وكلمة المرور');\n      setIsSubmitting(false);\n      return;\n    }\n\n    try {\n      const result = await login(formData.email, formData.password, 'admin');\n      \n      if (result.success) {\n        setLocation('/admin');\n      } else {\n        setError(result.message || 'فشل في تسجيل الدخول');\n      }\n    } catch (error) {\n      setError('حدث خطأ غير متوقع');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    if (error) setError(''); // مسح الخطأ عند الكتابة\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-blue-50\">\n        <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-blue-50 p-4\">\n      <div className=\"w-full max-w-md\">\n        {/* Header */}\n        <div className=\"text-center mb-8\">\n          <div className=\"w-20 h-20 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg\">\n            <Shield className=\"h-10 w-10 text-white\" />\n          </div>\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">لوحة التحكم</h1>\n          <p className=\"text-gray-600\">تسجيل دخول المدير</p>\n        </div>\n\n        {/* Login Form */}\n        <Card className=\"shadow-xl border-0 bg-white/80 backdrop-blur-sm\">\n          <CardHeader className=\"space-y-1 pb-6\">\n            <CardTitle className=\"text-2xl text-center text-gray-800\">\n              مرحباً بك\n            </CardTitle>\n            <p className=\"text-center text-gray-600 text-sm\">\n              أدخل بياناتك للوصول إلى لوحة التحكم\n            </p>\n          </CardHeader>\n          \n          <CardContent>\n            <form onSubmit={handleSubmit} className=\"space-y-6\">\n              {error && (\n                <Alert className=\"border-red-200 bg-red-50\">\n                  <AlertDescription className=\"text-red-800\">\n                    {error}\n                  </AlertDescription>\n                </Alert>\n              )}\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"email\" className=\"text-gray-700 font-medium\">\n                  البريد الإلكتروني\n                </Label>\n                <div className=\"relative\">\n                  <Mail className=\"absolute right-3 top-3 h-5 w-5 text-gray-400\" />\n                  <Input\n                    id=\"email\"\n                    name=\"email\"\n                    type=\"email\"\n                    value={formData.email}\n                    onChange={handleInputChange}\n                    placeholder=\"admin@example.com\"\n                    className=\"pr-10 h-12 border-gray-200 focus:border-blue-500 focus:ring-blue-500\"\n                    required\n                    disabled={isSubmitting}\n                  />\n                </div>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"password\" className=\"text-gray-700 font-medium\">\n                  كلمة المرور\n                </Label>\n                <div className=\"relative\">\n                  <Lock className=\"absolute right-3 top-3 h-5 w-5 text-gray-400\" />\n                  <Input\n                    id=\"password\"\n                    name=\"password\"\n                    type={showPassword ? \"text\" : \"password\"}\n                    value={formData.password}\n                    onChange={handleInputChange}\n                    placeholder=\"••••••••\"\n                    className=\"pr-10 pl-10 h-12 border-gray-200 focus:border-blue-500 focus:ring-blue-500\"\n                    required\n                    disabled={isSubmitting}\n                  />\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowPassword(!showPassword)}\n                    className=\"absolute left-3 top-3 text-gray-400 hover:text-gray-600\"\n                    disabled={isSubmitting}\n                  >\n                    {showPassword ? <EyeOff className=\"h-5 w-5\" /> : <Eye className=\"h-5 w-5\" />}\n                  </button>\n                </div>\n              </div>\n\n              <Button\n                type=\"submit\"\n                className=\"w-full h-12 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-medium rounded-lg shadow-lg hover:shadow-xl transition-all duration-200\"\n                disabled={isSubmitting}\n              >\n                {isSubmitting ? (\n                  <>\n                    <Loader2 className=\"mr-2 h-5 w-5 animate-spin\" />\n                    جاري تسجيل الدخول...\n                  </>\n                ) : (\n                  'تسجيل الدخول'\n                )}\n              </Button>\n            </form>\n\n            {/* Demo Credentials */}\n            <div className=\"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200\">\n              <p className=\"text-sm text-blue-800 font-medium mb-2\">بيانات تجريبية:</p>\n              <div className=\"text-xs text-blue-700 space-y-1\">\n                <p>البريد الإلكتروني: aymenpro124@gmail.com</p>\n                <p>كلمة المرور: 777146387</p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Footer */}\n        <div className=\"text-center mt-8\">\n          <p className=\"text-gray-500 text-sm\">\n            © 2024 السريع ون - جميع الحقوق محفوظة\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":7298},"client/src/pages/driver/DriverLoginPage.tsx":{"content":"import React, { useState, useEffect } from 'react';\nimport { useAuth } from '@/context/AuthContext';\nimport { useLocation } from 'wouter';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { Loader2, Truck, Phone, Lock, Eye, EyeOff } from 'lucide-react';\n\nexport default function DriverLoginPage() {\n  const [, setLocation] = useLocation();\n  const { login, user, isLoading } = useAuth();\n  const [formData, setFormData] = useState({\n    phone: '',\n    password: ''\n  });\n  const [error, setError] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [showPassword, setShowPassword] = useState(false);\n\n  // إعادة توجيه إذا كان المستخدم مسجل دخول بالفعل\n  useEffect(() => {\n    if (user && user.userType === 'driver') {\n      setLocation('/delivery');\n    }\n  }, [user, setLocation]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n    setIsSubmitting(true);\n\n    if (!formData.phone.trim() || !formData.password.trim()) {\n      setError('يرجى إدخال رقم الهاتف وكلمة المرور');\n      setIsSubmitting(false);\n      return;\n    }\n\n    try {\n      const result = await login(formData.phone, formData.password, 'driver');\n      \n      if (result.success) {\n        setLocation('/delivery');\n      } else {\n        setError(result.message || 'فشل في تسجيل الدخول');\n      }\n    } catch (error) {\n      setError('حدث خطأ غير متوقع');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    if (error) setError(''); // مسح الخطأ عند الكتابة\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 via-white to-green-50\">\n        <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 via-white to-green-50 p-4\">\n      <div className=\"w-full max-w-md\">\n        {/* Header */}\n        <div className=\"text-center mb-8\">\n          <div className=\"w-20 h-20 bg-gradient-to-br from-green-500 to-green-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg\">\n            <Truck className=\"h-10 w-10 text-white\" />\n          </div>\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">تطبيق السائق</h1>\n          <p className=\"text-gray-600\">تسجيل دخول السائق</p>\n        </div>\n\n        {/* Login Form */}\n        <Card className=\"shadow-xl border-0 bg-white/80 backdrop-blur-sm\">\n          <CardHeader className=\"space-y-1 pb-6\">\n            <CardTitle className=\"text-2xl text-center text-gray-800\">\n              مرحباً بك\n            </CardTitle>\n            <p className=\"text-center text-gray-600 text-sm\">\n              أدخل بياناتك لبدء العمل\n            </p>\n          </CardHeader>\n          \n          <CardContent>\n            <form onSubmit={handleSubmit} className=\"space-y-6\">\n              {error && (\n                <Alert className=\"border-red-200 bg-red-50\">\n                  <AlertDescription className=\"text-red-800\">\n                    {error}\n                  </AlertDescription>\n                </Alert>\n              )}\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"phone\" className=\"text-gray-700 font-medium\">\n                  رقم الهاتف\n                </Label>\n                <div className=\"relative\">\n                  <Phone className=\"absolute right-3 top-3 h-5 w-5 text-gray-400\" />\n                  <Input\n                    id=\"phone\"\n                    name=\"phone\"\n                    type=\"tel\"\n                    value={formData.phone}\n                    onChange={handleInputChange}\n                    placeholder=\"+967771234567\"\n                    className=\"pr-10 h-12 border-gray-200 focus:border-green-500 focus:ring-green-500\"\n                    required\n                    disabled={isSubmitting}\n                  />\n                </div>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"password\" className=\"text-gray-700 font-medium\">\n                  كلمة المرور\n                </Label>\n                <div className=\"relative\">\n                  <Lock className=\"absolute right-3 top-3 h-5 w-5 text-gray-400\" />\n                  <Input\n                    id=\"password\"\n                    name=\"password\"\n                    type={showPassword ? \"text\" : \"password\"}\n                    value={formData.password}\n                    onChange={handleInputChange}\n                    placeholder=\"••••••••\"\n                    className=\"pr-10 pl-10 h-12 border-gray-200 focus:border-green-500 focus:ring-green-500\"\n                    required\n                    disabled={isSubmitting}\n                  />\n                  <button\n                    type=\"button\"\n                    onClick={() => setShowPassword(!showPassword)}\n                    className=\"absolute left-3 top-3 text-gray-400 hover:text-gray-600\"\n                    disabled={isSubmitting}\n                  >\n                    {showPassword ? <EyeOff className=\"h-5 w-5\" /> : <Eye className=\"h-5 w-5\" />}\n                  </button>\n                </div>\n              </div>\n\n              <Button\n                type=\"submit\"\n                className=\"w-full h-12 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-medium rounded-lg shadow-lg hover:shadow-xl transition-all duration-200\"\n                disabled={isSubmitting}\n              >\n                {isSubmitting ? (\n                  <>\n                    <Loader2 className=\"mr-2 h-5 w-5 animate-spin\" />\n                    جاري تسجيل الدخول...\n                  </>\n                ) : (\n                  'تسجيل الدخول'\n                )}\n              </Button>\n            </form>\n\n            {/* Demo Credentials */}\n            <div className=\"mt-6 p-4 bg-green-50 rounded-lg border border-green-200\">\n              <p className=\"text-sm text-green-800 font-medium mb-2\">بيانات تجريبية:</p>\n              <div className=\"text-xs text-green-700 space-y-1\">\n                <p>رقم الهاتف: +967771234567</p>\n                <p>كلمة المرور: password123</p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Footer */}\n        <div className=\"text-center mt-8\">\n          <p className=\"text-gray-500 text-sm\">\n            © 2024 السريع ون - جميع الحقوق محفوظة\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}","size_bytes":7251}},"version":1}